<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html style><!--
 Page saved with SingleFile 
 url: https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Functions.html 
 saved date: Tue Jul 04 2023 00:42:19 GMT-0700 (Pacific Daylight Time)
--><!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ --><meta charset=utf-8><style class="darkreader darkreader--user-agent" media=screen>.jfk-bubble.gtx-bubble,.captcheck_answer_label>input+img,span#closed_text>img[src^="https://www.gstatic.com/images/branding/googlelogo"],span[data-href^="https://www.hcaptcha.com/"]>#icon,#bit-notification-bar-iframe,::-webkit-calendar-picker-indicator,#gnu-banner img,#search-icon{filter:invert(100%) hue-rotate(180deg) contrast(90%) sepia(5%)!important}:root{--darkreader-neutral-background:#131516;--darkreader-neutral-text:#dcd6cf;--darkreader-selection-background:#054da5;--darkreader-selection-text:#ece8e2}html{background-color:#191a1b!important}html{color-scheme:dark!important}html,body{background-color:#191a1b}html,body{border-color:#756c5e;color:#ece8e2}a{color:#3992f8}::placeholder{color:#b5ada1}::-webkit-scrollbar{background-color:#212324;color:#aea699}::-webkit-scrollbar-thumb{background-color:#464b4d}::-webkit-scrollbar-corner{background-color:#191a1b}*{scrollbar-color:#464b4d #212324}::selection{background-color:#054da5!important;color:#ece8e2!important}::-moz-selection{background-color:#054da5!important;color:#ece8e2!important}</style>
<title>Shell Functions (Bash Reference Manual)</title>
<meta name=description content="Shell Functions (Bash Reference Manual)">
<meta name=keywords content="Shell Functions (Bash Reference Manual)">
<meta name=resource-type content=document>
<meta name=distribution content=global>
<meta name=Generator content=makeinfo>
<meta name=viewport content="width=device-width,initial-scale=1">
<link href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/index.html rel=start title=Top><meta name=darkreader content=f52d3893d7cb46fd8f84a5a1670871bd><style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style>
<link href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Indexes.html rel=index title=Indexes>
<link href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/index.html#SEC_Contents rel=contents title="Table of Contents">
<link href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Basic-Shell-Features.html rel=up title="Basic Shell Features">
<link href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Parameters.html rel=next title="Shell Parameters">
<link href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Commands.html rel=prev title="Shell Commands">
<style><!--div.example{margin-left:3.2em}-->html{color:#000;background:#FFF}div,h3,code,p{margin:0;padding:0}code,em,var{font-style:inherit;font-weight:inherit}html,body{font-size:1em;text-align:left;text-decoration:none}html{background-color:#e7e7e7}body{margin:0 auto;padding:.5em 1em 1em 1em;background-color:white;border:.1em solid #c0c0c0}h3{font-size:1.30em;margin:1.0em 0 0.87em 0}p{margin:1em 0}pre{overflow:auto;padding-bottom:.3em}hr{margin:1em 0}h3{font-weight:bold}h3{color:#333}a[href]{color:#005090}a[href]:visited{color:#100070}a[href]:active,a[href]:hover{color:#100070;text-decoration:none}hr{background-color:#ede6d5}em{font-style:italic}small{font-size:.9em}.header{margin:0-1em;padding:0 1em}.header p{line-height:2em}.header a{line-height:2em}.node a:hover,.header a:hover{background:#f2efe4}div.example{padding:.8em 1.2em .4em}div.example,pre.example{margin:1em 0 1em 3%;-webkit-border-radius:.3em;-moz-border-radius:.3em;border-radius:.3em;border:1px solid #d4cbb6;background-color:#f2efe4}div.example>pre.example{padding:0 0 .4em;margin:0;border:none}@media (min-width:40em){body{padding:.5em 3em 1em 3em}div.header{margin:0-3em;padding:0 3em}}p,pre,code{line-height:1.5em}var{font-style:italic}.header{line-height:2em;font-size:87.5%;color:#433}.section{font-family:Fira Sans,sans}a{text-decoration:none;outline-style:none}a:hover{text-decoration:underline}body{max-width:45em}</style><style class="darkreader darkreader--sync" media=screen>html{color:#000;background:#FFF}div,h3,code,p{margin:0;padding:0}code,em,var{font-style:inherit;font-weight:inherit}html,body{font-size:1em;text-align:left;text-decoration:none}html{background-color:#e7e7e7}body{margin:0 auto;padding:.5em 1em 1em 1em;background-color:white;border:.1em solid #c0c0c0}h3{font-size:1.30em;margin:1.0em 0 0.87em 0}p{margin:1em 0}pre{overflow:auto;padding-bottom:.3em}hr{margin:1em 0}h3{font-weight:bold}h3{color:#333}a[href]{color:#005090}a[href]:visited{color:#100070}a[href]:active,a[href]:hover{color:#100070;text-decoration:none}hr{background-color:#ede6d5}em{font-style:italic}small{font-size:.9em}.header{margin:0-1em;padding:0 1em}.header p{line-height:2em}.header a{line-height:2em}.node a:hover,.header a:hover{background:#f2efe4}div.example{padding:.8em 1.2em .4em}div.example,pre.example{margin:1em 0 1em 3%;-webkit-border-radius:.3em;-moz-border-radius:.3em;border-radius:.3em;border:1px solid #d4cbb6;background-color:#f2efe4}div.example>pre.example{padding:0 0 .4em;margin:0;border:none}@media (min-width:40em){body{padding:.5em 3em 1em 3em}div.header{margin:0-3em;padding:0 3em}}p,pre,code{line-height:1.5em}var{font-style:italic}.header{line-height:2em;font-size:87.5%;color:#433}.section{font-family:Fira Sans,sans}a{text-decoration:none;outline-style:none}a:hover{text-decoration:underline}body{max-width:45em}html{color:rgb(236,232,226);background-image:none}html,body{text-decoration-color:currentcolor}html{background-color:rgb(39,41,42)}body{background-color:rgb(25,26,27);border-color:rgb(67,72,74)}h3{color:rgb(203,197,188)}a[href]{color:rgb(124,197,251)}a[href]:visited{color:rgb(147,129,249)}a[href]:active,a[href]:hover{color:rgb(147,129,249);text-decoration-color:currentcolor}hr{background-color:rgb(46,38,21)}.node a:hover,.header a:hover{background-color:rgb(38,34,19);background-image:none}div.example,pre.example{border-color:rgb(87,76,52);background-color:rgb(38,34,19)}div.example>pre.example{border-color:currentcolor}.header{color:rgb(197,191,181)}a{text-decoration-color:currentcolor}a:hover{text-decoration-color:currentcolor}</style>
<link type=image/x-icon rel="shortcut icon" href=data:image/vnd.microsoft.icon;base64,AAABAAEAEhIAAAEACADYBQAAFgAAACgAAAASAAAAJAAAAAEACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgYGAAkJCQALCwsAExMTACEhIQAkJCQAJycnADMzMwA5OTkAOjo6AD09PQA/Pz8AQEBAAEZGRgBHR0cASkpKAE9PTwBSUlIAW1tbAGFhYQBmZmYAbW1tAHFxcQBzc3MAd3d3AHl5eQB+fn4Af39/AIGBgQCEhIQAh4eHAIyMjACNjY0Aj4+PAJCQkACRkZEAlZWVAJeXlwCampoAm5ubAJycnAChoaEAoqKiAKWlpQCnp6cAqKioAK2trQCvr68AsLCwALGxsQCysrIAs7OzALa2tgC7u7sAvb29AL+/vwDBwcEAwsLCAMPDwwDExMQAxcXFAMbGxgDHx8cAycnJAMrKygDLy8sAzMzMAM3NzQDOzs4A0NDQANHR0QDT09MA1NTUANXV1QDW1tYA19fXANjY2ADZ2dkA2traANzc3ADd3d0A39/fAOHh4QDi4uIA4+PjAOTk5ADm5uYA6OjoAOnp6QDr6+sA7OzsAO3t7QDu7u4A7+/vAPHx8QDz8/MA9PT0APX19QD29vYA9/f3APj4+AD5+fkA+/v7APz8/AD+/v4A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAampqampqampqampqampqampqAABqampqampqalQQAQdmampqamoAAGpqampqamFqFiUaMmpqampqagAAampqampDaDQSaltLampqampqAABqampqUVleImpqQCQxampqamoAAGpqamo5aihgakBEPCpQampqagAAampqajteUWpmR2ppUUFqampqAABqamceHj5gaFhWJ1hqP2pqamoAAGpqajRqRkhdajRIVDY0SVpqagAAampYOlVqLGplX2piKmNITmpqAABqV0MPI2pqWwxKZRE9agY5TGoAAGpPAxUIZFwXajhYH1UiDQQwagAAakAJV0oOGC8uTTk7HBRXLSFqAABqNRNcakMIAAAoNwILVGpKGmoAAGpQBVtqalQjIz0mIFJqaiUjagAAakwZGjlQRVdqampYSkczCkNqAABqak8rHRtCVmpqalxBKSNTZ2oAAGpqampqampqampqampqampqagAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA><link rel=canonical href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Functions.html><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
<body lang=en>
<div class=section id=Shell-Functions>
<div class=header>
<p>
Next: <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Parameters.html accesskey=n rel=next>Shell Parameters</a>, Previous: <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Commands.html accesskey=p rel=prev>Shell Commands</a>, Up: <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Basic-Shell-Features.html accesskey=u rel=up>Basic Shell Features</a> &nbsp; [<a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/index.html#SEC_Contents title="Table of contents" rel=contents>Contents</a>][<a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Indexes.html title=Index rel=index>Index</a>]</p>
</div>
<hr>
<span id=Shell-Functions-1></span><h3 class=section>3.3 Shell Functions</h3>
<span id=index-shell-function></span>
<span id=index-functions_002c-shell></span>
<p>Shell functions are a way to group commands for later execution
using a single name for the group. They are executed just like
a "regular" command.
When the name of a shell function is used as a simple command name,
the list of commands associated with that function name is executed.
Shell functions are executed in the current
shell context; no new process is created to interpret them.
</p>
<p>Functions are declared using this syntax:
<span id=index-function></span>
<div class=example>
<pre class=example><var>fname</var> () <var>compound-command</var> [ <var>redirections</var> ]
</pre></div>
<p>or
</p>
<div class=example>
<pre class=example>function <var>fname</var> [()] <var>compound-command</var> [ <var>redirections</var> ]
</pre></div>
<p>This defines a shell function named <var>fname</var>. The reserved
word <code>function</code> is optional.
If the <code>function</code> reserved
word is supplied, the parentheses are optional.
The <em>body</em> of the function is the compound command
<var>compound-command</var> (see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Compound-Commands.html>Compound Commands</a>).
That command is usually a <var>list</var> enclosed between { and }, but
may be any compound command listed above.
If the <code>function</code> reserved word is used, but the
parentheses are not supplied, the braces are recommended.
<var>compound-command</var> is executed whenever <var>fname</var> is specified as the
name of a simple command.
When the shell is in <small>POSIX</small> mode (see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Bash-POSIX-Mode.html>Bash POSIX Mode</a>),
<var>fname</var> must be a valid shell name and
may not be the same as one of the special builtins
(see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Special-Builtins.html>Special Builtins</a>).
In default mode, a function name can be any unquoted shell word that does
not contain ‘<samp>$</samp>’.
Any redirections (see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Redirections.html>Redirections</a>) associated with the shell function
are performed when the function is executed.
A function definition may be deleted using the <samp>-f</samp> option to the
<code>unset</code> builtin (see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Bourne-Shell-Builtins.html>Bourne Shell Builtins</a>).
</p>
<p>The exit status of a function definition is zero unless a syntax error
occurs or a readonly function with the same name already exists.
When executed, the exit status of a function is the exit status of the
last command executed in the body.
</p>
<p>Note that for historical reasons, in the most common usage the curly braces
that surround the body of the function must be separated from the body by
<code>blank</code>s or newlines.
This is because the braces are reserved words and are only recognized
as such when they are separated from the command list
by whitespace or another shell metacharacter.
Also, when using the braces, the <var>list</var> must be terminated by a semicolon,
a ‘<samp>&amp;</samp>’, or a newline.
</p>
<p>When a function is executed, the arguments to the
function become the positional parameters
during its execution (see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Positional-Parameters.html>Positional Parameters</a>).
The special parameter ‘<samp>#</samp>’ that expands to the number of
positional parameters is updated to reflect the change.
Special parameter <code>0</code> is unchanged.
The first element of the <code>FUNCNAME</code> variable is set to the
name of the function while the function is executing.
</p>
<p>All other aspects of the shell execution
environment are identical between a function and its caller
with these exceptions:
the <code>DEBUG</code> and <code>RETURN</code> traps
are not inherited unless the function has been given the
<code>trace</code> attribute using the <code>declare</code> builtin or
the <code>-o functrace</code> option has been enabled with
the <code>set</code> builtin,
(in which case all functions inherit the <code>DEBUG</code> and <code>RETURN</code> traps),
and the <code>ERR</code> trap is not inherited unless the <code>-o errtrace</code>
shell option has been enabled.
See <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Bourne-Shell-Builtins.html>Bourne Shell Builtins</a>, for the description of the
<code>trap</code> builtin.
</p>
<p>The <code>FUNCNEST</code> variable, if set to a numeric value greater
than 0, defines a maximum function nesting level. Function
invocations that exceed the limit cause the entire command to
abort.
</p>
<p>If the builtin command <code>return</code>
is executed in a function, the function completes and
execution resumes with the next command after the function
call.
Any command associated with the <code>RETURN</code> trap is executed
before execution resumes.
When a function completes, the values of the
positional parameters and the special parameter ‘<samp>#</samp>’
are restored to the values they had prior to the function’s
execution. If a numeric argument is given to <code>return</code>,
that is the function’s return status; otherwise the function’s
return status is the exit status of the last command executed
before the <code>return</code>.
</p>
<p>Variables local to the function may be declared with the
<code>local</code> builtin (<em>local variables</em>).
Ordinarily, variables and their values
are shared between a function and its caller.
These variables are visible only to
the function and the commands it invokes. This is particularly
important when a shell function calls other functions.
</p>
<p>In the following description, the <em>current scope</em> is a currently-
executing function.
Previous scopes consist of that function’s caller and so on,
back to the "global" scope, where the shell is not executing
any shell function.
Consequently, a local variable at the current local scope is a variable
declared using the <code>local</code> or <code>declare</code> builtins in the
function that is currently executing.
</p>
<p>Local variables "shadow" variables with the same name declared at
previous scopes. For instance, a local variable declared in a function
hides a global variable of the same name: references and assignments
refer to the local variable, leaving the global variable unmodified.
When the function returns, the global variable is once again visible.
</p>
<p>The shell uses <em>dynamic scoping</em> to control a variable’s visibility
within functions.
With dynamic scoping, visible variables and their values
are a result of the sequence of function calls that caused execution
to reach the current function.
The value of a variable that a function sees depends
on its value within its caller, if any, whether that caller is
the "global" scope or another shell function.
This is also the value that a local variable
declaration "shadows", and the value that is restored when the function
returns.
</p>
<p>For example, if a variable <code>var</code> is declared as local in function
<code>func1</code>, and <code>func1</code> calls another function <code>func2</code>,
references to <code>var</code> made from within <code>func2</code> will resolve to the
local variable <code>var</code> from <code>func1</code>, shadowing any global variable
named <code>var</code>.
</p>
<p>The following script demonstrates this behavior.
When executed, the script displays
</p>
<div class=example>
<pre class=example>In func2, var = func1 local
</pre></div>
<div class=example>
<pre class=example>func1()
{
    local var='func1 local'
    func2
}

func2()
{
    echo "In func2, var = $var"
}

var=global
func1
</pre></div>
<p>The <code>unset</code> builtin also acts using the same dynamic scope: if a 
variable is local to the current scope, <code>unset</code> will unset it; 
otherwise the unset will refer to the variable found in any calling scope 
as described above.
If a variable at the current local scope is unset, it will remain so
(appearing as unset)
until it is reset in that scope or until the function returns.
Once the function returns, any instance of the variable at a previous
scope will become visible.
If the unset acts on a variable at a previous scope, any instance of a 
variable with that name that had been shadowed will become visible
(see below how <code>localvar_unset</code>shell option changes this behavior).
</p>
<p>Function names and definitions may be listed with the
<samp>-f</samp> option to the <code>declare</code> (<code>typeset</code>)
builtin command (see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Bash-Builtins.html>Bash Builtin Commands</a>).
The <samp>-F</samp> option to <code>declare</code> or <code>typeset</code>
will list the function names only
(and optionally the source file and line number, if the <code>extdebug</code>
shell option is enabled).
Functions may be exported so that child shell processes
(those created when executing a separate shell invocation)
automatically have them defined with the
<samp>-f</samp> option to the <code>export</code> builtin
(see <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Bourne-Shell-Builtins.html>Bourne Shell Builtins</a>).
</p>
<p>Functions may be recursive.
The <code>FUNCNEST</code> variable may be used to limit the depth of the
function call stack and restrict the number of function invocations.
By default, no limit is placed on the number of recursive calls.
</p>
</div>
<hr>
<div class=header>
<p>
Next: <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Parameters.html>Shell Parameters</a>, Previous: <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Shell-Commands.html>Shell Commands</a>, Up: <a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Basic-Shell-Features.html>Basic Shell Features</a> &nbsp; [<a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/index.html#SEC_Contents title="Table of contents" rel=contents>Contents</a>][<a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/html_node/Indexes.html title=Index rel=index>Index</a>]</p>
</div>
