<!DOCTYPE html> <html style lang=en-US><!--
 Page saved with SingleFile 
 url: http://ejurgensen.github.io/forked-daapd/ 
 saved date: Sat Jan 02 2021 15:12:04 GMT-0800 (Pacific Standard Time)
--><meta charset=utf-8><style>:root{--sf-img-0:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAVCAYAAABhe09AAAAAFUlEQVQY02NgGDLg3Llz/0GYYcgBAN3DBtMvUcW7AAAAAElFTkSuQmCC");--sf-img-1:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAANlBMVEUAAAD////////////////////////////////////////////////////////////////////xY8b8AAAAEXRSTlMAAL9gz+8QgEDfMJ8gr49QcEDv0BsAAAE3SURBVHhefdLrsoMwCARgEhKC5qJ5/5c9C7WN+uPQcXTyucBMpfBv0a+4btMqjv139mUpea6K+uTdgrkX1jISfHa5MQM3pqtahafm/NVCt2rokOXiHc/c5MYqFfkPC+Yy9ZkOnKuKbckEL87FH2y3tXzxUANLnhuBHRaTzlnBjNbg9OCIQJwZ3Gf25Z/FfqQBXfsK3+OCGYF8EL3UOyJozItX+fBorOD80rS4qmp6M5eSPhzPQ8eLezmx+QgUvRHVZ1j8r+BAyO3Udip5aYUatGAvVTpwyTHcOjcgSUbbQBQtzpO/AzZDD7Ox+iiskCYCuFwPnJIxDXP/2qL9nPdsPZ0pmWO9+OMDynSxwDMTfbnVaers3m2lkTegjfC3FxOdeXpdt7jTg0nO9Tl1dXNe1bhYqayj8AeQBx0sNhH+GgAAAABJRU5ErkJggg==")}</style><style class="darkreader darkreader--user-agent" media=screen>[data-darkreader-inline-bgcolor]{background-color:var(--darkreader-inline-bgcolor)!important}:root{--darkreader-neutral-background: #131516;--darkreader-neutral-text: #d8d4cf;--darkreader-selection-background: #004daa;--darkreader-selection-text: #e8e6e3}html{background-color:#181a1b!important}html,body{background-color:#181a1b}html,body{border-color:#736b5e;color:#e8e6e3}a{color:#3391ff}table{border-color:#545b5e}::placeholder{color:#b2aba1}::-webkit-scrollbar{background-color:#202324;color:#aba499}::-webkit-scrollbar-thumb{background-color:#454a4d}::-webkit-scrollbar-corner{background-color:#181a1b}*{scrollbar-color:#202324 #454a4d}::selection{background-color:#004daa!important;color:#e8e6e3!important}::-moz-selection{background-color:#004daa!important;color:#e8e6e3!important}</style>
<meta http-equiv=X-UA-Compatible content="IE=edge">
<meta name=viewport content="width=device-width,maximum-scale=2">
<style class="darkreader darkreader--sync" media=screen>.highlight{background-color:#f8f8f8}html,body,div,h1,h2,h3,h4,p,pre,a,code,em,ol,ul,li,table,tbody,thead,tr,th,td,footer,header,section{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}footer,header,section{display:block}table{border-collapse:collapse;border-spacing:0}body{box-sizing:border-box;color:#373737;background:#212121;font-size:16px;font-family:'Myriad Pro',Calibri,Helvetica,Arial,sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased}h1,h2,h3,h4{margin:10px 0;font-weight:700;color:#222222;font-family:'Lucida Grande','Calibri',Helvetica,Arial,sans-serif;letter-spacing:-1px}h1{font-size:36px;font-weight:700}h2{padding-bottom:10px;font-size:32px;background:var(--sf-img-0) repeat-x bottom}h3{font-size:24px}h4{font-size:21px}p{margin:10px 0 15px 0}footer p{color:#f2f2f2}a{text-decoration:none;color:#0F79D0;text-shadow:none;transition:text-shadow 0.5s ease;-webkit-transition:color 0.5s ease;-webkit-transition:text-shadow 0.5s ease;-moz-transition:color 0.5s ease;-moz-transition:text-shadow 0.5s ease;-o-transition:color 0.5s ease;-o-transition:text-shadow 0.5s ease;-ms-transition:color 0.5s ease;-ms-transition:text-shadow 0.5s ease}a:hover,a:focus{text-decoration:underline}footer a{color:#F2F2F2;text-decoration:underline}em{font-style:italic}pre,code{color:#222;background-color:#fff;font-family:Monaco,"Bitstream Vera Sans Mono","Lucida Console",Terminal,monospace;font-size:14px;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px}pre{padding:10px;box-shadow:0 0 10px rgba(0,0,0,0.1);overflow:auto}code{padding:3px;margin:0 3px;box-shadow:0 0 10px rgba(0,0,0,0.1)}pre code{display:block;box-shadow:none}ul,ol{margin-bottom:15px}ul{list-style-position:inside;list-style:disc;padding-left:20px}ol{list-style-position:inside;list-style:decimal;padding-left:20px}table{border:1px solid #373737;margin-bottom:20px;text-align:left}th{font-family:'Lucida Grande','Helvetica Neue',Helvetica,Arial,sans-serif;padding:10px;background:#373737;color:#fff}td{padding:10px;border:1px solid #373737}.outer{width:100%}.inner{position:relative;max-width:640px;padding:20px 10px;margin:0 auto}#forkme_banner{display:block;position:absolute;top:0;right:10px;z-index:10;padding:10px 50px 10px 10px;color:#fff;background:var(--sf-img-1) #0090ff no-repeat 95% 50%;font-weight:700;box-shadow:0 0 10px rgba(0,0,0,0.5);border-bottom-left-radius:2px;border-bottom-right-radius:2px}#header_wrap{background:-moz-linear-gradient(top,#373737,#212121);background:-webkit-linear-gradient(top,#373737,#212121);background:-ms-linear-gradient(top,#373737,#212121);background:-o-linear-gradient(top,#373737,#212121);background:linear-gradient(to top,#373737,#212121)}#header_wrap .inner{padding:50px 10px 30px 10px}#project_title{margin:0;color:#fff;font-size:42px;font-weight:700;text-shadow:#111 0px 0px 10px}#project_tagline{color:#fff;font-size:24px;font-weight:300;background:none;text-shadow:#111 0px 0px 10px}#main_content_wrap{background:#f2f2f2;border-top:1px solid #111;border-bottom:1px solid #111}#main_content{padding-top:40px}#footer_wrap{background:#212121}@media screen and (max-width:480px){body{font-size:14px}.inner{min-width:320px;max-width:480px}#project_title{font-size:32px}h1{font-size:28px}h2{font-size:24px}h3{font-size:21px}h4{font-size:18px}code,pre{font-size:11px}}@media screen and (max-width:320px){body{font-size:14px}.inner{min-width:240px;max-width:320px}#project_title{font-size:28px}h1{font-size:24px}h2{font-size:21px}h3{font-size:18px}h4{font-size:16px}code,pre{min-width:240px;max-width:320px;font-size:11px}}.highlight{background-color:rgb(28,30,31)}html,body,div,h1,h2,h3,h4,p,pre,a,code,em,ol,ul,li,tbody,thead,tr,th,footer,header,section{border-color:currentcolor}body{color:rgb(197,192,185);background-color:rgb(25,27,28);background-image:none}h1,h2,h3,h4{color:rgb(211,207,201)}h2{background-color:rgba(0,0,0,0);background-image:var(--sf-img-0)}footer p{color:rgb(224,221,217)}a{text-decoration-color:currentcolor;color:rgb(83,174,243);text-shadow:none}a:hover,a:focus{text-decoration-color:currentcolor}footer a{color:rgb(224,221,217);text-decoration-color:currentcolor}pre,code{color:rgb(211,207,201);background-color:rgb(24,26,27)}pre{box-shadow:rgba(0,0,0,0.1) 0px 0px 10px}code{box-shadow:rgba(0,0,0,0.1) 0px 0px 10px}pre code{box-shadow:none}ul{list-style-image:none}ol{list-style-image:none}table{border-color:rgb(122,113,100)}th{background-color:rgb(41,45,47);background-image:none;color:rgb(232,230,227)}td{border-color:rgb(122,113,100)}#forkme_banner{color:rgb(232,230,227);background-color:rgb(0,115,204);background-image:var(--sf-img-1);box-shadow:rgba(0,0,0,0.5) 0px 0px 10px}#header_wrap{background-color:rgba(0,0,0,0);background-image:linear-gradient(to top,rgb(41,45,47),rgb(25,27,28))}#project_title{color:rgb(232,230,227);text-shadow:rgb(13,14,14) 0px 0px 10px}#project_tagline{color:rgb(232,230,227);background-color:rgba(0,0,0,0);background-image:none;text-shadow:rgb(13,14,14) 0px 0px 10px}#main_content_wrap{background-color:rgb(31,34,35);background-image:none;border-top-color:rgb(134,125,110);border-bottom-color:rgb(134,125,110)}#footer_wrap{background-color:rgb(25,27,28);background-image:none}</style>
<title>forked-daapd | Linux/FreeBSD DAAP (iTunes) and MPD media server with support for AirPlay devices (multiroom), Apple Remote (and compatibles), Chromecast, Spotify and internet radio.</title>
<meta name=generator content="Jekyll v3.9.0">
<meta property=og:title content=forked-daapd>
<meta property=og:locale content=en_US>
<meta name=description content="Linux/FreeBSD DAAP (iTunes) and MPD media server with support for AirPlay devices (multiroom), Apple Remote (and compatibles), Chromecast, Spotify and internet radio.">
<meta property=og:description content="Linux/FreeBSD DAAP (iTunes) and MPD media server with support for AirPlay devices (multiroom), Apple Remote (and compatibles), Chromecast, Spotify and internet radio.">
<link rel=canonical href=http://ejurgensen.github.io/forked-daapd/>
<meta property=og:url content=http://ejurgensen.github.io/forked-daapd/>
<meta property=og:site_name content=forked-daapd>
<script type=application/ld+json>{"headline":"forked-daapd","@type":"WebSite","url":"http://ejurgensen.github.io/forked-daapd/","description":"Linux/FreeBSD DAAP (iTunes) and MPD media server with support for AirPlay devices (multiroom), Apple Remote (and compatibles), Chromecast, Spotify and internet radio.","name":"forked-daapd","@context":"https://schema.org"}</script>
<meta name=darkreader content=84abb1422d90cf2741f226bd10fb1f1e><style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style><link type=image/x-icon rel="shortcut icon" href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><style>.sf-hidden{display:none!important}</style></head>
 <body>
 
 <div id=header_wrap class=outer>
 <header class=inner>
 <a id=forkme_banner href=https://github.com/ejurgensen/forked-daapd>View on GitHub</a>
 <h1 id=project_title>forked-daapd</h1>
 <h2 id=project_tagline>Linux/FreeBSD DAAP (iTunes) and MPD media server with support for AirPlay devices (multiroom), Apple Remote (and compatibles), Chromecast, Spotify and internet radio.</h2>
 
 </header>
 </div>
 
 <div id=main_content_wrap class=outer>
 <section id=main_content class=inner>
 <h1 id=forked-daapd>forked-daapd</h1>
<p>forked-daapd is a Linux/FreeBSD DAAP (iTunes), MPD (Music Player Daemon) and
RSP (Roku) media server.</p>
<p>It supports AirPlay devices/speakers, Apple Remote (and compatibles),
MPD clients, Chromecast, network streaming, internet radio, Spotify and LastFM.</p>
<p>It does not support streaming video by AirPlay nor Chromecast.</p>
<p>DAAP stands for Digital Audio Access Protocol which is the protocol used
by iTunes and friends to share/stream media libraries over the network.</p>
<p>forked-daapd is a complete rewrite of mt-daapd (Firefly Media Server).</p>
<h2 id=looking-for-help>Looking for help?</h2>
<p>Before you continue, make sure you know what version of forked-daapd you have,
and what features it was built with (e.g. Spotify support).</p>
<p>How to find out? Go to the <a href=http://forked-daapd.local:3689/>web interface</a> and
check. No web interface? Then check the top of forked-daapd’s log file (usually
/var/log/forked-daapd.log).</p>
<p>Note that you are viewing a snapshot of the instructions that may or may not
match the version of forked-daapd that you are using. Go to
<a href=#references>references</a> to find instructions for previous versions of
forked-daapd.</p>
<p>If you are looking for help on building forked-daapd (not using it), then
please see the <a href=http://ejurgensen.github.io/forked-daapd/INSTALL.html>INSTALL.md</a> file.</p>
<h2 id=contents>Contents</h2>
<ul>
 <li><a href=#getting-started>Getting started</a></li>
 <li><a href=#supported-clients>Supported clients</a></li>
 <li><a href=#web-interface>Web interface</a></li>
 <li><a href=#using-remote>Using Remote</a></li>
 <li><a href=#airplay-devicesspeakers>AirPlay devices/speakers</a></li>
 <li><a href=#chromecast>Chromecast</a></li>
 <li><a href=#local-audio-through-alsa>Local audio through ALSA</a></li>
 <li><a href=#local-audio-bluetooth-and-more-through-pulseaudio>Local audio, Bluetooth and more through Pulseaudio</a></li>
 <li><a href=#mp3-network-streaming-streaming-to-ios>MP3 network streaming (streaming to iOS)</a></li>
 <li><a href=#remote-access>Remote access</a></li>
 <li><a href=#supported-formats>Supported formats</a></li>
 <li><a href=#playlists-and-internet-radio>Playlists and internet radio</a></li>
 <li><a href=#artwork>Artwork</a></li>
 <li><a href=#library>Library</a></li>
 <li><a href=#command-line>Command line</a></li>
 <li><a href=#spotify>Spotify</a></li>
 <li><a href=#lastfm>LastFM</a></li>
 <li><a href=#mpd-clients>MPD clients</a></li>
 <li><a href=#references>References</a></li>
</ul>
<h2 id=getting-started>Getting started</h2>
<p>After installation (see <a href=http://ejurgensen.github.io/forked-daapd/INSTALL.html>INSTALL.md</a>) do the following:</p>
<ol>
 <li>Edit the configuration file (usually <code class="language-plaintext highlighter-rouge">/etc/forked-daapd.conf</code>) to suit your
needs</li>
 <li>Start or restart the server (usually <code class="language-plaintext highlighter-rouge">/etc/init.d/forked-daapd restart</code>)</li>
 <li>Go to the web interface <a href=http://forked-daapd.local:3689/>http://forked-daapd.local:3689</a>,
or, if that won’t work, to <a href=http://[your_server_address_here]:3689>http://[your_server_address_here]:3689</a></li>
 <li>Wait for the library scan to complete</li>
 <li>If you will be using a remote, e.g. Apple Remote: Start the remote, go to
Settings, Add Library</li>
 <li>Enter the pair code in the web interface (update the page with F5 if it does
not automatically pick up the pairing request)</li>
</ol>
<h2 id=supported-clients>Supported clients</h2>
<p>forked-daapd supports these kinds of clients:</p>
<ul>
 <li>DAAP clients, like iTunes or Rhythmbox</li>
 <li>Remote clients, like Apple Remote or compatibles for Android/Windows Phone</li>
 <li>AirPlay devices, like AirPort Express, Shairport and various AirPlay speakers</li>
 <li>Chromecast devices</li>
 <li>MPD clients, like mpc (see <a href=#mpd-clients>mpd-clients</a>)</li>
 <li>MP3 network stream clients, like VLC and almost any other music player</li>
 <li>RSP clients, like Roku Soundbridge</li>
</ul>
<p>Like iTunes, you can control forked-daapd with Remote and stream your music
to AirPlay devices.</p>
<p>A single forked-daapd instance can handle several clients concurrently,
regardless of the protocol.</p>
<p>By default all clients on 192.168.* (and the ipv6 equivalent) are allowed to
connect without authentication. You can change that in the configuration file.</p>
<p>Here is a list of working and non-working DAAP and Remote clients. The list is
probably obsolete when you read it :-)</p>
<table>
 <thead>
 <tr>
 <th>Client</th>
 <th>Developer</th>
 <th>Type</th>
 <th>Platform</th>
 <th>Working (vers.)</th>
 </tr>
 </thead>
 <tbody>
 <tr>
 <td>iTunes</td>
 <td>Apple</td>
 <td>DAAP</td>
 <td>Win</td>
 <td>Yes (12.10.1)</td>
 </tr>
 <tr>
 <td>Apple Music</td>
 <td>Apple</td>
 <td>DAAP</td>
 <td>MacOS</td>
 <td>Yes</td>
 </tr>
 <tr>
 <td>Rhythmbox</td>
 <td>Gnome</td>
 <td>DAAP</td>
 <td>Linux</td>
 <td>Yes</td>
 </tr>
 <tr>
 <td>Diapente</td>
 <td>diapente</td>
 <td>DAAP</td>
 <td>Android</td>
 <td>Yes</td>
 </tr>
 <tr>
 <td>WinAmp DAAPClient</td>
 <td>WardFamily</td>
 <td>DAAP</td>
 <td>WinAmp</td>
 <td>Yes</td>
 </tr>
 <tr>
 <td>Amarok w/DAAP plugin</td>
 <td>KDE</td>
 <td>DAAP</td>
 <td>Linux/Win</td>
 <td>Yes (2.8.0)</td>
 </tr>
 <tr>
 <td>Banshee</td>
 <td>&nbsp;</td>
 <td>DAAP</td>
 <td>Linux/Win/OSX</td>
 <td>No (2.6.2)</td>
 </tr>
 <tr>
 <td>jtunes4</td>
 <td>&nbsp;</td>
 <td>DAAP</td>
 <td>Java</td>
 <td>No</td>
 </tr>
 <tr>
 <td>Firefly Client</td>
 <td>&nbsp;</td>
 <td>(DAAP)</td>
 <td>Java</td>
 <td>No</td>
 </tr>
 <tr>
 <td>Remote</td>
 <td>Apple</td>
 <td>Remote</td>
 <td>iOS</td>
 <td>Yes (4.3)</td>
 </tr>
 <tr>
 <td>Retune</td>
 <td>SquallyDoc</td>
 <td>Remote</td>
 <td>Android</td>
 <td>Yes (3.5.23)</td>
 </tr>
 <tr>
 <td>TunesRemote+</td>
 <td>Melloware</td>
 <td>Remote</td>
 <td>Android</td>
 <td>Yes (2.5.3)</td>
 </tr>
 <tr>
 <td>Remote for iTunes</td>
 <td>Hyperfine</td>
 <td>Remote</td>
 <td>Android</td>
 <td>Yes</td>
 </tr>
 <tr>
 <td>Remote for Windows Phone</td>
 <td>Komodex</td>
 <td>Remote</td>
 <td>Windows Phone</td>
 <td>Yes (2.2.1.0)</td>
 </tr>
 <tr>
 <td>TunesRemote SE</td>
 <td>&nbsp;</td>
 <td>Remote</td>
 <td>Java</td>
 <td>Yes (r108)</td>
 </tr>
 <tr>
 <td>rtRemote for Windows</td>
 <td>bizmodeller</td>
 <td>Remote</td>
 <td>Windows</td>
 <td>Yes (1.2.0.67)</td>
 </tr>
 </tbody>
</table>
<h2 id=web-interface>Web interface</h2>
<p>You can find forked-daapd’s web interface at <a href=http://forked-daapd.local:3689/>http://forked-daapd.local:3689</a>
or alternatively at <a href=http://[your_server_address_here]:3689>http://[your_server_address_here]:3689</a>.</p>
<p>Use the web interface to control playback, trigger manual library rescans, pair
with remotes, select speakers, authenticate with Spotify, etc.</p>
<p>The Debian forked-daapd package does not include the web interface due to Debian
packaging rules.</p>
<p>You can find some screenshots and build instructions in <a href=https://github.com/ejurgensen/forked-daapd/blob/master/README_PLAYER_WEBINTERFACE.md>README_PLAYER_WEBINTERFACE.md</a>.</p>
<h2 id=using-remote>Using Remote</h2>
<p>Remote gets a list of output devices from the server; this list includes any
and all devices on the network we know of that advertise AirPlay: AirPort
Express, Apple TV, … It also includes the local audio output, that is, the
sound card on the server (even if there is no soundcard).</p>
<p>If no output is selected when playback starts, forked-daapd will try to
autoselect a device.</p>
<p>forked-daapd remembers your selection and the individual volume for each
output device; selected devices will be automatically re-selected, except if
they return online during playback.</p>
<h3 id=pairing>Pairing</h3>
<ol>
 <li>Open the <a href=http://forked-daapd.local:3689/>web interface</a></li>
 <li>Start Remote, go to Settings, Add Library</li>
 <li>Enter the pair code in the web interface (update the page with F5 if it does
not automatically pick up the pairing request)</li>
</ol>
<p>If Remote doesn’t connect to forked-daapd after you entered the pairing code
something went wrong. Check the log file to see the error message. Here are
some common reasons:</p>
<h4 id=you-did-not-enter-the-correct-pairing-code>You did not enter the correct pairing code</h4>
<p>You will see an error in the log about pairing failure with a HTTP response code
that is <em>not</em> 0.
Solution: Try again.</p>
<h4 id=no-response-from-remote-possibly-a-network-issue>No response from Remote, possibly a network issue</h4>
<p>If you see an error in the log with either:</p>
<ul>
 <li>a HTTP response code that is 0</li>
 <li>“Empty pairing request callback”
it means that forked-daapd could not establish a connection to Remote. This 
might be a network issue, your router may not be allowing multicast between the
Remote device and the host forked-daapd is running on.
Solution 1: Sometimes it resolves the issue if you force Remote to quit, restart
it and do the pairing proces again. Another trick is to establish some other
connection (eg SSH) from the iPod/iPhone/iPad to the host.
Solution 2: Check your router settings if you can whitelist multicast addresses
under IGMP settings. For Apple Bonjour, setting a multicast address of
224.0.0.251 and a netmask of 255.255.255.255 should work.</li>
</ul>
<p>Otherwise try using avahi-browse for troubleshooting:</p>
<ul>
 <li>in a terminal, run <code class="language-plaintext highlighter-rouge">avahi-browse -r -k _touch-remote._tcp</code></li>
 <li>start Remote, goto Settings, Add Library</li>
 <li>after a couple seconds at most, you should get something similar to this:</li>
</ul>
<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>+ ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3      _touch-remote._tcp   local
= ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3      _touch-remote._tcp   local
   hostname = [Foobar.local]
   address = [192.168.1.1]
   port = [49160]
   txt = ["DvTy=iPod touch" "RemN=Remote" "txtvers=1" "RemV=10000" "Pair=FAEA410630AEC05E" "DvNm=Foobar"]
</code></pre></div></div>
<p>Hit Ctrl-C to terminate avahi-browse.</p>
<p>To check for network issues you can try to connect to address and port with
telnet.</p>
<h2 id=airplay-devicesspeakers>AirPlay devices/speakers</h2>
<p>forked-daapd will discover the AirPlay devices available on your network. For
devices that are password-protected, the device’s AirPlay name and password
must be given in the configuration file. See the sample configuration file
for the syntax.</p>
<p>If your Apple TV requires device verification (always required by Apple TV4 with
tvOS 10.2) then you can do that through Settings &gt; Remotes &amp; Outputs in the web
interface: Select the device and then enter the PIN that the Apple TV displays.</p>
<p>If your speaker is silent when you start playback, and there is no obvious error
message in the log, you can try disabling ipv6 in the config. Some speakers
announce that they support ipv6, but in fact don’t (at least not with forked-
daapd).</p>
<p>If the speaker becomes unselected when you start playback, and you in the log
see “ANNOUNCE request failed in session startup: 400 Bad Request”, then try
the Apple Home app &gt; Allow Speakers &amp; TV Access &gt; Anyone On the Same Network
(or Everyone).</p>
<h2 id=chromecast>Chromecast</h2>
<p>forked-daapd will discover Chromecast devices available on your network, and you
can then select the device as a speaker. There is no configuration required.</p>
<h2 id=local-audio-through-alsa>Local audio through ALSA</h2>
<p>In the config file, you can select ALSA for local audio. This is the default.</p>
<p>When using ALSA, the server will try to syncronize playback with AirPlay. You
can adjust the syncronization in the config file.</p>
<p>For most setups the default values in the config file should work. If they
don’t, there is help here: <a href=https://github.com/ejurgensen/forked-daapd/blob/master/README_ALSA.md>README_ALSA.md</a></p>
<h2 id=local-audio-bluetooth-and-more-through-pulseaudio>Local audio, Bluetooth and more through Pulseaudio</h2>
<p>In the config file, you can select Pulseaudio for local audio. In addition to
local audio, Pulseaudio also supports an array of other targets, e.g. Bluetooth
or DLNA. However, Pulseaudio does require some setup, so here is a separate page
with some help on that: <a href=https://github.com/ejurgensen/forked-daapd/blob/master/README_PULSE.md>README_PULSE.md</a></p>
<p>Note that if you select Pulseaudio the “card” setting in the config file has
no effect. Instead all soundcards detected by Pulseaudio will be listed as
speakers by forked-daapd.</p>
<p>You can adjust the latency of Pulseaudio playback in the config file.</p>
<h2 id=mp3-network-streaming-streaming-to-ios>MP3 network streaming (streaming to iOS)</h2>
<p>You can listen to audio being played by forked-daapd by opening this network
stream address in pretty much any music player:</p>
<p>http://[your hostname/ip address]:3689/stream.mp3</p>
<p>This is currently the only way of listening to your audio on iOS devices, since
Apple does not allow AirPlay receiver apps, and because Apple Home Sharing
cannot be supported by forked-daapd. So what you can do instead is install a
music player app like VLC, connect to the stream and control playback with
Remote.</p>
<p>Note that MP3 encoding must be supported by ffmpeg/libav for this to work. If
it is not available you will see a message in the log file. In Debian/Ubuntu you
get MP3 encoding support by installing the package “libavcodec-extra”.</p>
<h2 id=remote-access>Remote access</h2>
<p>It is possible to access a shared library over the internet from a DAAP client
like iTunes. You must have remote access to the host machine.</p>
<p>First log in to the host and forward port 3689 to your local machine. You now
need to broadcast the daap service to iTunes on your local machine. On macOS the
command is:</p>
<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>dns-sd -P iTunesServer _daap._tcp local 3689 localhost.local 127.0.0.1 "ffid=12345"
</code></pre></div></div>
<p>The <code class="language-plaintext highlighter-rouge">ffid</code> key is required but its value does not matter.</p>
<p>Your library will now appear as ‘iTunesServer’ in iTunes.</p>
<h2 id=supported-formats>Supported formats</h2>
<p>forked-daapd should support pretty much all audio formats. It relies on libav
(or ffmpeg) to extract metadata and decode the files on the fly when the client
doesn’t support the format.</p>
<p>Formats are attributed a code, so any new format will need to be explicitely
added. Currently supported:</p>
<ul>
 <li>MPEG4: mp4a, mp4v</li>
 <li>AAC: alac</li>
 <li>MP3 (and friends): mpeg</li>
 <li>FLAC: flac</li>
 <li>OGG VORBIS: ogg</li>
 <li>Musepack: mpc</li>
 <li>WMA: wma (WMA Pro), wmal (WMA Lossless), wmav (WMA video)</li>
 <li>AIFF: aif</li>
 <li>WAV: wav</li>
 <li>Monkey’s audio: ape</li>
</ul>
<h2 id=playlists-and-internet-radio>Playlists and internet radio</h2>
<p>forked-daapd supports M3U and PLS playlists. Just drop your playlist somewhere
in your library with an .m3u or .pls extension and it will pick it up.</p>
<p>If the playlist contains an http URL it will be added as an internet radio
station, and the URL will be probed for Shoutcast (ICY) metadata. If the radio
station provides artwork, forked-daapd will download it during playback and send
it to any remotes or AirPlay devices requesting it.</p>
<p>Instead of downloading M3U’s from your radio stations, you can also make an
empty M3U file and in it insert links to the M3U’s of your radio stations.</p>
<p>Radio streams can only be played by forked-daapd, so that means they will not be
available to play in DAAP clients like iTunes.</p>
<p>Support for iTunes Music Library XML format is available as a compile-time
option. By default, metadata from our parsers is preferred over what’s in
the iTunes DB; use itunes_overrides = true if you prefer iTunes’ metadata.</p>
<p>forked-daapd has support for smart playlists. How to create a smart playlist is
documented in
<a href=https://github.com/ejurgensen/forked-daapd/blob/master/README_SMARTPL.md>README_SMARTPL.md</a>.</p>
<p>If you’re not satisfied with internet radio metadata that forked-daapd shows,
then you can read about tweaking it in
<a href=https://github.com/ejurgensen/forked-daapd/blob/master/README_RADIO_STREAMS.md>README_RADIO_STREAMS.md</a>.</p>
<h2 id=artwork>Artwork</h2>
<p>forked-daapd has support for PNG and JPEG artwork which is either:</p>
<ul>
 <li>embedded in the media files</li>
 <li>placed as separate image files in the library</li>
 <li>made available online by the radio station</li>
</ul>
<p>For media in your library, forked-daapd will try to locate album and artist
artwork (group artwork) by the following procedure:</p>
<ul>
 <li>if a file {artwork,cover,Folder}.{png,jpg} is found in one of the directories
containing files that are part of the group, it is used as the artwork. The
first file found is used, ordering is not guaranteed;</li>
 <li>failing that, if [directory name].{png,jpg} is found in one of the
directories containing files that are part of the group, it is used as the
artwork. The first file found is used, ordering is not guaranteed;</li>
 <li>failing that, individual files are examined and the first file found 
with an embedded artwork is used. Here again, ordering is not guaranteed.</li>
</ul>
<p>{artwork,cover,Folder} are the default, you can add other base names in the
configuration file. Here you can also enable/disable support for individual
file artwork (instead of using the same artwork for all tracks in an entire
album).</p>
<p>For playlists in your library, say /foo/bar.m3u, then for any http streams in
the list, forked-daapd will look for /foo/bar.{jpg,png}.</p>
<p>You can use symlinks for the artwork files.</p>
<p>forked-daapd caches artwork in a separate cache file. The default path is 
<code class="language-plaintext highlighter-rouge">/var/cache/forked-daapd/cache.db</code> and can be configured in the configuration 
file. The cache.db file can be deleted without losing the library and pairing 
informations.</p>
<h2 id=library>Library</h2>
<p>The library is scanned in bulk mode at startup, but the server will be available
even while this scan is in progress. You can follow the progress of the scan in
the log file or via the web interface. When the scan is complete you will see
the log message: “Bulk library scan completed in X sec”.</p>
<p>The very first scan will take longer than subsequent startup scans, since every
file gets analyzed. At the following startups the server looks for changed files
and only analyzis those.</p>
<p>Updates to the library are reflected in real time after the initial scan, so you
do not need to manually start rescans. The directories are monitored for changes
and rescanned on the fly. Note that if you have your library on a network mount
then real time updating may not work. Read below about what to do in that case.</p>
<p>If you change any of the directory settings in the library section of the
configuration file a rescan is required before the new setting will take effect.
You can do this by using “Update library” from the web interface.</p>
<p>Symlinks are supported and dereferenced, but it is best to use them for
directories only.</p>
<h3 id=pipes-for-eg-multiroom-with-shairport-sync>Pipes (for e.g. multiroom with Shairport-sync)</h3>
<p>Some programs, like for instance Shairport-sync, can be configured to output
audio to a named pipe. If this pipe is placed in the library, forked-daapd will
automatically detect that it is there, and when there is audio being written to
it, playback of the audio will be autostarted (and stopped).</p>
<p>Using this feature, forked-daapd can act as an AirPlay multiroom “router”: You
can have an AirPlay source (e.g. your iPhone) send audio Shairport-sync, which
forwards it to forked-daapd through the pipe, which then plays it on whatever
speakers you have selected (through Remote).</p>
<p>The format of the audio being written to the pipe must be PCM16.</p>
<p>You can also start playback of pipes manually. You will find them in remotes 
listed under “Unknown artist” and “Unknown album”. The track title will be the
name of the pipe.</p>
<p>Shairport-sync can write metadata to a pipe, and forked-daapd can read this.
This requires that the metadata pipe has the same filename as the audio pipe
plus a “.metadata” suffix. Say Shairport-sync is configured to write audio to
“/foo/bar/pipe”, then the metadata pipe should be “/foo/bar/pipe.metadata”.</p>
<h3 id=libraries-on-network-mounts>Libraries on network mounts</h3>
<p>Most network filesharing protocols do not offer notifications when the library
is changed. So that means forked-daapd cannot update its database in real time.
Instead you can schedule a cron job to update the database.</p>
<p>The first step in doing this is to add two entries to the ‘directories’
configuration item in forked-daapd.conf:</p>
<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>  directories = { "/some/local/dir", "/your/network/mount/library" }
</code></pre></div></div>
<p>Now you can make a cron job that runs this command:</p>
<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>  touch /some/local/dir/trigger.init-rescan
</code></pre></div></div>
<p>When forked-daapd detects a file with filename ending .init-rescan it will
perform a bulk scan similar to the startup scan.</p>
<p>Alternatively, you can force a metadata scan of the library even if the
files have not changed by creating a filename ending <code class="language-plaintext highlighter-rouge">.meta-rescan</code>.</p>
<h3 id=troubleshooting-library-issues>Troubleshooting library issues</h3>
<p>If you place a file with the filename ending .full-rescan in your library,
you can trigger a full rescan of your library. This will clear all music and
playlists from forked-daapd’s database and initiate a fresh bulk scan. Pairing
and speaker information will be kept. Only use this for troubleshooting, it is
not necessary during normal operation.</p>
<h2 id=command-line>Command line</h2>
<p>You can choose between:</p>
<ul>
 <li>a <a href=#mpd-clients>MPD command line client</a> (easiest) like <code class="language-plaintext highlighter-rouge">mpc</code></li>
 <li>curl with forked-daapd’s JSON API (see <a href=https://github.com/ejurgensen/forked-daapd/blob/master/README_JSON_API.md>README_JSON_API.md</a>)</li>
 <li>curl with DAAP/DACP commands (hardest)</li>
</ul>
<p>Here is an example of how to use curl with DAAP/DACP. Say you have a playlist
with a radio station, and you want to make a script that starts playback of that
station:</p>
<ol>
 <li>Run <code class="language-plaintext highlighter-rouge">sqlite3 [your forked-daapd db]</code>. Use <code class="language-plaintext highlighter-rouge">select id,title from files</code> to get
the id of the radio station, and use <code class="language-plaintext highlighter-rouge">select id,title from playlists</code> to get
the id of the playlist.</li>
 <li>Convert the two ids to hex.</li>
 <li>Put the following lines in the script with the relevant ids inserted (also
observe that you must use a session-id &lt; 100, and that you must login and
logout):</li>
</ol>
<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>curl "http://localhost:3689/login?pairing-guid=0x1&amp;request-session-id=50"
curl "http://localhost:3689/ctrl-int/1/playspec?database-spec='dmap.persistentid:0x1'&amp;container-spec='dmap.persistentid:0x[PLAYLIST-ID]'&amp;container-item-spec='dmap.containeritemid:0x[FILE ID]'&amp;session-id=50"
curl "http://localhost:3689/logout?session-id=50"
</code></pre></div></div>
<h2 id=spotify>Spotify</h2>
<p>forked-daapd has support for playback of the tracks in your Spotify library.</p>
<ol>
 <li>Go to the <a href=http://forked-daapd.local:3689/>web interface</a> and check that your
version of forked-daapd was built with Spotify support.</li>
 <li>You must have a Spotify premium account. If you normally log into Spotify
with your Facebook account you must first go to Spotify’s web site where you
can get the Spotify username and password that matches your account.</li>
 <li>Make sure you have <code class="language-plaintext highlighter-rouge">libspotify</code> installed. Unfortunately, it is no longer
available from Spotify, and at the time of writing this they have not
provided an alternative. However, on most Debian-based platforms, you can
still get it like this:
 <ul>
 <li>Add the mopidy repository, see <a href=https://apt.mopidy.com/>instructions</a></li>
 <li>Install with <code class="language-plaintext highlighter-rouge">apt install libspotify-dev</code></li>
 </ul>
 </li>
</ol>
<p>Once the above is in order you can login to Spotify via the web interface. The
procedure for logging in to Spotify is a two-step procedure due to the current
state of libspotify, but the web interface makes both steps available to you.</p>
<p>Spotify no longer automatically notifies clients about playlist updates, so you
have to trigger updates manually. You can for instance set up a cron job that
runs <code class="language-plaintext highlighter-rouge">/usr/bin/curl http://localhost:3689/api/update</code></p>
<p>forked-daapd will not store your password, but will still be able to log you in
automatically afterwards, because libspotify saves a login token. You can
configure the location of your Spotify user data in the configuration file.</p>
<p>To permanently logout and remove Spotify tracks + credentials make a request to
<a href=http://[your_server_address_here]:3689/api/spotify-logout>http://[your_server_address_here]:3689/api/spotify-logout</a>
and also delete the contents of <code class="language-plaintext highlighter-rouge">/var/cache/forked-daapd/libspotify</code>.</p>
<p>Limitations:
You will not be able to do any playlist management through forked-daapd - use
a Spotify client for that. You also can only listen to your music by letting
forked-daapd do the playback - so that means you can’t stream from forked-daapd
to DAAP clients (e.g. iTunes) and RSP clients.</p>
<p>Alternatives:
If you want forked-daapd to be a selectable metaspeaker in Spotify’s client, you
can use <a href=https://github.com/librespot-org/librespot>librespot</a> to write audio
to a pipe in your library. There will be some lag with volume adjustments, and
getting metadata to work also requires extra tinkering.</p>
<h2 id=lastfm>LastFM</h2>
<p>You can have forked-daapd scrobble the music you listen to. To set up scrobbling
go to the web interface and authorize forked-daapd with your LastFM credentials.</p>
<p>forked-daapd will not store your LastFM username/password, only the session key.
The session key does not expire.</p>
<h2 id=mpd-clients>MPD clients</h2>
<p>You can - to some extent - use clients for MPD to control forked-daapd.</p>
<p>By default forked-daapd listens on port 6600 for MPD clients. You can change
this in the configuration file.</p>
<p>Currently only a subset of the commands offered by MPD (see <a href=http://www.musicpd.org/doc/protocol/>MPD protocol documentation</a>) 
are supported by forked-daapd.</p>
<p>Due to some differences between forked-daapd and MPD not all commands will act
the same way they would running MPD:</p>
<ul>
 <li>crossfade, mixrampdb, mixrampdelay and replaygain will have no effect</li>
 <li>single, repeat: unlike MPD forked-daapd does not support setting single and repeat separately 
on/off, instead repeat off, repeat all and repeat single are supported. Thus setting single on 
will result in repeat single, repeat on results in repeat all.</li>
</ul>
<p>The following table shows what is working for a selection of MPD clients:</p>
<table>
 <thead>
 <tr>
 <th>Client</th>
 <th>Type</th>
 <th>Status</th>
 </tr>
 </thead>
 <tbody>
 <tr>
 <td><a href=http://www.musicpd.org/clients/mpc/>mpc</a></td>
 <td>CLI</td>
 <td>Working commands: mpc, add, crop, current, del (ranges are not yet supported), play, next, prev (behaves like cdprev), pause, toggle, cdprev, seek, clear, outputs, enable, disable, playlist, ls, load, volume, repeat, random, single, search, find, list, update (initiates an init-rescan, the path argument is not supported)</td>
 </tr>
 <tr>
 <td><a href=http://www.ympd.org/>ympd</a></td>
 <td>Web</td>
 <td>Everything except “add stream” should work</td>
 </tr>
 </tbody>
</table>
<h2 id=references>References</h2>
<p>The source for this version of forked-daapd can be found here:</p>
<p><a href=https://github.com/ejurgensen/forked-daapd.git>https://github.com/ejurgensen/forked-daapd.git</a></p>
<p>README’s for previous versions of forked-daapd:</p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/27.2/README.md>forked-daapd version 27.2</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/27.1/README.md>forked-daapd version 27.1</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/27.0/README.md>forked-daapd version 27.0</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/26.5/README.md>forked-daapd version 26.5</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/26.4/README.md>forked-daapd version 26.4</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/26.3/README.md>forked-daapd version 26.3</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/26.2/README.md>forked-daapd version 26.2</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/26.1/README.md>forked-daapd version 26.1</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/26.0/README.md>forked-daapd version 26.0</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/25.0/README.md>forked-daapd version 25.0</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/24.2/README.md>forked-daapd version 24.2</a></p>
<p><a href=https://github.com/ejurgensen/forked-daapd/blob/24.1/README.md>forked-daapd version 24.1</a></p>
 </section>
 </div>
 
 <div id=footer_wrap class=outer>
 <footer class=inner>
 
 <p class=copyright>forked-daapd maintained by <a href=https://github.com/ejurgensen>ejurgensen</a></p>
 
 <p>Published with <a href=https://pages.github.com/>GitHub Pages</a></p>
 </footer>
 </div>
 
 
<div id=SL_balloon_obj alt=0 style=display:block><div id=SL_button class=SL_ImTranslatorLogo style='background:rgba(0,0,0,0) url("moz-extension://93e8d0aa-d393-404e-87ca-15d425992786/content/img/util/imtranslator-s.png") repeat scroll 0% 0%;display:none;--darkreader-inline-bgcolor:rgba(0, 0, 0, 0)' data-darkreader-inline-bgcolor></div><div id=SL_shadow_translation_result2 style=display:none></div><div id=SL_shadow_translator class=sf-hidden></div></div>