<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html style><!--
 Page saved with SingleFile 
 url: https://zsh.sourceforge.io/Doc/Release/Completion-System.html 
 saved date: Wed Jun 28 2023 13:11:36 GMT-0700 (Pacific Daylight Time)
--><!-- Created on May 14, 2022 by texi2html 5.0
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
--><meta charset=utf-8><style class="darkreader darkreader--user-agent" media=screen>.jfk-bubble.gtx-bubble,.captcheck_answer_label>input+img,span#closed_text>img[src^="https://www.gstatic.com/images/branding/googlelogo"],span[data-href^="https://www.hcaptcha.com/"]>#icon,#bit-notification-bar-iframe,::-webkit-calendar-picker-indicator{filter:invert(100%) hue-rotate(180deg) contrast(90%) sepia(5%)!important}[data-darkreader-inline-bgcolor]{background-color:var(--darkreader-inline-bgcolor)!important}:root{--darkreader-neutral-background:#131516;--darkreader-neutral-text:#dcd6cf;--darkreader-selection-background:#054da5;--darkreader-selection-text:#ece8e2}html{background-color:#191a1b!important}html{color-scheme:dark!important}html,body{background-color:#191a1b}html,body{border-color:#756c5e;color:#ece8e2}a{color:#3992f8}::placeholder{color:#b5ada1}::-webkit-scrollbar{background-color:#212324;color:#aea699}::-webkit-scrollbar-thumb{background-color:#464b4d}::-webkit-scrollbar-corner{background-color:#191a1b}*{scrollbar-color:#464b4d #212324}::selection{background-color:#054da5!important;color:#ece8e2!important}::-moz-selection{background-color:#054da5!important;color:#ece8e2!important}</style>
<title>zsh: 20 Completion System</title>
<meta name=description content="zsh: 20 Completion System">
<meta name=keywords content="zsh: 20 Completion System">
<meta name=resource-type content=document>
<meta name=distribution content=global>
<meta name=Generator content="texi2html 5.0">
<style><!--div.example{margin-left:3.2em}--></style><meta name=darkreader content=ca178546e82d4599a0fc073e3948ca8f><style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style>
<link type=image/x-icon rel="shortcut icon" href=data:image/vnd.microsoft.icon;base64,AAABAAEAQEAAAAEACAAoFgAAFgAAACgAAABAAAAAgAAAAAEACAAAAAAAABAAAAAAAAAAAAAAAAEAAAABAAAkWvEAJVvxACZb8QAnXPEAJ13xAChd8QApXvEAKl/xACtf8QAsYPEALWDyAC1h8gAuYvIAL2LyADBj8gAxZPIAMmTyADNl8gAzZvIANGbyADVn8gA2aPIAN2jyADlq8gA7a/IAPGzzAD5t8wA/bvMAP2/zAEBv8wBBcPMAQnHzAENx8wBEcvMARXPzAEZ08wBHdfMASHXzAEl28wBKdvMAS3fzAEx49ABPevQAUXz0AFJ89ABTfvQAVH70AFaA9ABXgPQAWoP0AFuD9QBchPUAXoX1AF+H9QBgh/UAYYj1AGKJ9QBjifUAZIr1AGSL9QBojfUAao/1AGyQ9gBtkfYAbpL2AHCT9gBxlPYAc5b2AHSW9gB1l/YAdpf2AHaY9gB5mvYAfJz3AICf9wCCofcAg6L3AIek9wCIpvcAiab3AIqn+ACNqfgAjqr4AI+r+ACRrPgAlK74AJaw+ACXsfgAmbL4AJqz+QCbs/kAm7T5AJ21+QChuPkApbv5AKa8+QCnvPkAp735AKm++gCqv/oAq8D6AK3B+gCtwvoArsL6ALDD+gCzxfoAs8b6ALTH+gC1x/oAtsj6ALfJ+gC5y/sAusv7ALzN+wC9zfsAvs77AL/P+wDA0PsAwdD7AMLR+wDE0vsAxdT7AMbU+wDH1fsAydb8AMvY/ADO2vwAz9v8ANDb/ADR3PwA0d38ANPe/ADU3/wA1d/8ANbg/ADY4v0A2eP9ANrj/QDb5P0A3OT9AN3l/QDe5v0A3+f9AOHo/QDi6f0A4+r9AOTq/QDk6/0A5ez9AObs/QDn7f0A6e7+AOrv/gDs8f4A7fH+AO7y/gDw8/4A8PT+APH1/gDy9f4A8/b+APT3/gD19/4A9vj+APb5/gD3+f8A+Pr/APn6/wD6+/8A+/z/APz9/wD9/v8A/v7/AP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tnZ2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2thQ0Nd62tra2tra2tra2tra2tra2nhXR8lq2tra2tra2tra2tra2trZ1vbm5ubm5ubm5ubm5ubm5ubm5ubnSkrV0AAA6Hra2tra2tra2tra2trZZIDwAAAAApZa2tra2tra2tra2tra0sAAAAAAAAAAAAAAAAAAAAAAAAAAAAN62bGwAAHZutra2tra2tra2trWoNAAAAAAAAAAAxm62tra2tra2tra2tEwAAAAAAAAAAAAAAAAAAAAAAAAAAACKtrYcOAAAwp62tra2tra2trWoAAAAAAAAAAAAAACiira2tra2tra2trXpBPj4+Pj4+Pj4+Pj4+Pj4+Pj4+PkJ+ra2tdwMAAEWtra2tra2trZMNAAAAAAAAAAAAAAAASK2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra1ZAAAAV62tra2tra1FAAAAAANCYVciAAAAAAOOra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trUkAAABsra2tra2nDQAAAAN3ra2tpzcAAAAAVK2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2pMwAADYKtra2tfgAAAABHra2tra2WAAAAADOtra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trZwiAAAYlq2trW8AAAAAZK2tra2trSIAAAAjra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tjg8AACmkra13AAAAAFytra2tra0WAAAAKa2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra14AwAAPK2tjgAAAAApqa2tra1vAAAAAD6tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trWIAAABRra0iAAAAADybra10DwAAAABlra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tSgAAAGitXgAAAAAABSgYAAAAAAAYpK2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra06AAAFfqksAAAAAAAAAAAAAAAAbq2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tnSgAABOQmCIAAAAAAAAAAAAAV62tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2QFgAAKJ2dQQAAAAAAAAAYbq2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trX0FAAA3ra2GTjAeKDxipK2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tZQAAAE2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra1OAAAAYa2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tk1QsGBMpTIWtrTwAAAV6ra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tVAUAAAAAAAAARaKkLAAAD46tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tPgAAAAAAAAAAAAApnZgYAAAina2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tUQAAAAAAAAAAAAAAADqtgg0AADGnra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tkAUAAAAAACkwBQAAAAAAdK1uAAAASK2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trVAAAAAAI4qtrZs3AAAAADOtrVQAAABdra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra0pAAAAA46tra2tpBgAAAAFpK2tQgAAA3Stra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tDgAAADCtra2tra1MAAAAAI6tracuAAANh62tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trQUAAAA2ra2tra2tUQAAAACHra2tmBsAABubra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra0dAAAAD6Ktra2trSwAAAAAna2tra2GDQAAMKetra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tRwAAAABBqa2trVcAAAAAKK2tra2trXQDAABFra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trXoAAAAAACJRVTAAAAAAAFutra2tra2tWQAAAFmtra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tOgAAAAAAAAAAAAAAAB2kra2tra2tra1JAAAAbK2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trZseAAAAAAAAAAAAAA2Gra2tra2tra2tqTMAAA2Cra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tmC4AAAAAAAAAABuFra2tra2tra2tra2bHgAAG5utra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tZSwAAAAAIlekra2tra2tra2tra2trY4PAABhra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tm4aAmK2tra2tra2tra2tra2tra2teA0Wjq2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2nqa2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA><link rel=canonical href=https://zsh.sourceforge.io/Doc/Release/Completion-System.html><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
<body style=--darkreader-inline-bgcolor:#191a1b data-darkreader-inline-bgcolor vlink=#800080 text=#000000 link=#0000FF lang=en bgcolor=#FFFFFF alink=#FF0000>
<a name=Completion-System style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<a name=Completion-System-1 style=display:none!important></a>
<h1 class=chapter style=display:none!important>20 Completion System</h1>
<a name=index-completion-system style=display:none!important></a>
<a name=index-completion_002c-programmable-1 style=display:none!important></a>
<a name=index-completion_002c-controlling-1 style=display:none!important></a>
<hr style=display:none!important>
<a name=Description-2 style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h2 class=section style=display:none!important>20.1 Description</h2>
<p style=display:none!important>This describes the shell code for the ‘new’ completion system, referred
to as . It is written in shell functions based on the
features described in
the previous chapter, .
</p>
<p style=display:none!important>The features are contextual, sensitive to the point at which completion is
started. Many completions are already provided.
For this reason, a user can perform a great many tasks without
knowing any details beyond how to initialize the system, which is
described
in .
</p>
<p style=display:none!important>The context that decides what completion is to be performed may be
<ul style=display:none!important>
</ul>
<p style=display:none!important>A full context specification contains other elements, as we shall describe.
</p>
<p style=display:none!important>Besides commands names and contexts, the system employs two more
concepts, and . These provide ways for the user
to configure the system’s behaviour.
</p>
<p style=display:none!important>Tags play a dual role. They serve as a classification system for
the matches, typically indicating a class of object that the user
may need to distinguish. For example, when completing arguments of the
 command the user may prefer to try before ,
so both of these are tags. They also appear as the rightmost
element in a context specification.
</p>
<p style=display:none!important>Styles modify various operations of the completion system, such as
output formatting, but also what kinds of completers are used (and in
what order), or which tags are examined. Styles may accept arguments
and are manipulated using the command described in
.
</p>
<p style=display:none!important>In summary, tags describe the completion objects are, and style
 they are to be completed. At various points of execution, the
completion system checks what styles and/or tags are defined for the
current context, and uses that to modify its behavior. The full
description of context handling, which determines how tags and other
elements of the context influence the behaviour of styles, is described
in .
</p>
<p style=display:none!important>When a completion is requested, a dispatcher function is called;
see the description of in the list of control functions
below. This dispatcher decides which function should
be called to produce the completions, and calls it. The result is
passed to one or more , functions that implement
individual completion strategies: simple completion, error correction,
completion with error correction, menu selection, etc.
</p>
<p style=display:none!important>More generally, the shell functions contained in the completion system are
of two types:
<ul style=display:none!important>
</ul>
<table class=menu style=display:none!important cellspacing=0 border=0>
</table>
<hr style=display:none!important>
<a name=Initialization style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<a name=Initialization-1 style=display:none!important></a>
<h2 class=section style=display:none!important>20.2 Initialization</h2>
<a name=index-compinstall style=display:none!important></a>
<a name=index-completion-system_002c-installing style=display:none!important></a>
<p style=display:none!important>If the system was installed completely, it should be enough to
call the shell function from your initialization file; see the
next section. However, the function can be run by a user
to configure various aspects of the completion system.
</p>
<p style=display:none!important>Usually, will insert code into , although if
that is not writable it will save it in another file and tell you that
file’s location. Note that it is up to you to make sure that the lines
added to are actually run; you may, for example, need to move
them to an earlier place in the file if usually returns early.
So long as you keep them all together (including the comment lines at the
start and finish), you can rerun and it will correctly
locate and modify these lines. Note, however, that any code you add to
this section by hand is likely to be lost if you rerun ,
although lines using the command ‘’ should be gracefully handled.
</p>
<p style=display:none!important>The new code will take effect next time you start the shell, or run
 by hand; there is also an option to make them take effect
immediately. However, if has removed definitions, you will
need to restart the shell to see the changes.
</p>
<p style=display:none!important>To run you will need to make sure it is in a directory
mentioned in your parameter, which should already be the case if
zsh was properly configured as long as your startup files do not remove the
appropriate directories from . Then it must be autoloaded
(‘’ is recommended). You can abort the
installation any time you are being prompted for information, and your
 will not be altered at all; changes only take place right at the
end, where you are specifically asked for confirmation.
</p>
<hr style=display:none!important>
<a name=Use-of-compinit style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h3 class=subsection style=display:none!important>20.2.1 Use of compinit</h3>
<a name=index-compinit style=display:none!important></a>
<a name=index-completion-system_002c-initializing style=display:none!important></a>
<p style=display:none!important>This section describes the use of to initialize completion for
the current session when called directly; if you have run
 it will be called automatically from your .
</p>
<p style=display:none!important>To initialize the system, the function should be in a
directory mentioned in the parameter, and should be autoloaded
(‘’ is recommended), and then run simply as
‘’. This will define a
few utility functions, arrange for all the necessary shell functions to be
autoloaded, and will then re-define all widgets that do completion to use the
new system. If you use the widget, which is part of the
 module, you should make sure that that module is loaded
before the call to so that that widget is also
re-defined. If completion styles (see below) are set up to perform
expansion as well as completion by default, and the TAB key is bound to
, will rebind it to ;
this is necessary to use the correct form of expansion.
</p>
<p style=display:none!important>Should you need to use the original completion commands, you can still
bind keys to the old widgets by putting a ‘’ in front of the
widget name, e.g. ‘’.
</p>
<p style=display:none!important>To speed up the running of , it can be made to produce a dumped
configuration that will be read in on future invocations; this is the
default, but can be turned off by calling with the
option . The dumped file is in the same
directory as the startup files (i.e. or );
alternatively, an explicit file name can be given by ‘
’. The next invocation of will read the dumped
file instead of performing a full initialization.
</p>
<p style=display:none!important>If the number of completion files changes, will recognise this
and produce a new dump file. However, if the name of a function or the
arguments in the first line of a function (as described below)
change, it is easiest to delete the dump file by hand so that
 will re-create it the next time it is run. The check
performed to see if there are new functions can be omitted by giving
the option . In this case the dump file will only be created if
there isn’t one already.
</p>
<p style=display:none!important>The dumping is actually done by another function, , but you
will only need to run this yourself if you change the configuration
(e.g. using ) and then want to dump the new one. The name of
the old dumped file will be remembered for this purpose.
</p>
<p style=display:none!important>If the parameter is set, uses it as a directory
where completion functions can be found; this is only necessary if they are
not already in the function search path.
</p>
<p style=display:none!important>For security reasons also checks if the completion system
would use files not owned by root or by the current user, or files in
directories that are world- or group-writable or that are not owned by 
root or by the current user. If such files or directories are found,
 will ask if the completion system should really be used. To
avoid these tests and make all files found be used without asking, use the
option , and to make silently ignore all insecure files
and directories use the option . This security check is skipped
entirely when the option is given, provided the dumpfile exists.
</p>
<a name=index-compaudit style=display:none!important></a>
<p style=display:none!important>The security check can be retried at any time by running the function
. This is the same check used by , but when it
is executed directly any changes to are made local to the
function so they do not persist. The directories to be checked may be
passed as arguments; if none are given, uses and
 to find completion system directories, adding missing ones
to as necessary. To force a check of exactly the directories
currently named in , set to an empty string before
calling or .
</p>
<a name=index-bashcompinit style=display:none!important></a>
<p style=display:none!important>The function provides compatibility with bash’s programmable
completion system. When run it will define the functions, and
 which correspond to the bash builtins with the same names.
It will then be possible to use completion specifications and functions
written for bash.
</p>
<hr style=display:none!important>
<a name=Autoloaded-files style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h3 class=subsection style=display:none!important>20.2.2 Autoloaded files</h3>
<a name=index-completion-system_002c-autoloaded-functions style=display:none!important></a>
<p style=display:none!important>The convention for autoloaded functions used in completion is that they
start with an underscore; as already mentioned, the 
parameter must contain the directory in which they are stored. If 
was properly installed on your system, then automatically
contains the required directories for the standard functions.
</p>
<p style=display:none!important>For incomplete installations, if does not find enough files
beginning with an underscore (fewer than twenty) in the search path, it
will try to find more by adding the directory to the search
path. If that directory has a subdirectory named , all
subdirectories will be added to the path. Furthermore, if the subdirectory
 has a subdirectory named , will add all
subdirectories of the subdirectories to the path: this allows
the functions to be in the same format as in the source
distribution.
</p>
<a name=index-compdef_002c-use-of-by-compinit style=display:none!important></a>
<p style=display:none!important>When is run, it searches all such files accessible via
 and reads the first line of each of them. This line should
contain one of the tags described below. Files whose first line does not
start with one of these tags are not considered to be part of the
completion system and will not be treated specially.
</p>
<p style=display:none!important>The tags are:
</p>
<dl compact style=display:none!important>
</dl>
<p style=display:none!important>The is part of the tag name and no white space is allowed after it.
The tags use the function described below; the
main difference is that the name of the function is supplied implicitly.
</p>
<p style=display:none!important>The special contexts for which completion functions can be defined are:
</p>
<dl compact style=display:none!important>
</dl>
<p style=display:none!important>Default implementations are supplied for each of these
contexts. In most cases the context is
implemented by a corresponding function , for example
the context ‘’ and the function ‘’).
</p>
<p style=display:none!important>The contexts and allow extra context-specific
information. (Internally, this is handled by the functions for each
context calling the function .) The extra
information is added separated by commas.
</p>
<p style=display:none!important>For the context, the extra information is in the form
‘’, where is the
redirection operator and is the name of the command on
the line. If there is no command on the line yet, the 
field will be empty.
</p>
<p style=display:none!important>For the context, the form is
‘’, where is the name of
the parameter on the left hand side of the assignment.
In the case of elements of an associative array, for
example ‘’, is expanded to
‘’. In certain special contexts, such as
completing after ‘’, the part gives the
name of the command, here ; otherwise it is empty.
</p>
<p style=display:none!important>It is not necessary to define fully specific completions as the
functions provided will try to generate completions by progressively
replacing the elements with ‘’. For example, when
completing after ‘’, will try the names
‘’ (note the empty part),
‘’ and‘’, in
that order, until it finds a function to handle the context.
</p>
<p style=display:none!important>As an example:
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>completes files matching ‘’ after ‘’ for any
command with no more specific handler defined.
</p>
<p style=display:none!important>Also:
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>specifies that provides completions for the values of
parameters for which no special function has been defined. This is
usually handled by the function itself.
</p>
<p style=display:none!important>The same lookup rules are used when looking up styles (as described
below); for example
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>is another way to make completion after ‘’ complete files
matching ‘’.
</p>
<hr style=display:none!important>
<a name=Functions-3 style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h3 class=subsection style=display:none!important>20.2.3 Functions</h3>
<p style=display:none!important>The following function is defined by and may be called
directly.
</p>
<a name=index-compdef style=display:none!important></a>
<a name=index-completion-system_002c-adding-definitions style=display:none!important></a>
<dl compact style=display:none!important>
</dl>
<p style=display:none!important>The function can be used to associate existing completion
functions with new commands. For example,
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>uses the function to complete process IDs for the command .
</p>
<p style=display:none!important>Note also the function described below, which can be
used to complete options for commands that understand the
‘’ option.
</p>
<hr style=display:none!important>
<a name=Completion-System-Configuration style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<a name=Completion-System-Configuration-1 style=display:none!important></a>
<h2 class=section style=display:none!important>20.3 Completion System Configuration</h2>
<a name=index-completion-system_002c-configuration style=display:none!important></a>
<p style=display:none!important>This section gives a short overview of how the completion system works,
and then more detail on how users can configure how and when matches are
generated.
</p>
<hr style=display:none!important>
<a name=Overview-2 style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h3 class=subsection style=display:none!important>20.3.1 Overview</h3>
<p style=display:none!important>When completion is attempted somewhere on the command line the
completion system begins building the context. The context represents
everything that the shell knows about the meaning of the command line
and the significance of the cursor position. This takes account of a
number of things including the command word (such as ‘’ or
‘’) and options to which the current word may be an argument
(such as the ‘’ option to which takes a shell option as an
argument).
</p>
<p style=display:none!important>The context starts out very generic ("we are beginning a completion")
and becomes more specific as more is learned ("the current word is in a
position that is usually a command name" or "the current word might be a
variable name" and so on). Therefore the context will vary during the
same call to the completion system.
</p>
<p style=display:none!important>This context information is condensed into a string consisting of multiple
fields separated by colons, referred to simply as ‘the context’ in the
remainder of the documentation. Note that a user of the completion system
rarely needs to compose a context string, unless for example a new
function is being written to perform completion for a new command. What a
user may need to do is compose a pattern, which is matched
against a context when needed to look up context-sensitive options that
configure the completion system.
</p>
<p style=display:none!important>The next few paragraphs explain how a context is composed within the
completion function suite. Following that is discussion of how 
are defined. Styles determine such things as how the matches are
generated, similarly to shell options but with much more control. They
are defined with the builtin command ().
</p>
<p style=display:none!important>The context string always consists of a fixed set of fields, separated
by colons and with a leading colon before the first. Fields which are
not yet known are left empty, but the surrounding colons appear anyway.
The fields are always in the order
. These have the following meaning:
</p>
<ul style=display:none!important>
</ul>
<p style=display:none!important>The context is gradually put together as the functions are executed, starting
with the main entry point, which adds and the 
element if necessary. The completer then adds the element.
The contextual completion adds the and options.
Finally, the is added when the types of completion are known.
For example, the context name
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>says that normal completion was attempted as the first argument to the
option of the command :
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>and the completion function will generate filenames.
</p>
<p style=display:none!important>Usually completion will be tried for all possible tags in an order given
by the completion function. However, this can be altered by using the
 style. Completion is then restricted to the list of given
tags in the given order.
</p>
<p style=display:none!important>The bindable command shows all the contexts and tags
available for completion at a particular point. This provides an easy
way of finding information for and other styles. It is
described in
.
</p>
<p style=display:none!important>When looking up styles the completion system uses full context names,
including the tag. Looking up the value of a style therefore consists of
two things: the context, which is matched to the most specific (best
fitting) pattern, and the name of the style itself, which must be
matched exactly. The following examples demonstrate that patterns
may be loosely defined for styles that apply broadly, or as tightly
defined as desired for styles that apply in narrower circumstances.
</p>
<p style=display:none!important>For example, many completion functions can generate matches in a
simple and a verbose form and use the style to decide
which form should be used. To make all such functions use the verbose form,
put
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>in a startup file (probably ).
This gives the style the value in every
context inside the completion system, unless that context has a more
specific definition. It is best to avoid giving the pattern as ‘’
in case the style has some meaning outside the completion system.
</p>
<p style=display:none!important>Many such general purpose styles can be configured simply by using the
 function.
</p>
<p style=display:none!important>A more specific example of the use of the style is by the
completion for the builtin. If the style is set, the builtin
lists full job texts and process command lines; otherwise it shows the
bare job numbers and PIDs. To turn the style off for this use only:
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>For even more control, the style can use one of the tags ‘’ or
‘’. To turn off verbose display only for jobs:
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>The option to even allows completion function code to
appear as the argument to a style; this requires some understanding of
the internals of completion functions (see
)). For example,
</p>
<div class=example style=display:none!important>
</div>
<p style=display:none!important>This forces the value of the style to be read from the
variable each time a host name is needed; this is useful
if the value of can change dynamically.
For another useful example, see the example in the description of the
 style below. This form can be
slow and should be avoided for commonly examined styles such
as and .
</p>
<p style=display:none!important>Note that the order in which styles are does not matter; the
style mechanism uses the most specific possible match for a particular
style to determine the set of values. Strings are
preferred over patterns (for example, ‘’ is
more specific than ‘), and longer patterns are
preferred over the pattern ‘’. See 
for details.
</p>
<p style=display:none!important>Context patterns that use something other than a wildcard () to match the
middle parts of the context — the , , and
 in
— should include all six colons () explicitly. Without this,
a pattern such as could match against a
component other than the intended one (for example, against when
a match against was intended).
</p>
<p style=display:none!important>Style names like those of tags are arbitrary and depend on the completion
function. However, the following two sections list some of the most
common tags and styles.
</p>
<hr style=display:none!important>
<a name=Standard-Tags style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h3 class=subsection style=display:none!important>20.3.2 Standard Tags</h3>
<a name=index-completion-system_002c-tags style=display:none!important></a>
<p style=display:none!important>Some of the following are only used when looking up particular styles
and do not refer to a type of match.
</p>
<dl compact style=display:none!important>
</dl>
<hr style=display:none!important>
<a name=Standard-Styles style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<h3 class=subsection style=display:none!important>20.3.3 Standard Styles</h3>
<a name=index-completion-system_002c-styles style=display:none!important></a>
<p style=display:none!important>Note that the values of several of these styles represent boolean
values. Any of the strings ‘’, ‘’,
‘’, and ‘’ can be used for the value ‘true’ and
any of the strings ‘’, ‘’, ‘’, and ‘’ for
the value ‘false’. The behavior for any other value is undefined 
except where explicitly mentioned. The default value may
be either ‘true’ or ‘false’ if the style is not set.
</p>
<p style=display:none!important>Some of these styles are tested first for every possible tag
corresponding to a type of match, and if no style was found, for the
 tag. The most notable styles of this type are , 
 and styles controlling completion listing such as 
 and . When tested for the 
tag, only the field of the context will be set so that
a style using the tag will normally be defined along the lines of:
</p>
<div class=example style=display:none!important>
</div>
<dl compact style=display:none!important>
</dl>
<hr style=display:none!important>
<a name=Control-Functions style=display:none!important></a>
<table class=header style=display:none!important cellspacing=1 cellpadding=1 border=0>
</table>
<a name=Control-Functions-1 style=display:none!important></a>
<h2 class=section>20.4 Control Functions</h2>
<a name=index-completion-system_002c-choosing-completers></a>
<p>The initialization script <tt>compinit</tt> redefines all the widgets
which perform completion to call the supplied widget function
<tt>_main_complete</tt>. This function acts as a wrapper calling the
so-called ‘completer’ functions that generate matches. If
<tt>_main_complete</tt> is called with arguments, these are taken as the
names of completer functions to be called in the order given. If no
arguments are given, the set of functions to try is taken from the
<tt>completer</tt> style. For example, to use normal completion and
correction if that doesn’t generate any matches:
</p>
<div class=example>
<pre class=example>zstyle ':completion:*' completer _complete _correct
</pre></div>
<p>after calling <tt>compinit</tt>. The default value for this style is
‘<tt>_complete _ignored</tt>’, i.e. normally only ordinary completion is tried,
first with the effect of the <tt>ignored-patterns</tt> style and then without
it. The <tt>_main_complete</tt> function uses the return status of the completer
functions to decide if other completers should be called. If the return
status is zero, no other completers are tried and the <tt>_main_complete</tt>
function returns.
</p>
<p>If the first argument to <tt>_main_complete</tt> is a single hyphen, the
arguments will not be taken as names of completers. Instead, the
second argument gives a name to use in the <var>completer</var> field of the 
context and the other arguments give a command name and arguments to
call to generate the matches.
</p>
<p>The following completer functions are contained in the distribution,
although users may write their own. Note that in contexts the leading
underscore is stripped, for example basic completion is performed in the
context ‘<tt>:completion::complete:</tt><var>...</var>’.
</p>
<a name=index-completion-system_002c-completers></a>
<dl compact>
<dd><a name=index-_005fall_005fmatches></a>
</dd>
<dt><tt>_all_matches</tt></dt>
<dd><p>This completer can be used to add a string consisting of all other
matches. As it influences later completers it must appear as the first
completer in the list. The list of all matches is affected by the
<tt>avoid-completer</tt> and <tt>old-matches</tt> styles described above.
</p>
<p>It may be useful to use the <tt>_generic</tt> function described below
to bind <tt>_all_matches</tt> to its own keystroke, for example:
</p>
<div class=example>
<pre class=example>zle -C all-matches complete-word _generic
bindkey '^Xa' all-matches
zstyle ':completion:all-matches:*' old-matches only
zstyle ':completion:all-matches::::' completer _all_matches
</pre></div>
<p>Note that this does not generate completions by itself: first use
any of the standard ways of generating a list of completions,
then use <tt>^Xa</tt> to show all matches. It is possible instead to
add a standard completer to the list and request that the
list of all matches should be directly inserted:
</p>
<div class=example>
<pre class=example>zstyle ':completion:all-matches::::' completer \ 
       _all_matches _complete
zstyle ':completion:all-matches:*' insert true
</pre></div>
<p>In this case the <tt>old-matches</tt> style should not be set.
</p>
<a name=index-_005fapproximate></a>
</dd>
<dt><tt>_approximate</tt></dt>
<dd><p>This is similar to the basic <tt>_complete</tt> completer but allows the
completions to undergo corrections. The maximum number of errors can be
specified by the <tt>max-errors</tt> style; see the description of
approximate matching in
<a href=https://zsh.sourceforge.io/Doc/Release/Expansion.html#Filename-Generation>Filename Generation</a>
for how errors are counted. Normally this completer will only be tried
after the normal <tt>_complete</tt> completer:
</p>
<div class=example>
<pre class=example>zstyle ':completion:*' completer _complete _approximate
</pre></div>
<p>This will give correcting completion if and only if
normal completion yields no possible completions. When
corrected completions are found, the completer will normally start
menu completion allowing you to cycle through these strings.
</p>
<p>This completer uses the tags <tt>corrections</tt> and <tt>original</tt> when
generating the possible corrections and the original string. The
<tt>format</tt> style for the former may contain the additional sequences
‘<tt>%e</tt>’ and ‘<tt>%o</tt>’ which will be replaced by the number of errors
accepted to generate the corrections and the original string,
respectively.
</p>
<p>The completer progressively increases the number of errors allowed up to
the limit by the <tt>max-errors</tt> style, hence if a completion is found
with one error, no completions with two errors will be shown, and so on.
It modifies the completer name in the context to indicate the number of
errors being tried: on the first try the completer field contains
‘<tt>approximate-1</tt>’, on the second try ‘<tt>approximate-2</tt>’, and so on.
</p>
<p>When <tt>_approximate</tt> is called from another function, the number of
errors to accept may be passed with the <tt>-a</tt> option. The argument
is in the same format as the <tt>max-errors</tt> style, all in one string.
</p>
<p>Note that this completer (and the <tt>_correct</tt> completer mentioned
below) can be quite expensive to call, especially when a large number
of errors are allowed. One way to avoid this is to set up the
<tt>completer</tt> style using the <tt>-e</tt> option to zstyle so that some
completers are only used when completion is attempted a second time on 
the same string, e.g.:
</p>
<div class=example>
<pre class=example>zstyle -e ':completion:*' completer '
  if [[ $_last_try != "$HISTNO$BUFFER$CURSOR" ]]; then
    _last_try="$HISTNO$BUFFER$CURSOR"
    reply=(_complete _match _prefix)
  else
    reply=(_ignored _correct _approximate)
  fi'
</pre></div>
<p>This uses the <tt>HISTNO</tt> parameter and the <tt>BUFFER</tt> and <tt>CURSOR</tt>
special parameters that are available inside zle and completion
widgets to find out if the command line hasn’t changed since the last
time completion was tried. Only then are the <tt>_ignored</tt>,
<tt>_correct</tt> and <tt>_approximate</tt> completers called.
</p>
<a name=index-_005fcanonical_005fpaths></a>
</dd>
<dt><tt>_canonical_paths</tt> [ <tt>-A</tt> <var>var</var> ] [ <tt>-N</tt> ] [ <tt>-MJV12nfX</tt> ] <var>tag</var> <var>descr</var> [ <var>paths</var> ... ]</dt>
<dd><p>This completion function completes all paths given to it, and also tries to
offer completions which point to the same file as one of the paths given
(relative path when an absolute path is given, and vice versa; when <tt>..</tt>’s
are present in the word to be completed; and some paths got from symlinks).
</p>
<p><tt>-A</tt>, if specified, takes the paths from the array variable specified. Paths can
also be specified on the command line as shown above. <tt>-N</tt>, if specified,
prevents canonicalizing the paths given before using them for completion, in
case they are already so. The options <tt>-M</tt>, <tt>-J</tt>, <tt>-V</tt>, <tt>-1</tt>, <tt>-2</tt>,
<tt>-n</tt>, <tt>-F</tt>, <tt>-X</tt> are passed to <tt>compadd</tt>.
</p>
<p>See <tt>_description</tt> for a description of <var>tag</var> and <var>descr</var>.
</p>
<a name=index-_005fcmdambivalent></a>
</dd>
<dt><tt>_cmdambivalent</tt></dt>
<dd><p>Completes the remaining positional arguments as an external command.
The external command and its arguments are completed as separate arguments
(in a manner appropriate for completing <tt>/usr/bin/env</tt>)
if there are two or more remaining positional arguments on the command line,
and as a quoted command string (in the manner of <tt>system(...)</tt>) otherwise.
See also <tt>_cmdstring</tt> and <tt>_precommand</tt>.
</p>
<p>This function takes no arguments.
</p>
<a name=index-_005fcmdstring></a>
</dd>
<dt><tt>_cmdstring</tt></dt>
<dd><p>Completes an external command as a single argument, as for
<tt>system(...)</tt>.
</p>
<a name=index-_005fcomplete></a>
</dd>
<dt><tt>_complete</tt></dt>
<dd><p>This completer generates all possible completions in a context-sensitive
manner, i.e. using the settings defined with the <tt>compdef</tt> function
explained above and the current settings of all special parameters.
This gives the normal completion behaviour.
</p>
<p>To complete arguments of commands, <tt>_complete</tt> uses the utility function
<tt>_normal</tt>, which is in turn responsible for finding the particular
function; it is described below. Various contexts of the form
<tt>-</tt><var>context</var><tt>-</tt> are handled specifically. These are all
mentioned above as possible arguments to the <tt>#compdef</tt> tag.
</p>
<p>Before trying to find a function for a specific context, <tt>_complete</tt> 
checks if the parameter ‘<tt>compcontext</tt>’ is set. Setting
‘<tt>compcontext</tt>’ allows the usual completion dispatching to be
overridden which is useful in places such as a function that uses
<tt>vared</tt> for input. If it is set to an array, the elements are taken
to be the possible matches which will be completed using the tag
‘<tt>values</tt>’ and the description ‘<tt>value</tt>’. If it is set to an
associative array, the keys are used as the possible completions and
the values (if non-empty) are used as descriptions for the matches. If
‘<tt>compcontext</tt>’ is set to a string containing colons, it should be of
the form ‘<var>tag</var><tt>:</tt><var>descr</var><tt>:</tt><var>action</var>’. In this case the
<var>tag</var> and <var>descr</var> give the tag and description to use and the
<var>action</var> indicates what should be completed in one of the forms
accepted by the <tt>_arguments</tt> utility function described below.
</p>
<p>Finally, if ‘<tt>compcontext</tt>’ is set to a string without colons, the
value is taken as the name of the context to use and the function
defined for that context will be called. For this purpose, there is a
special context named <tt>-command-line-</tt> that completes whole command
lines (commands and their arguments). This is not used by the completion
system itself but is nonetheless handled when explicitly called.
</p>
<a name=index-_005fcorrect></a>
</dd>
<dt><tt>_correct</tt></dt>
<dd><p>Generate corrections, but not completions, for the current word; this is
similar to <tt>_approximate</tt> but will not allow any number of extra
characters at the cursor as that completer does. The effect is
similar to spell-checking. It is based on <tt>_approximate</tt>, but the
completer field in the context name is <tt>correct</tt>.
</p>
<p>For example, with:
</p>
<div class=example>
<pre class=example>zstyle ':completion:::::' completer \ 
       _complete _correct _approximate
zstyle ':completion:*:correct:::' max-errors 2 not-numeric
zstyle ':completion:*:approximate:::' max-errors 3 numeric
</pre></div>
<p>correction will accept up to two errors. If a numeric argument is
given, correction will not be performed, but correcting completion
will be, and will accept as many errors as given by the numeric
argument. Without a numeric argument, first correction and then
correcting completion will be tried, with the first one accepting two
errors and the second one accepting three errors.
</p>
<p>When <tt>_correct</tt> is called as a function, the number of errors to accept
may be given following the <tt>-a</tt> option. The argument is in the same
form a values to the <tt>accept</tt> style, all in one string.
</p>
<p>This completer function is intended to be used without the
<tt>_approximate</tt> completer or, as in the example, just before
it. Using it after the <tt>_approximate</tt> completer is useless since
<tt>_approximate</tt> will at least generate the corrected strings
generated by the <tt>_correct</tt> completer — and probably more.
</p>
<a name=index-_005fexpand></a>
</dd>
<dt><tt>_expand</tt></dt>
<dd><p>This completer function does not really perform completion, but instead
checks if the word on the command line is eligible for expansion and,
if it is, gives detailed control over how this expansion is done. For
this to happen, the completion system needs to be invoked with
<tt>complete-word</tt>, not <tt>expand-or-complete</tt> (the default binding for
<tt>TAB</tt>), as otherwise the string will be expanded by the shell’s
internal mechanism before the completion system is started.
Note also this completer should be called before the <tt>_complete</tt> 
completer function.
</p>
<p>The tags used when generating expansions are <tt>all-expansions</tt> for the
string containing all possible expansions, <tt>expansions</tt> when adding
the possible expansions as single matches and <tt>original</tt> when adding
the original string from the line. The order in which these strings are
generated, if at all, can be controlled by the <tt>group-order</tt> and
<tt>tag-order</tt> styles, as usual.
</p>
<p>The format string for <tt>all-expansions</tt> and for <tt>expansions</tt> may
contain the sequence ‘<tt>%o</tt>’ which will be replaced by the original
string from the line.
</p>
<p>The kind of expansion to be tried is controlled by the <tt>substitute</tt>,
<tt>glob</tt> and <tt>subst-globs-only</tt> styles.
</p>
<p>It is also possible to call <tt>_expand</tt> as a function, in which case the
different modes may be selected with options: <tt>-s</tt> for
<tt>substitute</tt>, <tt>-g</tt> for <tt>glob</tt> and <tt>-o</tt> for <tt>subst-globs-only</tt>.
</p>
<a name=index-_005fexpand_005falias></a>
</dd>
<dt><tt>_expand_alias</tt></dt>
<dd><p>If the word the cursor is on is an alias, it is expanded and no other
completers are called. The types of aliases which are to be expanded can
be controlled with the styles <tt>regular</tt>, <tt>global</tt> and <tt>disabled</tt>.
</p>
<p>This function is also a bindable command, see
<a href=#Bindable-Commands>Bindable Commands</a>.
</p>
<a name=index-_005fextensions></a>
</dd>
<dt><tt>_extensions</tt></dt>
<dd><p>If the cursor follows the string ‘<tt>*.</tt>’, filename extensions are
completed. The extensions are taken from files in current directory or a
directory specified at the beginning of the current word. For exact matches,
completion continues to allow other completers such as <tt>_expand</tt> to
expand the pattern. The standard <tt>add-space</tt> and <tt>prefix-hidden</tt>
styles are observed.
</p>
<a name=index-_005fexternal_005fpwds></a>
</dd>
<dt><tt>_external_pwds</tt></dt>
<dd><p>Completes current directories of other zsh processes belonging to the
current user.
</p>
<p>This is intended to be used via <tt>_generic</tt>, bound to a custom key
combination. Note that pattern matching is enabled so matching is
performed similar to how it works with the <tt>_match</tt> completer.
</p>
<a name=index-_005fhistory></a>
</dd>
<dt><tt>_history</tt></dt>
<dd><p>Complete words from the shell’s command history. This completer 
can be controlled by the <tt>remove-all-dups</tt>, and <tt>sort</tt> styles as for the
<tt>_history_complete_word</tt> bindable command, see
<a href=#Bindable-Commands>Bindable Commands</a>
and
<a href=#Completion-System-Configuration>Completion System Configuration</a>.
</p>
<a name=index-_005fignored></a>
</dd>
<dt><tt>_ignored</tt></dt>
<dd><p>The <tt>ignored-patterns</tt> style can be set to a list of patterns which are
compared against possible completions; matching ones are removed.
With this completer those matches can be reinstated, as
if no <tt>ignored-patterns</tt> style were set. The completer actually
generates its own list of matches; which completers are invoked
is determined in the same way as for the <tt>_prefix</tt> completer.
The <tt>single-ignored</tt> style is also available as described above.
</p>
<a name=index-_005flist></a>
</dd>
<dt><tt>_list</tt></dt>
<dd><p>This completer allows the insertion of matches to be delayed until
completion is attempted a second time without the word on the line
being changed. On the first attempt, only the list of matches will be
shown. It is affected by the styles <tt>condition</tt> and <tt>word</tt>, see
<a href=#Completion-System-Configuration>Completion System Configuration</a>.
</p>
<a name=index-_005fmatch></a>
</dd>
<dt><tt>_match</tt></dt>
<dd><p>This completer is intended to be used after the <tt>_complete</tt>
completer. It behaves similarly but the string on the command line may
be a pattern to match against trial completions. This gives the effect
of the <tt>GLOB_COMPLETE</tt> option.
</p>
<p>Normally completion will be performed by taking the pattern from the line,
inserting a ‘<tt>*</tt>’ at the cursor position and comparing the resulting
pattern with the possible completions generated. This can be modified
with the <tt>match-original</tt> style described above.
</p>
<p>The generated matches will be offered in a menu completion unless the
<tt>insert-unambiguous</tt> style is set to ‘true’; see the description above
for other options for this style.
</p>
<p>Note that matcher specifications defined globally or used by the
completion functions (the styles <tt>matcher-list</tt> and <tt>matcher</tt>) will
not be used.
</p>
<a name=index-_005fmenu></a>
</dd>
<dt><tt>_menu</tt></dt>
<dd><p>This completer was written as simple example function to show how menu
completion can be enabled in shell code. However, it has the notable
effect of disabling menu selection which can be useful with
<tt>_generic</tt> based widgets. It should be used as the first completer in
the list. Note that this is independent of the setting of the
<tt>MENU_COMPLETE</tt> option and does not work with the other menu
completion widgets such as <tt>reverse-menu-complete</tt>, or
<tt>accept-and-menu-complete</tt>.
</p>
<a name=index-_005foldlist></a>
</dd>
<dt><tt>_oldlist</tt></dt>
<dd><p>This completer controls how the standard completion widgets behave
when there is an existing list of completions which may have been
generated by a special completion (i.e. a separately-bound completion
command). It allows the ordinary completion keys to continue to use the
list of completions thus generated, instead of producing a new list of
ordinary contextual completions.
It should appear in the list of completers before any of
the widgets which generate matches. It uses two styles: <tt>old-list</tt> and
<tt>old-menu</tt>, see
<a href=#Completion-System-Configuration>Completion System Configuration</a>.
</p>
<a name=index-_005fprecommand></a>
</dd>
<dt><tt>_precommand</tt></dt>
<dd><p>Complete an external command in word-separated arguments, as for
<tt>exec</tt> and <tt>/usr/bin/env</tt>.
</p>
<a name=index-_005fprefix></a>
</dd>
<dt><tt>_prefix</tt></dt>
<dd><p>This completer can be used to try completion with the suffix (everything
after the cursor) ignored. In other words, the suffix will not be
considered to be part of the word to complete. The effect is similar
to the <tt>expand-or-complete-prefix</tt> command.
</p>
<p>The <tt>completer</tt> style is used to decide which other completers are to
be called to generate matches. If this style is unset, the list of
completers set for the current context is used — except, of course, the
<tt>_prefix</tt> completer itself. Furthermore, if this completer appears
more than once in the list of completers only those completers not
already tried by the last invocation of <tt>_prefix</tt> will be called.
</p>
<p>For example, consider this global <tt>completer</tt> style:
</p>
<div class=example>
<pre class=example>zstyle ':completion:*' completer \ 
    _complete _prefix _correct _prefix:foo
</pre></div>
<p>Here, the <tt>_prefix</tt> completer tries normal completion but ignoring the
suffix. If that doesn’t generate any matches, and neither does
the call to the <tt>_correct</tt> completer after it, <tt>_prefix</tt> will 
be called a second time and, now only trying correction with the
suffix ignored. On the second invocation the completer part of the
context appears as ‘<tt>foo</tt>’.
</p>
<p>To use <tt>_prefix</tt> as the last resort and try only normal completion
when it is invoked:
</p>
<div class=example>
<pre class=example>zstyle ':completion:*' completer _complete ... _prefix
zstyle ':completion::prefix:*' completer _complete
</pre></div>
<p>The <tt>add-space</tt> style is also respected. If it is set to ‘true’ then
<tt>_prefix</tt> will insert a space between the matches generated (if any) 
and the suffix.
</p>
<p>Note that this completer is only useful if the
<tt>COMPLETE_IN_WORD</tt> option is set; otherwise, the cursor will
be moved to the end of the current word before the completion code is
called and hence there will be no suffix.
</p>
<a name=index-_005fuser_005fexpand></a>
</dd>
<dt><tt>_user_expand</tt></dt>
<dd><p>This completer behaves similarly to the <tt>_expand</tt> completer but
instead performs expansions defined by users. The styles <tt>add-space</tt> and
<tt>sort</tt> styles specific to the <tt>_expand</tt> completer are usable with
<tt>_user_expand</tt> in addition to other styles handled more generally by
the completion system. The tag <tt>all-expansions</tt> is also available.
</p>
<p>The expansion depends on the array style <tt>user-expand</tt> being defined
for the current context; remember that the context for completers is less
specific than that for contextual completion as the full context has not
yet been determined. Elements of the array may have one of the following
forms:
</p>
<dl compact>
<dt><tt>$</tt><var>hash</var></dt>
<dd>
<p><var>hash</var> is the name of an associative array. Note this is not a full
parameter expression, merely a <tt>$</tt>, suitably quoted to prevent immediate
expansion, followed by the name of an associative array. If the trial
expansion word matches a key in <var>hash</var>, the resulting expansion is the
corresponding value.
</p>
</dd>
<dt><var>_func</var></dt>
<dd>
<p><var>_func</var> is the name of a shell function whose name must begin with
<tt>_</tt> but is not otherwise special to the completion system. The function
is called with the trial word as an argument. If the word is to be
expanded, the function should set the array <tt>reply</tt> to a list of
expansions. Optionally, it can set <tt>REPLY</tt> to a word that will
be used as a description for the set of expansions.
The return status of the function is irrelevant.
</p>
</dd>
</dl>
</dd>
</dl>
