<html><head><title>vi Compound Searches (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch17_21.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch17_23.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">17.22. vi Compound Searches</h2>

<p><a name="IXT-17-1489" /> <a name="IXT-17-1490" /> <a name="IXT-17-1491" />You probably know that you can search for a
word or phrase with the <i class="command">vi</i> <tt class="literal">/</tt>
(slash) command:
</p>

<blockquote><pre class="code"><tt class="userinput"><b>/treasure</b></tt></pre></blockquote>

<p>If you have a file that uses the same word over and over again, you
might want to find one particular place that the word is used. You
can repeat the search with the <em class="emphasis">n</em> command until
you find the place you want. That can take time and effort, though.
</p>

<p>For example, suppose you want to find the word
"treasure" in the sentence that has
words like "Los Alamos residents . . .
treasure," but you can't remember exactly how the
sentence is written. You could use wildcards in your regular
expression:
</p>

<blockquote><pre class="code"><tt class="userinput"><b>/Los Alamos.*treasure</b></tt></pre></blockquote>

<p>but then the phrases "Los Alamos"
and "treasure" have to be on the
same line of the file you're searching -- and they won't always
be. Also, you want your cursor on the word
<em class="emphasis">treasure</em>, but that search would put the cursor
on <em class="emphasis">Los</em> instead.
</p>

<p>"Hmmm," you say,
"How about two separate searches, like
this?"
</p>

<blockquote><pre class="code">/Los Alamos
/treasure</pre></blockquote>

<p>The problem there is that the file might have the phrase
"Los Alamos" all throughout it; you
might have to type <em class="emphasis">n</em> over and over until you get
to the sentence with <em class="emphasis">treasure</em>.
</p>

<p>Here's the easy way: a compound search. Say your cursor is on line 1
of the following file:
</p>

<blockquote><pre class="code">Before the second World War, there was a treasured boys' school in
what was to become the city of Los Alamos, New Mexico. The school at
Los Alamos changed the lives and made a lifelong impression on most boys
who attended. One of the boys who attended the Los Alamos school went on
to propose that remote set of mesas as a site for the U.S. Government's
   ...
Since the war ended, most of the boys' school ranch buildings have been torn
down or replaced. But there's one building that Los Alamos residents still
use and treasure. It's The Lodge, a log building on the edge of what's now
   ...</pre></blockquote>

<p>Type the command:</p>

<blockquote><pre class="code"><tt class="userinput"><b>/Los Alamos/;/treasure/</b></tt></pre></blockquote>

<p>That means "find the first occurrence of
<em class="emphasis">treasure</em> just after <em class="emphasis">Los
Alamos</em>." Starting at the top of the
previous example, that search will skip past all the
<em class="emphasis">treasure</em> and <em class="emphasis">Los Alamos</em>
words until it finds the word <em class="emphasis">treasure</em> on the
last line shown. (It's probably smarter to type just
<tt class="literal">/Alamos/;/treasure/</tt> in case <em class="emphasis">Los
Alamos</em> is split across two lines of the file.)
</p>



<p>Another example: a C programmer wants to find the
<em class="emphasis">printf</em> function call just after the line where
<em class="emphasis">i</em> is incremented by two (<tt class="literal">i +=
2</tt>). She could type:
</p>

<blockquote><pre class="code"><tt class="userinput"><b>/i += 2/;/printf/</b></tt></pre></blockquote>

<a name="ch17-14-fm2xml" /><blockquote><b>NOTE:</b> 
You can't repeat a compound search by typing <tt class="literal">n</tt>.
The easiest way is to define the search as a <b class="emphasis-bold">key
map</b> (<a href="ch18_02.htm#upt3-CHP-18-SECT-2">Section 18.2</a>):
</p>
<p><tt class="literal">^M</tt> <a href="ch18_06.htm#upt3-CHP-18-SECT-6">Section 18.6</a></p>

<blockquote><pre class="code"><tt class="userinput"><b>:map #3 /Los Alamos/;/treasure/^M</b></tt></pre></blockquote>
<p>and repeat the search with (in this case) your F3 function key.</p>
</blockquote>

<p> <em class="emphasis">-- JP</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch17_21.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch17_23.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">17.21. Shell Escapes: Running One UnixCommand While Using Another</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">17.23. vi Word Abbreviation</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>