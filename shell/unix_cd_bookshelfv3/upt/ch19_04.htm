<html><head><title>Backup and Auto-Save Files (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch19_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch19_05.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">19.4. Backup and Auto-Save Files</h2>

<p><a name="IXT-19-6016" /> <a name="IXT-19-6017" /><a name="IXT-19-6018" /> <a name="IXT-19-6019" /> <a name="IXT-19-6020" />If
you're like most people, you often spend a few hours
editing a file, only to decide that you liked your original version
better. Or you press some strange sequence of keys that makes Emacs
do something extremely weird and that you can't
"undo." Emacs provides several ways
to get out of these tight spots.
</p>

<p>First, try the command ESC-x <tt class="literal">revert-buffer</tt>. Emacs
will ask one of two questions: either "Buffer has
been auto-saved recently. Revert from auto-save file? (y or
n)" or "Revert buffer from file
<em class="emphasis">your-filename</em>? (yes or no)".
</p>

<p>Before deciding what to do, it's important to
understand the difference between these two questions. Emacs creates
an auto-save<a href="#FOOTNOTE-52">[52]</a>
file every 300 keystrokes you type. So, if you're
reverting to the auto-save file, you'll at most lose
your last 300 keystrokes. Maybe this is what you want -- but maybe
you made the mistake a long time ago. In that case, you
don't want to use the auto-save file; type
<tt class="literal">n</tt>, and you'll see the second
question, asking if you want to revert to the last copy of the file
that you saved. Type <tt class="literal">yes</tt> to go back to your most
recent saved version.
</p><blockquote class="footnote"> <a name="FOOTNOTE-52" /><p> [52]For reference, the name of the auto-save
file is
<tt class="literal">#</tt><em class="replaceable"><tt>your-filename</tt></em><tt class="literal">#</tt>;
that is, it sticks a hash mark (<tt class="literal">#</tt>) before and
after the file's
"regular" name.</p> </blockquote>

<p>It's possible that you'll only see
the second question ("Revert buffer from file . . .
"). This means that you have saved the file sometime
within the last 300 keystrokes. As soon as you save a file, Emacs
deletes the auto-save file. It will create a new one every 300
keystrokes.
</p>

<p>It's worth noting that Emacs is
<em class="emphasis">very</em> picky about what you type. If it asks for a
<tt class="literal">y</tt> or an <tt class="literal">n</tt>,
you've got to type <tt class="literal">y</tt> or
<tt class="literal">n</tt>. If it asks for <tt class="literal">yes</tt> or
<tt class="literal">no</tt>, you've got to type
<tt class="literal">yes</tt> or <tt class="literal">no</tt>. In situations like
this, where the two styles are mixed up, you've got
to get it right.
</p>

<p>If you're in real trouble and you want to go back to
your <em class="emphasis">original file</em> -- the way it was when you
started editing -- you need to recover Emacs'
<em class="emphasis">backup file</em>. If you're editing
a file that already exists, Emacs will create a backup file as soon
as it starts. If you're editing a new file, Emacs
will create a backup the <em class="emphasis">second</em> time you save
the file. Once it's created, the backup file is
never touched; it stays there until the next time you start Emacs, at
which point you'll get a new backup, reflecting the
file's contents at the start of your editing
session.
</p>

<p>Now that we're over the preliminaries, how do you
recover the backup file? Emacs doesn't have any
special command for doing this; you have to do it by hand. The backup
file's name is the same as your original filename,
with a tilde (<tt class="literal">~</tt>) added to it. So quit Emacs (or
start a shell), and type:
</p>

<blockquote><pre class="code">% <tt class="userinput"><b>mv</b></tt> <em class="replaceable"><tt>your-filename</em><tt class="userinput"><b>~</b></tt> <em class="replaceable">your-filename</tt></em></pre></blockquote>

<p>Note that Emacs has the ability to save
"numbered" backup files, like the
VAX/VMS operating system. We've never played with
this feature and don't think it's a
particularly good idea. But it's there if you want
it.
</p>

<p><em class="emphasis">--ML and DC</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch19_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch19_05.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">19.3. Customizations and How to Avoid Them</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">19.5. Putting Emacs in Overwrite Mode</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>