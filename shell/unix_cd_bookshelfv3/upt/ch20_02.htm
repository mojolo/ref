<html><head><title>Writing Editing Scripts (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch20_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch20_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">20.2. Writing Editing Scripts</h2>

<p><a name="IXT-20-214" /><a name="IXT-20-215" /><a name="IXT-20-216" />When you write
a script that contains a series of editing actions and then run the
script on an input file, you take what would be a hands-on procedure
in an editor such as <i class="command">vi</i> and transform it into a
look-no-hands procedure.
</p>

<p>When performing edits manually, you get to trust the cause-and-effect
relationship of entering an editing command and seeing the immediate
result. There is usually an "undo"
command that allows you to reverse the effect of a command and return
the text file to its previous state. Once you learn an interactive
text editor, you have the feeling of making changes in a safe and
controlled manner, one step at a time.
</p>

<p>Most people new to "power editing"
will feel there is greater risk in writing a script to perform a
series of edits than in making those changes manually. The fear is
that by automating the task, something will happen that cannot be
reversed. The object of learning scripting with <i class="command">ex</i>
or <i class="command">sed</i> is to understand the commands well enough
to see that your results are predictable. In other words, you come to
understand the cause-and-effect relationship between your editing
script and the output you get.
</p>

<p>This requires using the editor in a controlled, methodical way.
Gradually, you will develop methods for creating and testing editing
scripts. You will come to rely upon these methods and gain confidence
that you know what your script is doing and why.
</p>

<p>Here are a few tips:</p>

<ol><li>
<p>Carefully examine your input file, using <i class="command">grep</i>,
before designing your script.
</p>
</li><li>
<p>Start with a small sample of occurrences in a test file. Run your
script on the sample and make sure the script is working. Remember,
it's just as important to make sure the script
<em class="emphasis">doesn't</em> work where you
<em class="emphasis">don't</em> want it to. Then increase
the size of the sample. Try to increase the complexity of the input.
</p>
</li><li>
<p>Work carefully, testing each command that you add to a script.
Compare the output against the input file to see what has changed.
Prove to yourself that your script is complete. Your script may work
perfectly based on your assumptions of what is in the input file, but
your assumptions may be wrong.
</p>
</li><li>
<p><em class="emphasis">Be pragmatic!</em> Try to accomplish what you can
with your script, but understand that it doesn't
have to do 100 percent of the job. If you encounter difficult
situations, check to see how frequently they occur. Sometimes
it's better to do a few remaining edits manually.
</p>
</li></ol>
<p>If you can add to these tips with your experience, tack them on.</p>

<p>One additional suggestion is to use a <b class="emphasis-bold">revision
control system</b> (<a href="ch39_04.htm#upt3-CHP-39-SECT-4">Section 39.4</a>) to preserve
previous versions. That makes it easy to undo your edits.
</p>

<p> <em class="emphasis">-- DD</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch20_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch20_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">20. Batch Editing</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">20.3. Line Addressing</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>