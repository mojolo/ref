<html><head><title>Limiting the Extent of a Match (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch32_17.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch32_19.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">32.18. Limiting the Extent of a Match</h2>

<p><a name="IXT-32-4029" />A regular expression tries to
match the longest string possible, which can cause unexpected
problems. For instance, look at the following regular expression,
which matches any number of characters inside quotation marks:
</p>

<blockquote><pre class="code">".*"</pre></blockquote>

<p>Let's imagine an HTML table with lots of entries,
each of which has two quoted strings, as shown below:
</p>

<blockquote><pre class="code">&lt;td&gt;&lt;a href="#arts"&gt;&lt;img src="d_arrow.gif" border=0&gt;&lt;/a&gt;</pre></blockquote>

<p>All the text in each line of the table is the same, except the text
inside the quotes. To match the line through the first quoted string,
a novice might describe the pattern with the following regular
expression:
</p>

<blockquote><pre class="code">&lt;td&gt;&lt;a href=".*"&gt;</pre></blockquote>

<p>However, the pattern ends up matching almost all of the entry because
the second quotation mark in the pattern matches the
<em class="emphasis">last</em> quotation mark on the line! If you know how
many quoted strings there are, you can specify each of them:
</p>

<blockquote><pre class="code">&lt;td&gt;&lt;a href=".*"&gt;&lt;img src=".*" border=0&gt;&lt;/a&gt;</pre></blockquote>

<p>Although this works as you'd expect, some line in
the file might not have the same number of quoted strings, causing
misses that should be hits -- you simply want the first argument.
Here's a different regular expression that matches
the shortest possible extent between two quotation
marks:<a name="IXT-32-4030" />
</p>

<blockquote><pre class="code">"[^"]*"</pre></blockquote>

<p>It matches "a quote, followed by any number of
characters that do not match a quote, followed by a
quote." Note, however, that it will be fooled by
escaped quotes, in strings such as the following:
</p>

<blockquote><pre class="code">$strExample = "This sentence contains an escaped \" character.";</pre></blockquote>

<p>The use of what we might call "negated character
classes" like this is one of the things that
distinguishes the journeyman regular expression user from the novice.
</p>

<p>--<em class="emphasis">DD and JP</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch32_17.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch32_19.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">32.17. Just What Does a Regular Expression Match?</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">32.19. I Never Meta Character I Didn't Like</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>