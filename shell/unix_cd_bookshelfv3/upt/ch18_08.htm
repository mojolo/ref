<html><head><title>More Examples of Mapping Keys in vi (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch18_07.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch18_09.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">18.8. More Examples of Mapping Keys in vi</h2>

<p><a name="IXT-18-1716" /> <a name="IXT-18-1717" />The
examples that follow will give you an idea of the clever shortcuts
possible when defining keyboard maps:
</p>

<ol><li>
<p>Add text whenever you move to the end of a word:</p>

<blockquote><pre class="code">map e ea</pre></blockquote>

<p>Most of the time, the only reason you want to move to the end of a
word is to add text. This map sequence puts you in text-input mode
automatically. Note that the mapped key, <tt class="literal">e</tt>, has
meaning in <i class="command">vi</i>. You're allowed to
map a key that is already used by <i class="command">vi</i>, but the
key's normal function will be unavailable as long as
the map is in effect. This isn't so bad in this
case, since the <tt class="literal">E</tt> command is often identical to
<tt class="literal">e</tt>.
</p>

<p>In the remaining examples, we assume that <tt class="literal">e</tt> has
been mapped to <tt class="literal">ea</tt>.
</p>
</li>

<li>
<p><b class="emphasis-bold">Save a file and edit the next one in a
series</b> (<a href="ch17_03.htm#upt3-CHP-17-SECT-3">Section 17.3</a>):
</p>

<blockquote><pre class="code">map q :w^M:n^M</pre></blockquote>

<p>Notice that you can map keys to <i class="command">ex</i> commands, but
be sure to finish each <i class="command">ex</i> command with a RETURN.
This sequence makes it easy to move from one file to the next, and
it's useful when you've opened many
short files with one <i class="command">vi</i> command. Mapping the
letter <tt class="literal">q</tt> helps you remember that the sequence is
similar to a "quit."
</p>
</li>

<li>
<p>Put HTML emboldening codes (<tt class="literal">&lt;STRONG&gt;</tt> and
<tt class="literal">&lt;/STRONG&gt;</tt>) around a word:
</p>

<blockquote><pre class="code">map v i&lt;STRONG&gt;^[e&lt;/STRONG&gt;^[</pre></blockquote>

<p>This sequence assumes that the cursor is at the beginning of the
word. First, you enter text-input mode, then you type the code for
bold font. Next, you return to command mode by typing a <b class="emphasis-bold">"quoted"</b>
(<a href="ch18_06.htm#upt3-CHP-18-SECT-6">Section 18.6</a>) ESC. Finally, you append the closing
HTML tag at the end of the word, and you return to command mode. Of
course, the map is not limited to HTML font tags. You can use it to
enclose a word in parentheses or C comment characters, to name just a
few applications.
</p>

<p>This example shows you that map sequences are allowed to contain
other map commands (the <tt class="literal">e</tt> is already mapped to
<tt class="literal">ea</tt>). The ability to use nested map sequences is
controlled by <b class="emphasis-bold">vi's remap
option</b> (<a href="ch18_12.htm#upt3-CHP-18-SECT-12">Section 18.12</a>), which is normally
enabled.
</p>
</li>

<li>
<p>Put HTML emboldening tags around a word, even when the cursor is not
at the beginning of the word:
</p>

<blockquote><pre class="code">map V lbi&lt;STRONG&gt;^[e&lt;/STRONG&gt;^[</pre></blockquote>

<p>This sequence is the same as the previous one, except that it uses
<tt class="literal">lb</tt> to handle the additional task of positioning
the cursor at the beginning of the word. The cursor might be in the
middle of the word, so you'll want to move to the
beginning with the <tt class="literal">b</tt> command.
</p>

<p>But if the cursor were already at the beginning of the word, the
<tt class="literal">b</tt> command would move the cursor to the previous
word instead. To guard against that case, type an
<tt class="literal">l</tt> before moving back with <tt class="literal">b</tt> so
that the cursor never starts on the first letter of the word. You can
define variations of this sequence by replacing the
<tt class="literal">b</tt> with <tt class="literal">B</tt> and the
<tt class="literal">e</tt> with <tt class="literal">Ea</tt>. In all cases though,
the <tt class="literal">l</tt> command prevents this sequence from working
if the cursor is at the end of a line. (To get around this, you could
add a space to the end of the word before typing the keymap.)
</p>
</li></ol>
<p>--<em class="emphasis">DG, from <em class="emphasis">Learning the vi Editor</em>
(O'Reilly, 1998)</em>
</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch18_07.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch18_09.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">18.7. Maps for Repeated Edits</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">18.9. Repeating a vi Keymap</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>