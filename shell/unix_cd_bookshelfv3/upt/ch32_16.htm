<html><head><title>Getting Regular Expressions Right (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch32_15.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch32_17.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">32.16. Getting Regular Expressions Right</h2>

<p><a name="IXT-32-4022" />Writing regular expressions involves
more than learning the mechanics. You not only have to learn how to
describe patterns, but you also have to recognize the context in
which they appear. You have to be able to think through the level of
detail that is necessary in a regular expression, based on the
context in which the pattern will be applied.
</p>

<p>The same thing that makes writing regular expressions difficult is
what makes writing them interesting: the variety of occurrences or
contexts in which a pattern appears. This complexity is inherent in
language itself, just as you can't always understand
an <b class="emphasis-bold">expression</b> (<a href="ch32_01.htm#upt3-CHP-32-SECT-1">Section 32.1</a>) by looking up each word in the dictionary.
</p>

<p>The process of writing a regular expression involves three steps:</p>

<ol><li>
<p>Knowing what you want to match and how it might appear in the text.</p>
</li><li>
<p>Writing a pattern to describe what you want to match.</p>
</li><li>
<p>Testing the pattern to see what it matches.</p>
</li></ol>
<p>This process is virtually the same kind of process that a programmer
follows to develop a program. Step 1 might be considered the
specification, which should reflect an understanding of the problem
to be solved as well as how to solve it. Step 2 is analogous to the
actual coding of the program, and step 3 involves running the program
and testing it against the specification. Steps 2 and 3 form a loop
that is repeated until the program works satisfactorily.
</p>

<p>Testing your description of what you want to match ensures that the
description works as expected. It usually uncovers a few surprises.
Carefully examining the results of a test, comparing the output
against the input, will greatly improve your understanding of regular
expressions. You might consider evaluating the results of a
pattern-matching operation as follows:
</p>

<dl>
<dt><i>Hits</i></dt>
<dd>
The lines that I wanted to match.</p>
</dd>


<dt><i>Misses</i></dt>
<dd>
The lines that I didn't want to match.</p>
</dd>


<dt><i>Misses that should be hits</i></dt>
<dd>
The lines that I didn't match but wanted to match.</p>
</dd>


<dt><i>Hits that should be misses</i></dt>
<dd>
The lines that I matched but didn't want to match.</p>
</dd>

</dl>

<p>Trying to perfect your description of a pattern is something that you
work at from opposite ends: you try to eliminate the
"hits that should be misses" by
limiting the possible matches, and you try to capture the
"misses that should be hits" by
expanding the possible matches.
</p>

<p>The difficulty is especially apparent when you must describe patterns
using fixed strings. Each character you remove from the fixed-string
pattern increases the number of possible matches. For instance, while
searching for the string <tt class="literal">what</tt>, you determine that
you'd like to match <tt class="literal">What</tt> as well.
The only fixed-string pattern that will match <tt class="literal">What</tt>
and <tt class="literal">what</tt> is <tt class="literal">hat</tt>, the longest
string common to both. It is obvious, though, that searching for
<tt class="literal">hat</tt> will produce unwanted matches. Each character
you add to a fixed-string pattern decreases the number of possible
matches. The string <tt class="literal">them</tt> is going to produce fewer
matches than the string <tt class="literal">the</tt>.
</p>

<p>Using metacharacters in patterns provides greater flexibility in
extending or narrowing the range of matches. Metacharacters, used in
combination with literals or other metacharacters, can be used to
expand the range of matches while still eliminating the matches that
you do not want.
</p>

<p> <em class="emphasis">-- DD</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch32_15.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch32_17.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">32.15. Extended Regular Expressions</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">32.17. Just What Does a Regular Expression Match?</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>