<html><head><title>Checking and Removing Jobs (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch25_06.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch25_08.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">25.7. Checking and Removing Jobs</h2>

<p><a name="IXT-25-5125" /><a name="IXT-25-5126" />From time to time,
you'll submit an <i class="command">at</i> job and
realize that there's something wrong with it. How do
you get it out of the queue? Two tools help you do this:
<i class="command">atq</i>, which reports the jobs that are in the queue,
and <i class="command">atrm</i><a name="IXT-25-5127" />, which deletes jobs that are already in
the queue.
</p>

<p><i class="command">atq</i> is pretty simple; by default, it reports on
all jobs that have been queued. Optionally, you can give it a user
name as an argument; in this case it reports all the jobs queued by
the given user. The report looks like this:
</p>

<blockquote><pre class="code">los% <tt class="userinput"><b>atq</b></tt>
 Rank     Execution Date     Owner     Job #   Queue   Job Name
  1st   Oct  9, 1996 22:27   mikel      4637       a   stdin
  2nd   Oct 10, 1996 01:08   mikel      4641       a   stdin
  3rd   Oct 10, 1996 02:34   judy       4663       a   stdin</pre></blockquote>

<p>Note that <i class="command">atq</i> has no objection to telling you
about other users' jobs. Although this might seem
like a security hole, it's actually useful -- see
<a href="ch25_08.htm#upt3-CHP-25-SECT-8">Section 25.8</a>. The jobs are ordered according
to their execution date. With the <span class="option">-c</span> option,
<i class="command">atq</i> orders jobs according to when they were
queued -- conceivably a useful feature. (<em class="emphasis">atq
-n</em> just prints the number of jobs that are queued;
I'm not sure when this would be useful.)
</p>

<p>Once you've found out the job number, you can delete
it with the command <i class="command">atrm</i>. You can only delete your
own jobs, not someone else's:
</p>

<blockquote><pre class="code">% <tt class="userinput"><b>atrm 4637</b></tt>
4637: removed
% <tt class="userinput"><b>atrm 4663</b></tt>
4663: permission denied</pre></blockquote>

<p>The command <i class="command">atrm -</i> removes all the jobs you
submitted; it's good for cleaning out your queue
completely.
</p>

<a name="ch25-5-fm2xml" /><blockquote><b>NOTE:</b> 
<a name="IXT-25-5128" /><a name="IXT-25-5129" />On some
versions, use <em class="emphasis">at -l</em> to list your jobs (instead
of <i class="command">atq</i>) and <em class="emphasis">at -r</em> to delete
your jobs (instead of <i class="command">atrm</i>). Other systems may
have different commands and options; check your manpage.
</p>

<p>Some older BSD-based implementations may not support any of these
options. Once you submit a job, you can delete it by finding its
filename in the <em class="emphasis">/usr/spool/at</em> directory and
<b class="emphasis-bold">emptying the file</b> (<a href="ch15_02.htm#upt3-CHP-15-SECT-2">Section 15.2</a>). Or the <b class="emphasis-bold">superuser</b> (<a href="ch01_18.htm#upt3-CHP-1-SECT-18">Section 1.18</a>) can
go to the spool directory and delete the file by hand.
</p>
</blockquote>

<p> <em class="emphasis">-- ML</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch25_06.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch25_08.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">25.6. Making Your at Jobs Quiet</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">25.8. Avoiding Other at and cron Jobs</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>