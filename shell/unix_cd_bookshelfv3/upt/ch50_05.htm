<html><head><title>Using chmod to Change File Permission (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch50_04.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch50_06.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">50.5. Using chmod to Change File Permission</h2>

<p><a name="IXT-50-1046" /><a name="IXT-50-1047" />To change a <a name="IXT-50-1048" /> <a name="IXT-50-1049" /> <a name="IXT-50-1050" />file's permissions, you
need to use the <i class="command">chmod</i> command, and you must be the
file's owner or root. The command's
syntax is pretty simple:
</p>

<blockquote><pre class="code">% <tt class="userinput"><b>chmod </b></tt><em class="replaceable"><tt>new-mode file(s)</tt></em></pre></blockquote>

<p><a name="IXT-50-1051" />The
<em class="replaceable"><tt>new-mode</tt></em> describes the access permissions
you want <em class="emphasis">after</em> the change. There are two ways to
specify the mode: you can use either a <em class="emphasis">numeric
mode</em><a name="IXT-50-1052" /> <a name="IXT-50-1053" /> or
some symbols that describe the changes. I generally prefer the
numeric mode (because I'm strange, I suppose). To
use a numeric mode, decide what permissions you want to have,
<b class="emphasis-bold">express them as an octal number</b>
(<a name="IXT-50-1054" /><a href="ch01_17.htm#upt3-CHP-1-SECT-17">Section 1.17</a>,
<a href="ch50_02.htm#upt3-CHP-50-SECT-2">Section 50.2</a>), and give a command like this one:
</p>

<blockquote><pre class="code">% <tt class="userinput"><b>chmod 644 report.txt</b></tt></pre></blockquote>

<p>This gives read and write access to the owner of
<em class="emphasis">report.txt</em> and read-only access to everyone
else.
</p>

<p>Many users prefer to use the <em class="emphasis">symbolic
mode</em><a name="IXT-50-1055" /> <a name="IXT-50-1056" /> to
specify permissions. A symbolic <i class="command">chmod</i> command
looks like this:
</p>

<blockquote><pre class="code">% <tt class="userinput"><b>chmod g-w report.txt</b></tt></pre></blockquote>

<p>This means "take away write access for group
members." The symbols used in mode specifications
are shown in <a href="ch50_05.htm#upt3-CHP-50-TABLE-1">Table 50-1</a>.
</p>

<a name="upt3-CHP-50-TABLE-1" /><h4 class="objtitle">Table 50-1. chmod symbolic modes </h4><table border="1" cellpadding="3">




<tr>
<th>
<p>Category</p>
</th>
<th>
<p>Mode</p>
</th>
<th>
<p>Description</p>
</th>
</tr>


<tr>
<td>
<p>Who</p>
</td>
<td>
<p><tt class="literal">u</tt></p>
</td>
<td>
<p>User (owner) of the file.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">g</tt></p>
</td>
<td>
<p>Group members.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">o</tt></p>
</td>
<td>
<p>Others.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">a</tt></p>
</td>
<td>
<p>All (i.e., user, group, and others).</p>
</td>
</tr>
<tr>
<td>
<p>What to do</p>
</td>
<td>
<p><tt class="literal">-</tt></p>
</td>
<td>
<p>Take away this permission. </p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">+</tt></p>
</td>
<td>
<p>Add this permission.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">=</tt></p>
</td>
<td>
<p><b class="emphasis-bold">Set exactly this permission</b> (<a href="ch50_06.htm#upt3-CHP-50-SECT-6">Section 50.6</a>). 
</p>
</td>
</tr>
<tr>
<td>
<p>Permissions</p>
</td>
<td>
<p><tt class="literal">r</tt></p>
</td>
<td>
<p>Read access.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">w</tt></p>
</td>
<td>
<p>Write access.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">x</tt></p>
</td>
<td>
<p>Execute access.</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">X</tt></p>
</td>
<td>
<p>Give (or deny) execute permission to directories, or to files that
have another "execute" bit set.
</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">s</tt></p>
</td>
<td>
<p>Set user or group ID (only valid with <tt class="literal">+</tt> or
<tt class="literal">-</tt>).
</p>
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
<p><tt class="literal">t</tt></p>
</td>
<td>
<p>Set the<b class="emphasis-bold"> "sticky
bit"</b> (<a href="ch50_04.htm#upt3-CHP-50-SECT-4">Section 50.4</a>, <a href="ch01_17.htm#upt3-CHP-1-SECT-17">Section 1.17</a>).
</p>
</td>
</tr>

</table><p>

<p>(<a href="ch50_02.htm#upt3-CHP-50-SECT-2">Section 50.2</a> explains the
"Who" and
"Permissions" categories.) Here are
a few example symbolic modes:
</p>

<dl>
<dt><tt class="literal">o=r</tt></dt>
<dd>
Set others access to read-only, regardless of what other bits are set.</p>
</dd>


<dt><tt class="literal">o+r</tt></dt>
<dd>
Add read access for others.</p>
</dd>


<dt><tt class="literal">go-w</tt></dt>
<dd>
Take away write access for group members and others.</p>
</dd>


<dt><tt class="literal">a=rw</tt></dt>
<dd>
Give everyone (user, group, and others) read-write (but not execute)
access.
</p>
</dd>

</dl>

<p><a name="IXT-50-1057" />Remember that
<tt class="literal">+</tt> and <tt class="literal">-</tt> add or delete certain
permissions but leave the others untouched. The commands below show
how permissions are added and subtracted:
</p>

<blockquote><pre class="code">% <tt class="userinput"><b>ls -l foo</b></tt>
-rwx-----x  1 mikel           0 Mar 30 11:02 foo
% <tt class="userinput"><b>chmod a+x foo</b></tt>
% <tt class="userinput"><b>ls -l foo</b></tt>
-rwx--x--x  1 mikel           0 Mar 30 11:02 foo
% <tt class="userinput"><b>chmod o-x,g+r foo</b></tt>
% <tt class="userinput"><b>ls -l foo</b></tt>
-rwxr-x---  1 mikel           0 Mar 30 11:02 foo
%</pre></blockquote>

<p>Note the last <i class="command">chmod</i> command. It shows something we
haven't mentioned before. With symbolic mode,
you're allowed to combine two (or more)
specifications, separated by commas. This command says
"take away execute permission for others, and add
read access for group members."
</p>

<p><a name="IXT-50-1058" /> <a name="IXT-50-1059" /><a name="IXT-50-1060" />On occasion, I've
wanted to change the permissions of a whole directory tree: all the
files in a directory and all of its subdirectories. In this case, you
want to use <em class="emphasis">chmod -R</em> (the <em class="emphasis">R</em>
stands for recursive) or <b class="emphasis-bold">find -exec</b>
(<a name="IXT-50-1061" /><a href="ch09_09.htm#upt3-CHP-9-SECT-9">Section 9.9</a>, <a href="ch50_06.htm#upt3-CHP-50-SECT-6">Section 50.6</a>). You won't need this often,
but when you do, it's a real lifesaver.
</p>

<p> <em class="emphasis">-- ML</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch50_04.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch50_06.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">50.4. Protecting Files with the Sticky Bit</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">50.6. The Handy chmod = Operator</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>