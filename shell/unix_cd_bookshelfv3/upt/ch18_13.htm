<html><head><title>vi Macro for Splitting Long Lines (Unix Power Tools, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Shelley Powers, Jerry Peek, Tim O'Reilly, Mike Loukides and  " /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00330-7" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="UNIX Power Tools, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Unix Power Tools" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Unix Power Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch18_12.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch18_14.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">18.13. vi Macro for Splitting Long Lines</h2>

<p><a name="IXT-18-1733" /><a name="IXT-18-1734" /> <a name="IXT-18-1735" />When you add text to the start
of a line and make the line longer than your
screen's width, <i class="command">vi</i>
won't break
("wrap") the line unless your
cursor crosses the <em class="emphasis">wrapmargin</em> point near the
righthand edge of the screen. You can get lines that are too long.
</p>

<p>Here are two macros that cut (Kut) the current line: </p>

<p><img src="figs/www.gif" alt="Figure " width="25" /> Go to <a href="http://examples.oreilly.com/upt3">http://examples.oreilly.com/upt3</a> for more information on: exrc</p>

<blockquote><pre class="code">map K 78^V|lBhr^M
map K 078lF r^M</pre></blockquote>

<p>The first macro doesn't seem to work on some
versions of <i class="command">vi</i>. It's the better
one though, because it uses the <tt class="literal">|</tt> (vertical bar)
command to move to column 78, even if there are TABs in the line.
Then it moves one more character to the right (if it can), moves back
to the start of the word, moves back one more character onto the
blank or TAB before the word, and replaces that character with a
RETURN.
</p>

<p>The second macro counts TABs as single characters, but it works on
every version of <i class="command">vi</i> I've tried.
It moves to the left edge, then to the 79th character, then back to
the previous space. Finally, it replaces that space with a carriage
return.
</p>

<p>You might try adding a <tt class="literal">J</tt> to the start of either
macro. That'll join the next line to the current one
before cutting; it might make a nicer
"wrap." Another way to do this is
with a <b class="emphasis-bold">filter-through</b> (<a href="ch17_18.htm#upt3-CHP-17-SECT-18">Section 17.18</a>) and the <b class="emphasis-bold">fmt</b>
(<a href="ch17_28.htm#upt3-CHP-17-SECT-28">Section 17.28</a>) command:
</p>

<blockquote><pre class="code"><tt class="userinput"><b>!!fmt</b></tt></pre></blockquote>

<p>That will break the current line neatly, though it also might change
the spacing after periods (.) or replace leading TABs with spaces.
<a name="IXTR3-1743" />
</p>

<p> <em class="emphasis">-- JP</em></p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch18_12.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch18_14.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">18.12. Don't Lose Important Functions with vi Maps: Use noremap</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">18.14. File-Backup Macros</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>