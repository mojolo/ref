<html><head><title>Next (sed & awk, Second Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Dale Dougherty and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-225-5" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="sed &amp; awk, Second Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="sed &amp; awk" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="sed &amp; awk" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_09.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch05_11.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">5.10. Next</h2>

<p>
<a name="IXT-5-265735" />
<a name="IXT-5-265736" />
The next command (<b class="emphasis-bold">n</b>) outputs the contents of the
pattern space and then reads the next line of input
<em class="emphasis">without</em> returning to the top of the script.  Its
syntax is:</p>

<blockquote><pre class="code">[<em class="replaceable"><tt>address</tt></em>]<b class="emphasis-bold">n</b></pre></blockquote><p>
<a name="IXT-5-265737" />
The next command changes the normal flow control, which doesn't output
the contents of the pattern space until the bottom of the script is
reached and which always begins at the top of the script after reading
in a new line.  In effect, the next command causes the next line of
input to replace the current line in the pattern space.  Subsequent
commands in the script are applied to the replacement line, not the
current line.  If the default output has not been suppressed, the
current line is printed before the replacement takes place.</p>

<p>Let's look at an example of the next command in which we delete a
blank line only when it follows a pattern matched on the previous
line.  In this case, a writer has inserted a blank line after a
section heading macro (<b class="emphasis-bold">.H1</b>).  We want to remove
that blank line without removing all blank lines in the file.  Here's
the sample file:</p>

<blockquote><pre class="code">.H1 "On Egypt"

Napoleon, pointing to the Pyramids, said to his troops: 
"Soldiers, forty centuries have their eyes upon you."</pre></blockquote>

<p>The following script removes that blank line:</p>

<blockquote><pre class="code">/^\.H1/{
n
/^$/d
}</pre></blockquote>

<p>You can read this script as follows: "Match any line beginning with
the string `.H1', then print that line and read in the next line.  If
that line is blank, delete it."  The braces are used to apply multiple
commands at the same address.</p>

<p>In a longer script, you must remember that commands occurring
before the next command will not be applied to the new input line, nor
will commands occuring after it be applied to the old input line.</p>

<p>You'll see additional examples of the <b class="emphasis-bold">n</b> command
in <a href="ch06_01.htm">Chapter 6, "Advanced sed
Commands"</a>, along with a multiline version of
this command.</p>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_09.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch05_11.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">5.9. Print Line Number</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">5.11. Reading and Writing Files</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>