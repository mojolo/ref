<html><head><title>Using the Terminal (Mac OS X for Unix Geeks)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Brian Jepson and Ernest E. Rothman" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00356-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Mac OS X for Unix Geeks" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Mac OS X for Unix Geeks" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch01_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch01_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">1.3. Using the Terminal</h2>

<p>The first order of business when exploring a new flavor of Unix is to
find the <a name="IXT-1-57" />command prompt. In Mac OS X, you
won't find the command prompt in the Dock or on a
Finder menu. The Terminal application is instead located in the
<em class="filename">/Applications/Utilities
</em><a name="IXT-1-58" />directory. Don't open it
just yet, though. First, drag the Terminal's
application icon to the <a name="IXT-1-59" />Dock so you'll
have quick access to it when you need to use the Terminal. To launch
the Terminal, click its icon in the Dock once, or double-click on its
icon in the Finder view.
</p>



<a name="ch01-6-fm2xml" /><blockquote><b>TIP:</b> 
The full path to the Terminal is
<em class="filename">/Applications/Utilities/Terminal.app</em>, although
the Finder hides the
<em class="filename">.app</em><a name="IXT-1-60" /> extension.
<em class="filename">Terminal.app</em> is not a binary file. Instead,
it's a Mac OS X <em class="emphasis">package</em>, which
contains a collection of files, including the binary and support
files. You can Control-click (or right-click) on the Terminal in the
Finder and select Show Package Contents to see
what's inside.
</p>
</blockquote>

<p>After the Terminal starts, you'll be greeted by the
banner message from <em class="filename">/etc/motd</em> and a
<em class="filename">tcsh</em> prompt, as shown in <a href="ch01_03.htm#mosxgeeks-CHP-1-FIG-1">Figure 1-1</a>. 
</p>

<a name="mosxgeeks-CHP-1-FIG-1" /><div class="figure"><img src="figs/mud_0101.gif" alt="Figure 1-1" width="423" /></div><h4 class="objtitle">Figure 1-1. The Terminal window</h4>

<a name="mosxgeeks-CHP-1-SECT-3.1" /><div class="sect2">
<h3 class="sect2">1.3.1. Launching Terminals</h3>

<p><a name="mosxgeeks-IDXTERM-32" /> <a name="mosxgeeks-IDXTERM-33" />One
difference <em class="filename">xterm</em> users will notice is that there
is no obvious way to launch a new Terminal window from the command
line. For example, Mac OS X has no equivalent to the following
commands:
</p>

<blockquote><pre class="code">xterm &amp;
xterm -e -fg green -bg black -e pine -name pine -title pine &amp;</pre></blockquote>

<p>Instead, you can create a new Terminal window by typing
<img src="figs/command.gif" alt="Figure " />-N or selecting File
<img src="figs/U2192.gif" alt="Figure " /> New Shell from the menu bar.
</p>


<a name="ch01-9-fm2xml" /><blockquote><b>TIP:</b> 
To cycle between open Terminals, you can press
<img src="figs/command.gif" alt="Figure " />-Right Arrow or
<img src="figs/command.gif" alt="Figure " />-Left Arrow, use the Window menu, or
Control-click on the Terminal's Dock icon to reveal
a context menu of open Terminals. You can also jump to a particular
Terminal window with <img src="figs/command.gif" alt="Figure " />
-<em class="replaceable"><tt>number</tt></em> (see the Window menu for a list of
numbers).
</p>
</blockquote>

<p>You can customize startup options for new Terminal windows by
creating <em class="filename">.term</em> and <em class="filename">.command</em>
files.
</p>

<a name="mosxgeeks-CHP-1-SECT-3.1.1" /><div class="sect3">
<h3 class="sect3">1.3.1.1. .term files</h3>

<p><a name="IXT-1-61" />You can launch a
customized Terminal window from the command line by saving some
prototypical Terminal settings to a <em class="filename">.term</em> file,
then using the <em class="filename">open</em> command to launch the
<em class="filename">.term</em> file (see
"open<em class="filename">"</em> in <a href="ch01_05.htm#mosxgeeks-CHP-1-SECT-5.4">Section 1.5.4</a>, later in this chapter). You should save the
<em class="filename">.term</em> file someplace where you can find it
later, such as <em class="filename">~/bin</em> or
<em class="filename">~/Documents</em>. If you save it in
<em class="filename">~/Library/Application Support/Terminal</em>, the
<em class="filename">.term</em> file will show up in
Terminal's File <img src="figs/U2192.gif" alt="Figure " /> Library menu.
</p>

<p>To create a <em class="filename">.term</em> file, open a new Terminal
window, and then open the Inspector (File <img src="figs/U2192.gif" alt="Figure " /> Show
Info, or <img src="figs/command.gif" alt="Figure " />-I) and set the desired
attributes, such as window size, fonts, and colors. When the
Terminal's attributes have been set, save the
Terminal session (File <img src="figs/U2192.gif" alt="Figure " /> Save, or
<img src="figs/command.gif" alt="Figure " />-S) to a <em class="filename">.term</em>
file (for example, <em class="filename">~/Documents/proto.term</em>). Now,
any time you want to launch a Terminal window from the command line,
you can issue the following command:
</p>

<blockquote><pre class="code">open ~/Documents/proto.term</pre></blockquote>



<a name="ch01-12-fm2xml" /><blockquote><b>TIP:</b> 
You can also double-click on
<em class="filename">proto.term</em><a name="IXT-1-62" />
in the Finder to launch a Terminal window. See
"bindkey" under <a href="ch01_05.htm#mosxgeeks-CHP-1-SECT-5.4">Section 1.5.4</a>, later in this chapter, for an example of binding a key
sequence to this command.
</p>
</blockquote>

<p>The <em class="filename">.term</em> file is an XML property list
(<em class="filename">plist</em>) that you can edit by hand or with the
<em class="filename">Property List Editor</em> application
(<em class="filename">/Developer/Applications</em>).<a href="#FOOTNOTE-2">[2]</a> By default, opening
the <em class="filename">.term</em> file creates a new Terminal window.
You can configure the window so it executes a command by adding an
<tt class="literal">execution string</tt><a name="IXT-1-63" /> to the <em class="filename">.term</em> file.
When you launch the Terminal, this string is echoed to standard
output before it is executed. <a href="ch01_03.htm#mosxgeeks-CHP-1-EX-1">Example 1-1</a> shows an
execution string that connects to a remote host via <em class="filename">ssh
</em>and exits when you log out.
</p><blockquote class="footnote"> <a name="FOOTNOTE-2" /><p> [2]For
more information on XML, see <em class="emphasis">Learning XML</em>
(O'Reilly) or <em class="emphasis">XML in a Nutshell</em>
(O'Reilly).</p> </blockquote>

<a name="mosxgeeks-CHP-1-EX-1" /><div class="example">
<h4 class="objtitle">Example 1-1. An execution string to connect to a remote host  </h4><a name="IXT-1-64" />
<blockquote><pre class="code">&lt;key&gt;ExecutionString&lt;/key&gt;
&lt;string&gt;ssh xyzzy.oreilly.com; exit&lt;/string&gt;</pre></blockquote>
</div>

</div>

<a name="mosxgeeks-CHP-1-SECT-3.1.2" /><div class="sect3">
<h3 class="sect3">1.3.1.2. .command files</h3>

<p>Adding the <em class="filename">.command</em><a name="IXT-1-65" /> extension to any executable shell script
will turn it into a<a name="IXT-1-66" />
<a name="IXT-1-67" /> double-clickable executable.
The effect is similar to that of a <em class="filename">.term</em> file,
except that you can't control the
Terminal's characteristics in the same way. (A
<em class="filename">.command</em> file will use the default Terminal
settings.) However, you can stuff the shell script full of
<em class="filename">osascript</em><a name="IXT-1-68" /> commands to set the Terminal
characteristics after it launches. An <em class="filename">osascript</em>
is a shell command that lets you run AppleScript from the command
line.<a href="#FOOTNOTE-3">[3]</a> <a href="ch01_03.htm#mosxgeeks-CHP-1-EX-2">Example 1-2</a> is a shell script that sets the size and title
of the Terminal, and then launches the <em class="filename">pico</em>
editor.
</p><blockquote class="footnote"> <a name="FOOTNOTE-3" /><p> [3]To learn more about AppleScript, see
<em class="emphasis">AppleScript in a Nutshell</em>
(O'Reilly).</p> </blockquote>

<a name="mosxgeeks-CHP-1-EX-2" /><div class="example">
<h4 class="objtitle">Example 1-2. Launching the pico editor
  </h4><a name="IXT-1-69" /><a name="IXT-1-70" />
<blockquote><pre class="code">#!/bin/sh 
# Script RunPico.command
osascript  &lt;&lt;EOF
tell app "Terminal"
  set number of rows of first window to 34
  set number of columns of first window to 96
  set custom title of first window to "PICO Editor"
end tell
EOF
pico $@</pre></blockquote>
</div>

<p>If you don't want to give the shell a
<em class="filename">.command</em> extension, you could also use the
Finder's Get Info option (File <img src="figs/U2192.gif" alt="Figure " />
Get Info, or <img src="figs/command.gif" alt="Figure " />-I) to choose which
application will open with the executable. To do this, perform the
following steps:
</p>

<ol><li>
<p>Highlight the script's icon in the Finder. </p>
</li><li>
<p>Choose Get Info from the File menu.</p>
</li><li>
<p>In the Get Info dialog, choose Open with:.</p>
</li><li>
<p>Click the drop-down menu and choose Other.</p>
</li><li>
<p>In the Choose Other Application dialog, select All Applications
rather than Recommended Applications.
</p>
</li><li>
<p>Find and choose the Terminal
(<em class="filename">Applications/Utilities</em>) application.
</p>
</li><li>
<p>Click Add.</p>
</li><li>
<p>Close the Get Info window (<img src="figs/command.gif" alt="Figure " />
-W).</p>
</li></ol>
<p>As with any double-clickable application, you can assign a
custom-made icon to your shell scripts and place them in the Dock. To
change an icon, use the following procedure.
</p>

<ol><li>
<p>Copy the desired icon to the clipboard.</p>
</li><li>
<p>Select your script in the Finder and open the Get Info window
(<img src="figs/command.gif" alt="Figure " />-I). The file's icon
appears in the upper-left corner.
</p>
</li><li>
<p>Click the current icon, and use the Paste option (Edit
<img src="figs/U2192.gif" alt="Figure " /> Paste, or <img src="figs/command.gif" alt="Figure " />-V) to
paste the new icon over it.
</p>
</li><li>
<p>Close the Get Info window (<img src="figs/command.gif" alt="Figure " />-W) to save
the icon to the application.
</p>
</li><li>
<p>To add the shell script application to the Dock, locate the
application in the Finder and drag its icon to the Dock.
</p>
</li></ol>
<p>Now you can click on the script's Dock icon to
invoke the script.
</p>

</div>
</div>
<a name="mosxgeeks-CHP-1-SECT-3.2" /><div class="sect2">
<h3 class="sect2">1.3.2. Customizing the Terminal</h3>

<p>To customize the shell used by the Terminal, start by changing the
Terminal's Preferences (Terminal <img src="figs/U2192.gif" alt="Figure " />
Preferences). On the preference pane, you can tell Terminal to
execute the default shell at startup or a specific command (such as
an alternative shell).<a href="#FOOTNOTE-4">[4]</a>
</p><blockquote class="footnote"> <a name="FOOTNOTE-4" /><p> [4]Although you can change the
default shell in the Terminal preferences, this does not affect the
login shell used for remote or console logins. See <a href="ch03_01.htm">Chapter 3</a> for instructions on changing a
user's default shell.</p> </blockquote>

<p>You can also adjust the Terminal's characteristics
using Terminal <img src="figs/U2192.gif" alt="Figure " /> Window Settings (or
<img src="figs/command.gif" alt="Figure " />-I), which brings up the
<a name="IXT-1-71" />Terminal
Inspector, shown in <a href="ch01_03.htm#mosxgeeks-CHP-1-FIG-2">Figure 1-2</a>. <a href="ch01_03.htm#mosxgeeks-CHP-1-TABLE-1">Table 1-1</a> lists the available window settings. Changing
these settings affects only the topmost Terminal window. If you want
to change the default settings for all future Terminal windows, click
the Use Settings As Defaults button at the bottom of the Terminal
Inspector window.
</p>

<a name="mosxgeeks-CHP-1-FIG-2" /><div class="figure"><img src="figs/mud_0102.gif" alt="Figure 1-2" width="223" /></div><h4 class="objtitle">Figure 1-2. The Terminal Inspector</h4>

<a name="mosxgeeks-CHP-1-TABLE-1" /><h4 class="objtitle">Table 1-1. Window settings </h4><table border="1" cellpadding="3">



<tr>
<th>
<p>Pane</p>
</th>
<th>
<p>Description</p>
</th>
</tr>


<tr>
<td>
<p>Shell</p>
</td>
<td>
<p>Displays the shell used by the Terminal and lets you choose whether
to close the Terminal window when the shell exits.
</p>
</td>
</tr>
<tr>
<td>
<p>Processes</p>
</td>
<td>
<p>Displays the processes running under the frontmost window. You can
also control whether Terminal will warn you if you try to close the
window while you are running a program. You can disable this by
choosing Never under "Prompt before closing
window". You can also supply a list of commands that
should be ignored, so if you're running a program
(such as <em class="emphasis">vi</em> or <em class="emphasis">Emacs</em>)
that's not in the list, the Terminal will warn you
before closing the window.
</p>
</td>
</tr>
<tr>
<td>
<p>Emulation</p>
</td>
<td>
<p>Controls the Terminal emulation properties.</p>
</td>
</tr>
<tr>
<td>
<p>Buffer</p>
</td>
<td>
<p>Sets the size and properties of the scrollback buffer.</p>
</td>
</tr>
<tr>
<td>
<p>Display</p>
</td>
<td>
<p>Changes the character set encoding, cursor style, font, and other
attributes.
</p>
</td>
</tr>
<tr>
<td>
<p>Color</p>
</td>
<td>
<p>Changes colors and transparency of the Terminal window.</p>
</td>
</tr>
<tr>
<td>
<p>Window</p>
</td>
<td>
<p>Controls window dimensions, title, and other settings.</p>
</td>
</tr>

</table><p>

<p>One useful option available in the Emulation tab is
"Option <a name="IXT-1-72" />
<a name="IXT-1-73" />click to position
cursor". If you enable this feature, you will be
able to Option-click with the mouse to position the cursor in
Terminal applications such as <em class="emphasis">vi</em> or
<em class="emphasis">Emacs</em> (this could save you many keystrokes when
you need to move the insertion point). This option also works over a
remote login session, assuming that this is supported by the remote
host's terminal capabilities.
</p>

</div>
<a name="mosxgeeks-CHP-1-SECT-3.3" /><div class="sect2">
<h3 class="sect2">1.3.3. Customizing the Terminal on the Fly</h3>

<p>You can customize the Terminal in shell scripts using escape
sequences or AppleScript commands. <em class="filename">xterm </em>users
may be familiar with using the following to set the
<em class="emphasis">xterm</em>'s title:
</p>

<blockquote><pre class="code">echo '^[]2;My-Window-Title^G'</pre></blockquote>

<p>Mac OS X's Terminal accepts this sequence as well.</p>



<a name="ch01-16-fm2xml" /><blockquote><b>TIP:</b> 
<tt class="literal">^[</tt> is the ASCII ESC character, and
<tt class="literal">^G</tt> is the ASCII BEL character. (The BEL character
is used to ring the terminal bell, but in this context, it terminates
an escape sequence.) The <a name="IXT-1-74" />escape sequences described here are
ANSI escape sequences, which differ from the shell escape sequences
described earlier. ANSI escape sequences are used to manipulate a
Terminal window (such as by moving the cursor or setting the title).
Shell escape sequences are used to tell the shell to treat a
metacharacter, such as <tt class="literal">|</tt>, as a literal character
rather than an instruction to pipe standard output somewhere else.
</p>
</blockquote>

<p>To type the <tt class="literal">^[</tt> characters in
<em class="filename">tcsh</em>, use the key sequence Control-V Escape
(press Control-V and release, then press the Escape key). To type
<tt class="literal">^G</tt>, use Control-V Control-G. The
<em class="filename">vi</em> editor supports the same key sequence;
<em class="emphasis">Emacs</em> uses Control-Q instead of Control-V.
</p>

<p>You can capture this escape sequence in a shell alias:</p>

<blockquote><pre class="code">alias settitle 'echo -n "^[]2;\!*^G"'</pre></blockquote>

<p>Then you can change the title by issuing this command:</p>

<blockquote><pre class="code">settitle <em class="replaceable"><tt>your fancy title here</tt></em></pre></blockquote>

<p>You may want to package this as a shell script and make it available
to everyone who uses your system, as shown in <a href="ch01_03.htm#mosxgeeks-CHP-1-EX-3">Example 1-3</a>. 
</p>

<a name="mosxgeeks-CHP-1-EX-3" /><div class="example">
<h4 class="objtitle">Example 1-3. Setting the Terminal title in a shell script  </h4><a name="IXT-1-75" />
<blockquote><pre class="code">#!/bin/sh 
#
# Script settitle
# Usage:  settitle title
#
if [ $# == 0 ]; then
  echo "Usage:  settitle title"
else
  echo -n "^[]2;$1^G"
fi</pre></blockquote>
</div>

<p>You can also use <em class="filename">osascript</em> to execute
AppleScript commands that accomplish the same thing:
</p>

<a name="IXTR3-293" /><a name="IXTR3-294" /><a name="IXTR3-295" /><blockquote><pre class="code">osascript -e \
  'tell app "Terminal" to set custom title of first window to "Hello,
World"'</pre></blockquote>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch01_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch01_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">1.2. The Terminal and xterm Compared</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">1.4. The Services Menu</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>