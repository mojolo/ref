<html><head><title>Compiling Source Code (Mac OS X for Unix Geeks)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Brian Jepson and Ernest E. Rothman" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00356-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Mac OS X for Unix Geeks" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Mac OS X for Unix Geeks" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="part2.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch04_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>


<h1 class="chapter">Chapter 4. Compiling Source Code</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4><p>
<a href="ch04_01.htm#sect1">Compiler Differences</a><br />
<a href="ch04_02.htm">Compiling Unix Source Code</a><br />
<a href="ch04_03.htm">Architectural Issues</a><br /></p></div><p><a name="mosxgeeks-IDXTERM-257" /> <a name="mosxgeeks-IDXTERM-258" /> <a name="mosxgeeks-IDXTERM-259" />The Mac OS X Developer Tools
are available from Apple and provide a development environment that
will be familiar to any Unix developer whoworks
with command-line compilers. For details about obtaining these tools,
see the "Developer Tools" section
in the Preface. The Developer Tools include all sorts of other
goodies, including an advanced Integrated Development Environment
(IDE), but coverage of those tools is beyond the scope and intent of
this book. To learn more about the <a name="IXT-4-444" /> <a name="IXT-4-445" />Developer Tools, you can see
<em class="filename">/Developer/Documentation/DeveloperTools/devtools.html</em>.
You can also learn how to use Project Builder and Interface Builder
and how to program Cocoa applications with Objective-C in
<em class="emphasis">Learning Cocoa with Objective-C</em>
(O'Reilly) and <em class="filename">Building Cocoa
Applications: A Step-by-Step Guide</em>
(O'Reilly).
</p><p>The <a name="IXT-4-446" />C compiler
that comes with the Developer Tools is based on the Free Software
Foundation's <a name="IXT-4-447" />GNU Compiler Collection, or GCC.
Apple's modifications to GCC include the addition of
Objective-C to the compiler suite, as well as various modifications
to deal with the Darwin operating system. The development environment
in <a name="IXT-4-448" />Mac OS X includes:
</p><dl>
<a name="IXT-4-449" /><dt><i>AppleScript</i></dt>
<dd>
This is an English-like language used to script applications and the
operating system. AppleScript is installed as part of the Mac OS X
operating system and does not require the Developer Tools package.
</p>
</dd>



<dt><i>AppleScript Studio</i></dt>
<dd>
This is a high-level development environment based on AppleScript
that allows you to build GUI applications by hooking AppleScript into
the Cocoa frameworks. AppleScript Studio is installed along with the
Developer Tools package.
</p>
</dd>



<dt><i>Compilers</i></dt>
<dd>
These <a name="IXT-4-450" />compilers
are based on GCC and provide support for C, C++, Objective-C,
Objective-C++, and assembly.
</p>
</dd>



<a name="IXT-4-451" /><dt><i>Compiler Tools</i></dt>
<dd>
These include the Mac OS X Mach-O GNU-based assemblers, Mach-O static
link editor, Mach-O dynamic link editor, and Mach-O object file
tools, such as <em class="filename">nm</em> and
<em class="filename">otool</em>.
</p>
</dd>



<dt><i>Documentation</i></dt>
<dd>
There is extensive documentation for the Apple
<a name="IXT-4-452" />Developer Tools (provided by Apple).
Available in both HTML and PDF formats, the developer documentation
can be found in <em class="filename">/Developer/Documentation</em></tt>. The
documents are also available online from the
<a name="IXT-4-453" /> <a name="IXT-4-454" />
<a name="IXT-4-455" /> <a name="IXT-4-456" />Apple Developer Connection
(ADC) web site (<a href="http://connect.apple.com">http://connect.apple.com</a>).
</p>
</dd>

</dl><a name="ch04-3-fm2xml" /><blockquote><b>TIP:</b> 
You can also access the documentation for GCC with your web browser
by going to
<em class="filename">/Developer/Documentation/DeveloperTools/Compiler/CompilerTOC.html</em></tt>.
</p>
</blockquote><dl>
<dt><i>Debugger</i></dt>
<dd>
The Apple <a name="IXT-4-457" /> <a name="IXT-4-458" />debugger is based on GNU
<em class="filename">gdb</em>.
</p>
</dd>



<dt><i>Miscellaneous Tools</i></dt>
<dd>
These include traditional <a name="IXT-4-459" />development tools, such as GNU
<em class="filename">make</em></tt> and GNU <em class="filename">libtool</em></tt>,
graphical and command-line performance tools, Project Builder for
WebObjects (Mac OS X Server), and an extensive set of Java
development tools.
</p>
</dd>



<a name="IXT-4-460" /><dt><i>Project Builder</i></dt>
<dd>
This is an integrated development environment for Mac OS X that
supports Cocoa and Carbon programming with C, C++, Objective-C, and
Java.
</p>
</dd>



<a name="IXT-4-461" /><dt><i>Interface Builder</i></dt>
<dd>
This is a graphical user interface editor for Cocoa and Carbon
applications.
</p>
</dd>

</dl><p>We will not address the complete Mac OS X development suite in this
chapter. Instead, we will focus on the command-line development tools
and how they differ from the implementations on other Unix platforms.
</p><p>Java programmers will find that the Mac OS X command-line Java tools
(see <a href="ch01_06.htm#mosxgeeks-CHP-1-SECT-6.4">Section 1.6.4</a>) behave as they do under Unix and
Linux.
</p><p>Perl programmers coming from previous Macintosh systems will find
that Mac OS X does not use <a name="IXT-4-462" />MacPerl (<a href="http://www.macperl.com">http://www.macperl.com</a>), but instead, uses
the standard Unix build of the core Perl distribution (<a href="http://www.perl.org">http://www.perl.org</a>).
</p><div class="sect1"><a name="mosxgeeks-CHP-4-SECT-1" />
<h2 class="sect1"><a name="sect1" />4.1. Compiler Differences</h2>

<p><a name="IXT-4-463" /> <a name="IXT-4-464" />GCC
<a name="IXT-4-465" />is supported on a
wide range of platforms and is familiar to most Unix developers. A
natural consequence of this is that most Unix developers will find a
familiar development environment in Mac OS X. There are, however,
some important differences.
</p>

<p>One difference that experienced GCC users may notice, particularly if
they have dealt with a lot of mathematical and scientific
programming, is that Mac OS X's Developer Tools do
not include <a name="IXT-4-466" />FORTRAN.
However, the <a name="IXT-4-467" />
<a name="IXT-4-468" />Fink<em class="filename">
</em></tt>distribution (<a href="http://fink.sourceforge.net">http://fink.sourceforge.net</a>) includes
<em class="filename">g77</em></tt><a name="IXT-4-469" /> <a name="IXT-4-470" />, the GNU FORTRAN
'77 compiler. Also, the Darwin archive includes the
source code for <em class="filename">g77</em></tt>, which you can use to
compile FORTRAN code. For more information on the Darwin CVS archive,
see <a href="ch07_01.htm">Chapter 7</a>.
</p>


<a name="ch04-6-fm2xml" /><blockquote><b>TIP:</b> 
Mac OS X's <a name="IXT-4-471" /> <a name="IXT-4-472" />C compiler contains a number of Mac OS
X-specific features that have not been folded into the main GCC
distribution. (It is up to the Free Software Foundation (FSF) to
accept and merge Apple's patches.) For information
on how Apple's compiler differs from the GNU
version, see the <em class="filename">README.Apple</em></tt> file in the Darwin
CVS archive's <em class="filename">gcc3</em></tt>
subdirectory.
</p>
</blockquote>

<p>As of this writing, Apple's
<em class="filename">cc</em></tt><a name="IXT-4-473" /> compiler is based on GCC 3.1. However,
GCC 2.95 is also available as <em class="filename">/usr/bin/gcc2</em></tt>. By
default, invoking <em class="filename">cc</em></tt> or <em class="filename">gcc</em></tt>
will invoke GCC 3.1. You can change this to GCC 2.95 by running the
command <em class="filename">gcc_select 2</em></tt>, and you can change it back
with <em class="filename">gcc_select 3</em></tt>. You can see the current
settings by running <em class="filename">gcc_select</em></tt> with no
arguments:
</p>

<blockquote><pre class="code">% <b class="emphasis-bold">gcc_select</b> 
Apple Computer, Inc. GCC version 1161, based on gcc version 3.1
20020420 (prerelease)</pre></blockquote>


<a name="ch04-8-fm2xml" /><blockquote><b>TIP:</b> 
You can find the Mac OS X Compiler Release Notes on your system at
<em class="emphasis">/Developer/Documentation/ReleaseNotes/Compiler.html</em></tt>.
You should consult these release notes for details on the most
current known problems, issues, and features.
</p>
</blockquote>

<a name="mosxgeeks-CHP-4-SECT-1.1" /><div class="sect2">
<h3 class="sect2">4.1.1. AltiVec</h3>

<p>The <a name="IXT-4-474" /> <a name="IXT-4-475" />Motorola AltiVec Velocity
Engine is also supported for G4 processors by the Mac OS X GCC
implementation. The compiler flag -<em class="filename">faltivec </em></tt>must
be specified to compile code engineered to use the Velocity Engine.
Inclusion of this command-line option to <em class="filename">cc</em></tt>
defines the preprocessor symbol <tt class="literal">_ _VEC_ _</tt>.
</p>

</div>
</div>

<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="part2.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch04_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">II. Building Applications</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">4.2. Compiling Unix Source Code</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
      </map>

</body></html>