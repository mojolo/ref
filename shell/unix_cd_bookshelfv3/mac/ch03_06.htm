<html><head><title>NetInfo Command Reference (Mac OS X for Unix Geeks)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Brian Jepson and Ernest E. Rothman" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00356-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Mac OS X for Unix Geeks" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Mac OS X for Unix Geeks" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch03_07.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">3.6. NetInfo Command Reference</h2>

<p>This section provides an overview of the NetInfo command-line
utilities used in this chapter. The following sections, <a href="ch03_07.htm#mosxgeeks-CHP-3-SECT-7">Section 3.7</a> and <a href="ch03_08.htm#mosxgeeks-CHP-3-SECT-8">Section 3.8</a>,
demonstrate how to use <em class="filename">nicl</em>,
<em class="filename">nireport</em>, <em class="filename">nidump</em>, and
<em class="filename">niload</em>. For more details on these or other
NetInfo utilities, see their respective
<a name="IXT-3-397" /> <a name="IXT-3-398" />manpages.
</p>

<a name="ch03-15-fm2xml" /><a name="IXT-3-399" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>nidump</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Syntax</h4>

<blockquote><pre class="code">nidump [-T <em class="replaceable"><tt>timeout</em>] (-r <em class="replaceable">directory</em>|<em class="replaceable">format</em>) [-t] <em class="replaceable">domain</tt></em></pre></blockquote>


<h4 class="refsect1">Description</h4>

<p>You can dump NetInfo information in a flat file format (such as the
<em class="filename">/etc/hosts</em> format) or in a raw format that uses
a C-like syntax:
</p>
<blockquote><pre class="code">{
  "name" = ( "localhost" );
  "ip_address" = ( "127.0.0.1" );
  "serves" = ( "./local" );
}</pre></blockquote>


<h4 class="refsect1">Options</h4>

<dl>
<dt><i><em class="filename">-T</em></tt> <tt><em class="replaceable"><tt>timeout</tt></em></tt></i></dt>
<dd>
Specifies a timeout in seconds.</p>
</dd>



<dt><i><em class="filename">-t</em></tt></i></dt>
<dd>
Treats the domain as a tagged domain, which includes a machine name
and a tagged NetInfo database. For example,
<em class="filename">abbot/local</em> refers to the local NetInfo domain
of the machine named <em class="emphasis">abbot</em>.
</p>
</dd>



<dt><i><em class="filename">-r</em></tt> <tt><em class="replaceable"><tt>directory</tt></em></tt></i></dt>
<dd>
Dumps the directory in raw format. Directory should be a path to a
NetInfo directory, such as <em class="filename">/users/root</em></tt> or
<em class="filename">/machines</em></tt>.
</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>format</tt></em></tt></i></dt>
<dd>
Specifies a format corresponding to a Unix flat file of the same
name. Can be one of: <em class="filename">aliases</em>,
<em class="filename">bootptab</em>, <em class="filename">bootparams</em>,
<em class="filename">ethers</em>, <em class="filename">exports</em>,
<em class="filename">fstab</em>, <em class="filename">group</em>,
<em class="filename">hosts</em>, <em class="filename">networks</em>,
<em class="filename">passwd</em>, <em class="filename">printcap</em>,
<em class="filename">protocols</em>, <em class="filename">resolv.conf</em>,
<em class="filename">rpc</em>, <em class="filename">services</em>, or
<em class="filename">mountmaps</em>.
</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>domain</tt></em></tt></i></dt>
<dd>
Specifies a NetInfo domain. For standalone machines, use a dot
(<tt class="literal">.</tt>), which refers to the local domain.
</p>
</dd>

</dl>

</div>

<a name="ch03-19-fm2xml" /><a name="IXT-3-400" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>nireport</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Syntax</h4>

<blockquote><pre class="code">nireport [-T timeout] [-t] <tt><em class="replaceable"><tt>domain</em></tt> <tt><em class="replaceable">directory</em></tt> [<tt><em class="replaceable">property ...</tt></em></tt>]</pre></blockquote>


<h4 class="refsect1">Description</h4>
<p>You can list all NetInfo groups by using the
<em class="filename">nireport</em></tt> utility. To use
<em class="filename">nireport</em></tt>, use the following syntax:
</p>

<h4 class="refsect1">Options</h4>

<dl>
<dt><i><em class="filename">-T</em></tt> <tt><em class="replaceable"><tt>timeout</tt></em></tt></i></dt>
<dd>
Specifies a timeout in seconds.</p>
</dd>



<dt><i><em class="filename">-t</em></tt></i></dt>
<dd>
Treats the domain as a tagged domain, which includes a machine name
and a tagged NetInfo database.
</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>domain</tt></em></tt></i></dt>
<dd>
Specifies a NetInfo domain.</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>directory</tt></em></tt></i></dt>
<dd>
Denotes a path to a NetInfo directory.</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>property ...</tt></em></tt></i></dt>
<dd>
Specifies one or more NetInfo properties. For example, each user
listed in the <em class="filename">/users</em> directory has
<em class="filename">name</em>, <em class="filename">passwd</em>,
<em class="filename">uid</em>, and <em class="filename">gid</em> properties (as
well as a few other properties). Every directory has a
<em class="filename">name</em> property that corresponds to the directory
name. For example, the <em class="filename">/machines</em>
directory's <em class="filename">name</em> property is
<tt class="literal">machines</tt>.
</p>
</dd>

</dl>

<p>You can use <em class="filename">nireport</em> to list any portion of the
NetInfo directory. For example, to list the top-level directory,
specify the local domain, the <tt class="literal">/</tt> directory, and the
<em class="filename">name</em> property, as in <tt class="literal">nireport . /
name</tt>.
</p>
</div>

<a name="ch03-23-fm2xml" /><a name="IXT-3-401" /><a name="IXT-3-402" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>niload</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Syntax</h4>

<blockquote><pre class="code">niload  [-v] [-T <em class="replaceable"><tt>timeout</em>] [(-d|-m)] [(-p|-P <em class="replaceable">password</tt></em>)]
 [-u <em class="replaceable"><tt>user</em>] {-r <em class="replaceable">directory</em>|<em class="replaceable">format</em>} [-t] <em class="replaceable">domain</tt></em></pre></blockquote>


<h4 class="refsect1">Description</h4>
<p><em class="filename">niload</em> reads the Unix flat file format from
standard input and loads it into the NetInfo database.
</p>

<h4 class="refsect1">Options</h4>

<dl>
<dt><i><em class="filename">-v</em></tt></i></dt>
<dd>
Selects verbose mode.</p>
</dd>



<dt><i><em class="filename">-T</em></tt> <tt><em class="replaceable"><tt>timeout</tt></em></tt></i></dt>
<dd>
Specifies a timeout in seconds.</p>
</dd>



<dt><i><em class="filename">-d</em></tt></i></dt>
<dd>
Specifies that if a duplicate entry already exists, NetInfo deletes
that entry before adding the new one. This can cause you to lose data
if NetInfo is tracking information that isn't
represented in the flat file. For example, if you dump the
<em class="filename">/users</em></tt> directory to a flat
<em class="filename">passwd</em></tt> file format and load it back in with
<em class="filename">niload -d</em></tt>, you will lose the
<em class="filename">picture</em></tt>, <em class="filename">hint</em></tt>, and
<em class="filename">sharedDir</em></tt> properties for every user on your
system, because the <em class="filename">passwd</em></tt> file does not have a
field for those properties. Most of the time, the
<em class="filename">-m</em></tt> option is what you want.
</p>
</dd>



<dt><i><em class="filename">-m</em></tt></i></dt>
<dd>
Specifies that if a duplicate entry already exists,
<em class="filename">niload</em> will merge the changes. So, if you dump
the <em class="filename">/users</em> directory to a flat
<em class="filename">passwd</em> file format, change a
user's shell, and load that file back in with
<em class="filename">niload</em>, NetInfo will keep the old shell. If you
use the <em class="filename">-m</em> option, NetInfo will accept the new
shell without the destructive side effects of the
<em class="filename">-d</em> option.
</p>
</dd>



<dt><i><em class="filename">-p</em></tt></i></dt>
<dd>
Prompt for a password. You can use this instead of prefixing the
command with <em class="filename">sudo</em></tt>.
</p>
</dd>



<dt><i><em class="filename">-P</em></tt> <tt><em class="replaceable"><tt>password</tt></em></tt></i></dt>
<dd>
Use the specified password. </p>
</dd>

</dl>

<a name="ch03-27-fm2xml" /><blockquote><b>WARNING:</b> 
If your shell history file is enabled, the
<em class="filename">-</em><a name="IXT-3-402" /><em class="filename">P</em> option presents a
security risk, since the password will be stored, along with the
history of other shell commands. It is best to avoid using this
option.
</p>
</blockquote>

<dl>
<dt><i><em class="filename">-u</em></tt> <tt><em class="replaceable"><tt>user</tt></em></tt></i></dt>
<dd>
Use the specified user's identity when running the
command. You'll be prompted for a password.
</p>
</dd>



<dt><i><em class="filename">-t</em></tt></i></dt>
<dd>
Treats the domain as a tagged domain, which includes a machine name
and a tagged NetInfo database.
</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>domain</tt></em></tt></i></dt>
<dd>
Specifies a NetInfo domain.</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>directory</tt></em></tt></i></dt>
<dd>
Denotes a path to a NetInfo directory.</p>
</dd>



<dt><i><tt><em class="replaceable"><tt>format</tt></em></tt></i></dt>
<dd>
Specifies a format corresponding to a Unix flat file of the same
name. Can be one of the following: <em class="filename">aliases</em></tt>,
<em class="filename">bootptab</em></tt>, <em class="filename">bootparams</em></tt>,
<em class="filename">exports</em></tt>, <em class="filename">fstab</em></tt>,
<em class="filename">group</em></tt>, <em class="filename">hosts</em></tt>,
<em class="filename">networks</em></tt>, <em class="filename">passwd</em></tt>,
<em class="filename">printcap</em></tt>, <em class="filename">protocols</em></tt>,
<em class="filename">rpc</em></tt>, or <em class="filename">services</em></tt>.
</p>
</dd>

</dl>

</div>

<a name="ch03-28-fm2xml" /><a name="IXT-3-403" /><a name="IXT-3-404" /><a name="IXTR3-436" /><a name="IXTR3-437" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>nicl</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Syntax</h4>

<blockquote><pre class="code">nicl [<tt><em class="replaceable"><tt>options</em></tt>] <tt><em class="replaceable">datasource </em></tt>[<tt><em class="replaceable">command</tt></em></tt>]</pre></blockquote>


<h4 class="refsect1">Description</h4>
<p>Use <em class="filename">nicl</em></tt> to modify entries in the
<a name="IXT-3-404" />NetInfo
database. You can manipulate directories and properties with
<em class="filename">nicl</em></tt>. The <tt><em class="replaceable"><tt>datasource</tt></em></tt>
may be the path to a NetInfo directory (such as
<em class="filename">/</em></tt> ) or the filesystem path of a NetInfo database
(you must use the <em class="filename">-raw</em></tt> option for this). Use
<em class="filename">-raw</em></tt> to work directly with the NetInfo database,
such as <em class="filename">/var/db/netinfo/local.nidb</em></tt>. This is
useful in cases when the NetInfo daemon is down (such as when you
boot into single-user mode).
</p>

<h4 class="refsect1">Options</h4>

<dl>
<dt><i><em class="filename">-c</em></tt></i></dt>
<dd>
Create a new data source.</p>
</dd>



<dt><i><em class="filename">-p</em></tt></i></dt>
<dd>
Prompt for a password. You can use this instead of prefixing the
command with <em class="filename">sudo</em></tt>.
</p>
</dd>



<dt><i><em class="filename">-P</em></tt> <tt><em class="replaceable"><tt>password</tt></em></tt></i></dt>
<dd>
Use the specified password. </p>
</dd>



<dt><i><em class="filename">-q</em></tt></i></dt>
<dd>
Be quiet. </p>
</dd>



<dt><i><em class="filename">-raw</em></tt></i></dt>
<dd>
Indicates that the <em class="replaceable"><tt>datasource</tt></em> is a
filesystem path to a NetInfo database.
</p>
</dd>



<dt><i><em class="filename">-ro</em></tt></i></dt>
<dd>
Open <tt><em class="replaceable"><tt>datasource</tt></em></tt> as read-only. </p>
</dd>



<dt><i><em class="filename">-t</em></tt></i></dt>
<dd>
Treats the domain as a tagged domain, which includes a machine name
and a tagged NetInfo database.
</p>
</dd>



<dt><i><em class="filename">-u</em></tt> <tt><em class="replaceable"><tt>user</tt></em></tt></i></dt>
<dd>
Use the specified user's identity when running the
command. You'll be prompted for a password.
</p>
</dd>



<dt><i><em class="filename">-v</em></tt></i></dt>
<dd>
Be verbose. </p>
</dd>



<dt><i><em class="filename">-x500</em></tt></i></dt>
<dd>
Use X.500 names (see the <em class="filename">nicl</em></tt> manpage for more
details).
</p>
</dd>

</dl>


<h4 class="refsect1">Commands</h4>

<dl>
<dt><i><em class="filename">-append</em></tt> <tt><em class="replaceable"><tt>path key val</tt></em></tt> <tt class="literal">...</tt></i></dt>
<dd>
Appends a value to an existing property. The property is created if
it does not already exist.
</p>
</dd>



<dt><i><em class="filename">-copy</em></tt> <tt><em class="replaceable"><tt>path newparent</tt></em></tt></i></dt>
<dd>
Copies the specified <tt><em class="replaceable"><tt>path</tt></em></tt> to a new parent
path.
</p>
</dd>



<dt><i><em class="filename">-create</em></tt> <tt><em class="replaceable"><tt>path</em></tt> <tt class="literal">[</tt><tt><em class="replaceable">key</em></tt> <tt class="literal">[</tt><tt><em class="replaceable">val</tt></em></tt> <tt class="literal">...] ]</tt></i></dt>
<dd>
Creates a NetInfo directory specified by
<em class="replaceable"><tt>path</tt></em>. See <a href="ch03_08.htm#mosxgeeks-CHP-3-SECT-8.2">Section 3.8.2</a>, later in this chapter, for
a complete example.
</p>
</dd>



<dt><i><em class="filename">-delete</em></tt> <tt><em class="replaceable"><tt>path</em></tt> <tt class="literal">[</tt><tt><em class="replaceable">key</em></tt> <tt class="literal">[</tt><tt><em class="replaceable">val</tt></em></tt> <tt class="literal">...] ]</tt></i></dt>
<dd>
Destroys the specified path and all its contents. If you specify a
key and/or value, only the specified key is deleted. For an example,
see <a href="ch03_07.htm#mosxgeeks-CHP-3-SECT-7.5">Section 3.7.5</a>,
later in this chapter.
</p>
</dd>



<dt><i><em class="filename">-domainname</em></tt></i></dt>
<dd>
Prints the NetInfo domain name of
<em class="replaceable"><tt>datasource</tt></em>.
</p>
</dd>



<dt><i><em class="filename">-flush </em></tt></i></dt>
<dd>
Flushes the directory cache.</p>
</dd>



<dt><i><em class="filename">-insert</em></tt> <tt><em class="replaceable"><tt>path key val index</tt></em></tt></i></dt>
<dd>
Operates like <em class="filename">-append</em>, but instead of placing
the value at the end, it inserts it at the specified index.
</p>
</dd>



<dt><i><em class="filename">-list</em></tt> <tt><em class="replaceable"><tt>path</em></tt> <tt class="literal">[</tt><tt><em class="replaceable">key</tt></em></tt> <tt class="literal">...]</tt></i></dt>
<dd>
Lists all the NetInfo directories in the specified path. For example,
to list all users, use <em class="filename">nicl / -list /users</em></tt>.
</p>
</dd>



<dt><i><em class="filename">-merge</em></tt> <tt><em class="replaceable"><tt>path key val</tt></em></tt> <tt class="literal">...</tt></i></dt>
<dd>
Operates like <em class="filename">-append</em>, but if the value already
exists, it is not duplicated. See <a href="ch03_07.htm#mosxgeeks-CHP-3-SECT-7.3">Section 3.7.3</a>, later in this chapter.
</p>
</dd>



<dt><i><em class="filename">-move</em></tt> <tt><em class="replaceable"><tt>path newparent</tt></em></tt></i></dt>
<dd>
Moves the specified <tt><em class="replaceable"><tt>path</tt></em></tt> to a new parent
path.
</p>
</dd>



<dt><i><em class="filename">-read</em></tt> <tt><em class="replaceable"><tt>path</em></tt> <tt class="literal">[</tt><tt><em class="replaceable">key</tt></em></tt> <tt class="literal">...]</tt></i></dt>
<dd>
Displays all the properties of the specified path. For example, to
see <em class="filename">root</em>'s properties, use
<em class="filename">nicl / -read /users/root</em>.
</p>
</dd>



<dt><i><em class="filename">-search</em></tt> <tt><em class="replaceable"><tt>arguments</tt></em></tt></i></dt>
<dd>
Performs a search within the NetInfo database. For complete details,
see the <em class="filename">nicl</em></tt> manpage.
</p>
</dd>



<dt><i><em class="filename">-rename</em></tt> <tt><em class="replaceable"><tt>path oldkey newkey</tt></em></tt></i></dt>
<dd>
Renames a property.</p>
</dd>



<dt><i><em class="filename">-resync</em></tt></i></dt>
<dd>
Resynchronizes NetInfo.</p>
</dd>



<dt><i><em class="filename">-rparent </em></tt></i></dt>
<dd>
Prints the NetInfo parent of <em class="replaceable"><tt>datasource</tt></em>.</p>
</dd>



<dt><i><em class="filename">-statistics</em></tt></i></dt>
<dd>
Displays NetInfo server statistics.<a name="IXTR3-436" /> <a name="IXTR3-437" /> 
</p>
</dd>

</dl>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch03_07.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">3.5. NetInfo Utilities</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">3.7. Managing Groups</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>