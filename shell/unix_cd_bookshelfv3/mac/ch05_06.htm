<html><head><title>Prebinding (Mac OS X for Unix Geeks)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Brian Jepson and Ernest E. Rothman" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00356-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Mac OS X for Unix Geeks" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Mac OS X for Unix Geeks" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch05_07.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">5.6. Prebinding</h2>

<p><a name="IXT-5-590" />Whenever you
install an update to the Mac OS X operating system, there is a long
phase at the end called
<em class="emphasis">optimization</em><a name="IXT-5-591" />.
What the splash screen calls
"optimization" is a particular type
of optimization, called <em class="emphasis">prebinding</em>, which
applies only to <a name="IXT-5-592" />Mach-O executables. We will only describe
the essential idea behind prebinding. For more details and specific
instructions on building libraries and executables with prebinding
enabled, consult the document
<em class="emphasis">/Developer/Documentation/ReleaseNotes/Prebinding.html</em><a name="IXT-5-593" />.
</p>

<p>To understand what prebinding is and how it can speed up the launch
of an application, let's consider what happens when
you launch an application that was built without prebinding. When
such an application (or dynamic library) is built,
<em class="emphasis">ld</em> (the static linker) records the names of
undefined symbols (i.e., the names of symbols that the application
must link against). Later, when the application is launched, the
dynamic linker (<em class="emphasis">dyld</em>) must bind the undefined
references from the application to their definitions.
</p>

<p>In contrast, if an executable or dynamic library is built with
prebinding, the binding essentially occurs at build time. In
particular, the library is predefined at some specified address
range, a process that would otherwise have to occur when an
application is launched. Rather than mark symbols as undefined, the
dynamic linker can use address symbols in a prebound library to
reference when some other application or dynamic library links
against it. Additionally, if the prebound library depends on other
libraries (a common situation), then the static linker records the
timestamps of the other libraries. Later, when the prebound library
is used, the dynamic linker checks the timestamps of the dependent
libraries and checks for the existence of overlapping executable
addresses. If the timestamps do not match those of the build
timestamps, or if there are overlapping executable addresses, the
prebinding is broken and normal binding is performed.
</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch05_07.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">5.5. Creating and Linking Static Libraries</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">5.7. Interesting and Important Libraries</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>