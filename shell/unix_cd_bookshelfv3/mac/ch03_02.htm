<html><head><title>Programming with Directory Services (Mac OS X for Unix Geeks)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Brian Jepson and Ernest E. Rothman" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00356-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Mac OS X for Unix Geeks" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Mac OS X for Unix Geeks" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch03_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">3.2. Programming with Directory Services</h2>

<p>As a <a name="IXT-3-362" />programmer, you frequently need to deal with
directory information, whether you realize it or not. Your
application uses Directory Services each time it looks up a host
entry, authenticates a password, or uses a printer. The Open
Directory architecture unifies what used to be a random collection of
flat files in <em class="filename">/etc</em>. The good news is that the
flat files still work. The other good news is that there is a brave
new world just beyond those flat files. So, while all your old Unix
code should work with the Open Directory architecture, you should
look for new ways to accomplish old tasks, especially if you can
continue writing portable code.
</p>

<p>To get at directory information, Unix applications typically go
through the C library using such functions as <tt class="literal">gethostent(
)</tt>. Higher-level APIs, such as Pluggable Authentication
Modules (PAM) and Common Data Security Architecture (CDSA), also use
the C library. <a href="ch03_02.htm#mosxgeeks-CHP-3-FIG-2">Figure 3-2</a> shows how this works. The
C library connects to <em class="filename">lookupd</em>, a thin shim that
is the doorway to the <em class="filename">DirectoryService</em> daemon.
The <em class="filename">DirectoryService</em> daemon consults the
available plug-ins until it finds the one that can answer the
directory query.
</p>

<a name="mosxgeeks-CHP-3-FIG-2" /><div class="figure"><img src="figs/mud_0302.gif" alt="Figure 3-2" width="195" /></div><h4 class="objtitle">Figure 3-2. Accessing Directory Services</h4>

<a name="mosxgeeks-CHP-3-SECT-2.1" /><div class="sect2">
<h3 class="sect2">3.2.1. Working with Passwords</h3>

<p>One possible route to user and
<a name="IXT-3-363" />password
information<em class="filename"> </em>is through the
<tt class="literal">getpw*</tt><a name="IXT-3-364" /> family of functions. However,
those functions are not ideal for working with systems like Mac OS X
that support multiple directories (flat files, NetInfo, LDAP, etc.).
In particular, <tt class="literal">getpwnam( )</tt> is not guaranteed to
return a crypted password if the system has been configured to use
another scheme, such as MD5 passwords. You should use the
<a name="IXT-3-365" />
<a name="IXT-3-366" />PAM API
instead. PAM is included with, or available for, many flavors of
Unix, so you can use it to write portable code. For more information
on PAM, see the <em class="filename">pam(8)</em> manpage.
</p>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch03_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">3. Directory Services</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">3.3. Configuring Directory Services</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>