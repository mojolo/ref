<html><head><title>Building ksh (Learning the Korn Shell, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Arnold Robbins and Bill Rosenblatt" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00195-9" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the Korn Shell, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Book Title" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appc_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="appd_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">C.3. Building ksh</h2>

<p>
Building any of the packages from source code is pretty straightforward.
The full details, with a FAQ and notes, are given on the AT&amp;T web site.
Here is a walk-through of the steps.  We show the steps for the
<em class="emphasis">ast-open</em> package, but they're identical for the
other source code packages.
</p>

<ol>

<li><p>
Make sure you have a C compiler for your system.
An ANSI/ISO C compiler is preferred, but a K&amp;R compiler will work too.
Getting a C compiler if you don't have one is beyond the scope of this
book; contact your local system administrator.
</p></li>

<li><p>
Download the package(s) you wish to build
into an otherwise empty directory.
Here, we build the <em class="emphasis">ast-open</em> package
from October 31, 2001:

<blockquote><pre class="code">
$ <tt class="userinput"><b>ls</b></tt>
INIT.2001-10-31.tgz  ast-open.2001-10-31.tgz
</pre></blockquote>
</p></li>

<?troff .Nd 10?>

<li><p>
Make the directory <em class="emphasis">lib/package/tgz</em> and move
the files there:

<blockquote><pre class="code">
$ <tt class="userinput"><b>mkdir lib lib/package lib/package/tgz</b></tt>
$ <tt class="userinput"><b>mv *.tgz lib/package/tgz</b></tt>
</pre></blockquote>
</p></li>

<li><p>
Extract the <em class="emphasis">INIT</em> package manually:

<blockquote><pre class="code">
$ <tt class="userinput"><b>gzip -d &lt; lib/package/tgz/INIT.2001-10-31.tgz | tar -xvpf -</b></tt>
\r\v\vNOTICE -- LICENSED SOFTWARE -- SEE README FOR DETAILS\r\v\v
README
src/Makefile
src/cmd/Makefile
src/lib/Makefile
...
</pre></blockquote>
</p><p>
If you don't have <em class="emphasis">gzip</em>, use the <em class="emphasis">ratz</em>
program, as described earlier.
</p></li>

<li><p>
Initialize the list of available packages:

<blockquote><pre class="code">
$ <tt class="userinput"><b>bin/package read</b></tt>
\r\v\vNOTICE -- LICENSED SOFTWARE -- SEE README FOR DETAILS\r\v\v
README
src/Makefile
src/cmd/Makefile
src/lib/Makefile
src/Mamfile
...
</pre></blockquote>
</p></li>

<li><p>
Start the compilation. This step is quite verbose and will take a while.
Exactly how long depends upon the speed of your system and compiler, and upon
which package you are building:

<blockquote><pre class="code">
$ <tt class="userinput"><b>bin/package make</b></tt>
package: initialize the /home/arnold/ast-open/arch/linux.i386 view
package: update /home/arnold/ast-open/arch/linux.i386/bin/proto
package: update /home/arnold/ast-open/arch/linux.i386/bin/mamake
package: update /home/arnold/ast-open/arch/linux.i386/bin/ratz
package: update /home/arnold/ast-open/arch/linux.i386/bin/release
...
</pre></blockquote>
</p></li>

<li><p>
Install the created files.  This can be done with the command
<tt class="literal">bin/package install</tt> <em class="replaceable"><tt>directory</tt></em>
where <em class="emphasis">directory</em> is the location to place things in.
</p>

<p>
Alternatively, if all you're interested in is the <em class="emphasis">ksh</em>
binary, you can just copy it.  The compiled binary will be in a directory
named <em class="emphasis">arch/ARCH/bin</em>, where <em class="emphasis">ARCH</em>
represents your architecture, such as <em class="emphasis">linux.i386</em>:

<blockquote><pre class="code">
cp arch/linux.i386/bin/ksh $HOME/bin/ksh93
</pre></blockquote>
</p></li>

<li><p>
Enjoy!
<a name="IXTR3-19" />

</p></li>

</ol>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appc_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="appd_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">C.2. What You Can Download</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">D. AT&amp;T ast Source Code License Agreement</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>