<html><head><title>The History File (Learning the Korn Shell, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Arnold Robbins and Bill Rosenblatt" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00195-9" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the Korn Shell, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Book Title" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch02_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch02_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">2.2. The History File</h2>

<p>
<a name="IXT-2-287152" />

<a name="korn2-IDXTERM-293" />
All of the Korn shell's command history facilities depend on a file
that stores commands as you type them in. This file is
normally <em class="emphasis">.sh_history</em> in your home directory,
but you can call it whatever you like by setting the
environment variable <tt class="literal">HISTFILE</tt> (see <a href="ch03_01.htm">Chapter 3</a>).
<a name="IXT-2-287153" />
<a name="IXT-2-287154" />
When you run one of the Korn shell's editing modes,<?troff .ne 10?> you are actually
running a mini-editor on your history file.
</p>

<p>
<a name="IXT-2-287155" />
<a name="IXT-2-287156" />
If you run more than one login
session at a time (e.g., more than one <em class="emphasis">xterm</em> on an X Windows
workstation), you may find it advantageous to maintain a separate
history file for each login session.

<a name="IXT-2-287157" />
<a name="IXT-2-287158" />

Put the following line in your <em class="emphasis">.profile</em>:
</p>

<p>
<blockquote><pre class="code">
HISTFILE=~/.hist.$(tty | sed 's;.*/;;')
</pre></blockquote>
</p>

<p>
This creates a history file whose name ends with the last
component of your terminal's device name.  For example,
your window's terminal device name might be <em class="emphasis">/dev/pts/42</em>.
The <em class="emphasis">sed</em> command strips everything through the last
slash, leaving just the <em class="emphasis">42</em>.
The history file then becomes <em class="emphasis">~/.hist.42</em>.
You can remove the history file at logout, as explained in
<a href="ch04_01.htm">Chapter 4</a>.
Or you can leave the files around, and your history will be there the next
time you start a window on that same terminal device.
(Preserving history between sessions is the point of the history
file, after all.)
</p>

<p>
An attractive alternative is to use a single history file for <em class="emphasis">all</em>
your windows.  Each running instance of the Korn shell is smart enough
to share its file with other running instances; from a second window,
you can recall and edit the commands run in the first window.
</p>

<p>
<a name="IXT-2-287159" />

Another environment variable, <tt class="literal">HISTSIZE</tt>, can be used to determine
the maximum number of commands accessible from the history file. The
default is 128 (i.e., the 128 most recent commands),
which should be more than adequate.
<a name="IXTR3-74" />

</p>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch02_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch02_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">2. Command-Line Editing</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">2.3. Emacs Editing Mode</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>