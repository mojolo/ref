<html><head><title>Quitting Without Saving Edits  (Learning the vi Editor, Sixth Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Linda Lamb and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-426-6" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the vi Editor, Sixth Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Learning the vi Editor" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch01_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch02_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">1.2. Quitting Without Saving Edits </h2>

<p> 
When you are first learning
<em class="emphasis">vi</em>, especially if you are an intrepid experimenter,
there are two other <em class="emphasis">ex</em> commands that are handy for getting out of
any mess that you might create.</p>

<p>What if you want to wipe out all of the edits you have made in
a session and then return to the original file? The command:
<a name="IXT-1-280310" /></p>

<blockquote><pre class="code">:e! <span class="keycap">RETURN</span></pre></blockquote>

<p>returns you to the last saved version of the file, so you can start over.</p>

<p>Suppose, however, that you want to wipe out your edits and then
just quit <em class="emphasis">vi</em>?
The command:
<a name="IXT-1-280311" /></p>

<blockquote><pre class="code">:q! <span class="keycap">RETURN</span></pre></blockquote>

<p>quits the file you're editing and returns you to the UNIX prompt.
With both of these commands, you lose all edits made in the
buffer since the last time you saved the file.
<em class="emphasis">vi</em> normally won't let you throw away your edits. The
exclamation point added to the <tt class="literal">:e</tt> or <tt class="literal">:q</tt> command causes
<em class="emphasis">vi</em> to override this prohibition, performing the operation even
though the buffer has been modified.</p>

<a name="vi6-ch-1-sect-2.1" /><div class="sect2">
<h3 class="sect2">1.2.1. Problems Saving Files </h3>

<a name="ch01.troublesave" />
<a name="ch01.troublesave2" />
<a name="IXT-1-280312" />
<a name="IXT-1-280313" />

<ul>
<li><p>
<em class="emphasis">You try to write your file, but you get one of the following messages:</em>
<a name="IXT-1-280314" />
<a name="IXT-1-280315" />
<a name="IXT-1-280316" /></p>



<blockquote><pre class="code">File exists
File <em class="replaceable"><tt>file</tt></em> exists - use w!
[Existing file]
File is read only</pre></blockquote>



<p>
Type <tt class="literal">:w!</tt> <em class="replaceable"><tt>file</tt></em> to overwrite the existing file, or type
<tt class="literal">:w</tt> <em class="replaceable"><tt>newfile</tt></em> to save the edited version in a new file.</p></li>

<li><p>
<em class="emphasis">You want to write a file, but you don't have write permission for
it.  You get the message "Permission denied."</em>
<a name="IXT-1-280317" />
<a name="IXT-1-280318" /></p>

<p>
Use <tt class="literal">:w</tt> <em class="replaceable"><tt>newfile</tt></em> to write out the buffer into a new file.
If you have write permission for the directory, you can use
<tt class="literal">mv</tt> to replace the original version with your copy of it.
If you don't have write permission for the directory,
type <tt class="literal">:w</tt> <em class="replaceable"><tt>pathname/file</tt></em> to
write out the buffer to a directory in which you do have write
permission (such as your home directory, or <em class="filename">/tmp</em>).</p></li>

<li><p>
<em class="emphasis">You try to write your file, but you get a message telling you that
the file system is full.</em>
<a name="IXT-1-280319" /></p>

<p>
<a name="IXT-1-280320" />
<a name="IXT-1-280321" />
<a name="IXT-1-280322" />
Type <tt class="literal">:!rm</tt> <em class="replaceable"><tt>junkfile</tt></em> to delete
a (large) unneeded file and
free some space.
<a name="IXT-1-280323" />
<a name="IXT-1-280324" />
<a name="IXT-1-280325" />
(Starting an <em class="emphasis">ex</em> command with an exclamation point gives you
access to UNIX.)</p>

<p>
<a name="IXT-1-280326" />
Or type <tt class="literal">:!df</tt> to see whether there's any space on another file system.
If there is, choose a directory on that file system and write your
file to it with <tt class="literal">:w</tt> <em class="replaceable"><tt>pathname</tt></em>.
(<tt class="literal">df</tt> is the UNIX command to check a
<em class="emphasis">d</em>isk's <em class="emphasis">f</em>ree space.)</p></li>

<li><p>
<em class="emphasis">The system puts you into open mode and tells you that the
file system is full.</em></p>

<p>
The disk with <em class="emphasis">vi</em>'s temporary files is filled up.
Type
<tt class="literal">:!ls&#160;/tmp</tt> to see whether there are any files you can remove to
gain some disk space.<a href="#FOOTNOTE-5">[5]</a>
If there are, create a temporary UNIX shell from which you can remove files or issue
other UNIX commands.
<a name="IXT-1-280329" />
You can create a shell by typing <tt class="literal">:sh</tt>;
type
<span class="keycap">CTRL-D</span>
or <tt class="literal">exit</tt> to terminate the shell and return to <em class="emphasis">vi</em>.  (On
most UNIX systems, when using a job-control shell, you can simply type
<span class="keycap">CTRL-Z</span>
to suspend <em class="emphasis">vi</em> and return to the UNIX prompt;
type <tt class="literal">fg</tt> to return to
<em class="emphasis">vi</em>.)
Once you've freed up some space, write your file with <tt class="literal">:w!</tt>.</p><blockquote class="footnote">

<a name="FOOTNOTE-5" /><p> [5]
Your <em class="emphasis">vi</em> may keep its temporary files in <em class="filename">/usr/tmp</em>,
<a name="IXT-1-280327" />
<a name="IXT-1-280328" />
<em class="filename">/var/tmp</em>, or your current directory; you may need to poke around
a bit to figure out where exactly you've run out of room.</p>

</blockquote></li>

<li><p>
<em class="emphasis">You try to write your file, but you get a message telling you that your
disk quota has been reached.</em>
<a name="IXT-1-280330" /></p>

<p>
Try to force the system to save your buffer with the <em class="emphasis">ex</em> command
<a name="IXT-1-280331" />
<tt class="literal">:pre</tt> (short for <tt class="literal">:preserve</tt>).
If that doesn't work, look for some files to remove.
Use <tt class="literal">:sh</tt> (or
<span class="keycap">CTRL-Z</span>
if you are using a job-control system) to move out of <em class="emphasis">vi</em> and remove
files.
Use
<span class="keycap">CTRL-D</span>
(or <tt class="literal">fg</tt>) to return to <em class="emphasis">vi</em> when you're done.
Then write your file with <tt class="literal">:w!</tt>.</p></li>
</ul>
</div>




<a name="vi6-ch-1-sect-2.2" /><div class="sect2">
<h3 class="sect2">1.2.2. Exercises</h3>

<p>The only way to learn <em class="emphasis">vi</em> is to practice.
You now know enough to create a new file and to return to the
UNIX prompt.
Create a file called <em class="filename">practice</em>, insert some text, and then
save and quit the file.</p>


<table border="1" cellpadding="3">

<tr>
<td>Open a file called <em class="emphasis">practice</em> in the current directory:</td>
<td><tt class="literal">vi practice</tt></td>
</tr>

<tr>
<td>Insert text:</td>
<td><tt class="literal">i</tt> <em class="replaceable"><tt>any text you like</tt></em></td>
</tr>

<tr>
<td>Return to command mode:</td>
<td><span class="keycap">ESC</span></td>
</tr>

<tr>
<td>Quit <em class="emphasis">vi</em>, saving edits:</td>
<td><tt class="literal">ZZ</tt></td>
</tr>


</table><p><p>
</div>




<a name="IXT-1-280332" />
<a name="IXT-1-280333" />
<a name="IXT-1-280334" />


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch01_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch02_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">1. The vi Text Editor</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">2. Simple Editing</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>