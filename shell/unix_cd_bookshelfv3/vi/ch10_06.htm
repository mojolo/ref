<html><head><title>GUI Interfaces (Learning the vi Editor, Sixth Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Linda Lamb and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-426-6" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the vi Editor, Sixth Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Learning the vi Editor" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch10_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch10_07.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">10.6. GUI Interfaces</h2>

<p>
<a name="ch10.gui1" />
<a name="ch10.gui2" />
<a name="ch10.gui3" />
<a name="ch10.gui4" />
The screen shots and explanation for this section were supplied
by Steve Kirkendall. We thank him.</p>

<p>
<a name="IXT-10-281446" />
<a name="IXT-10-281447" />
<a name="IXT-10-281448" />
<em class="emphasis">elvis</em>'s X11 interface
provides a scrollbar and mouse support, and allows you to
select which fonts to use.
There is no way to change fonts after
<em class="emphasis">elvis</em> has created the first window.
The fonts must all be monospace fonts, typically some variation
of a Courier or "fixed" font.</p>

<p><em class="emphasis">elvis</em> 2.0's X11 interface supports
multiple fonts and colors,
a blinking cursor that changes shape to indicate your editing mode
(insert vs. command),
a scrollbar, and mouse actions. The mouse can be used for selecting
text, cutting and pasting between applications, and performing tag
searches.</p>

<p><em class="emphasis">elvis</em> 2.1 adds a configurable toolbar,
dialogue windows, a status bar,
and the <tt class="literal">-client</tt> flag.
It also works better on monochrome X terminals.</p>

<p>Because <em class="emphasis">elvis</em> 2.1 has a significantly improved
X11 interface over 2.0, and because it should be released by the time
this book is published, details in the rest of this section apply
to it. A number of features, several command-line options, and the ability to
configure <em class="emphasis">elvis</em> via X resources are all missing
from Version 2.0.</p>

<a name="vi6-ch-10-sect-6.1" /><div class="sect2">
<h3 class="sect2">10.6.1. The Basic Window</h3>

<p>The basic <em class="emphasis">elvis</em> window is shown in
<a href="ch10_06.htm#vi6-ch-10-fig-1">Figure 10.1</a>.</p>

<a name="vi6-ch-10-fig-1" /><div class="figure"><img src="figs/vi_6.fig.1001.gif" alt="Figure 10.1" width="500" /></div><h4 class="objtitle">Figure 10.1. The elvis GUI window</h4><p><em class="emphasis">elvis</em> provides a separate text search
pop-up dialogue box, which is shown in
<a href="ch10_06.htm#vi6-ch-10-fig-2">Figure 10.2</a>.</p>

<a name="vi6-ch-10-fig-2" /><div class="figure"><img src="figs/vi_6.fig.1002.gif" alt="Figure 10.2" width="503" /></div><h4 class="objtitle">Figure 10.2. The elvis search dialogue</h4><p>The look and feel are intended to resemble Motif, but <em class="emphasis">elvis</em>
doesn't actually use the Motif libraries.</p>

<p>Command-line options let you choose the four different fonts
that <em class="emphasis">elvis</em> uses, normal, italic, bold, and
"control," which is the font for the toolbar text
and button labels.
You may also specify foreground and background colors,
the initial window geometry,
and whether <em class="emphasis">elvis</em> should start out iconified.</p>

<p>
<a name="IXT-10-281449" />
The new <tt class="literal">-client</tt> option causes
<em class="emphasis">elvis</em> to look for an already running
<em class="emphasis">elvis</em> process, and send it a message requesting it
to start editing the files named on the command line.
Doing it this way allows you to share yanked text and other information
between the files <em class="emphasis">elvis</em> is currently editing
and the new files.</p>

<p>Besides the toolbar, there is also a status bar that displays
status messages and any available information about toolbar
buttons.</p>
</div>




<a name="vi6-ch-10-sect-6.2" /><div class="sect2">
<h3 class="sect2">10.6.2. Mouse Behavior</h3>

<p>
<a name="IXT-10-281450" />
<a name="IXT-10-281451" />
<a name="IXT-10-281452" />
The mouse behavior tries to strike a balance between
<em class="emphasis">xterm</em>(1) and what makes sense for an editor.
To do this correctly,
<em class="emphasis">elvis</em> distinguishes between clicking and dragging.</p>

<p>Dragging the mouse always selects text.
Dragging with button 1 pressed (usually the left button) selects characters,
dragging with button 2 (the middle button) selects a rectangular area, and
dragging with button 3 (usually the right button) selects whole lines.
These operations correspond to <em class="emphasis">elvis</em>'
<tt class="literal">v</tt>,
<tt class="literal">^V</tt>, and
<tt class="literal">V</tt> commands, respectively.
(These commands are described later in this chapter.)
When you release the button at the end of the drag, the selected text is
immediately copied into an X11 cut buffer, so you can paste it into another
application such as <em class="emphasis">xterm</em>.
The text remains selected, so you can apply an operator command to it.</p>

<p>Clicking button 1 cancels any pending selection, and moves the cursor to
the clicked-on character.
Clicking button 3 moves the cursor without canceling the pending selection;
you use this to extend a pending selection.</p>

<p>Clicking button 2 "pastes" text from the X11 cut buffer
(like <em class="emphasis">xterm</em>).
If you're entering an
<em class="emphasis">ex</em> command line, the text will be pasted into the
command line as though you had typed it.
If you're in visual command mode or input mode,
the text will be pasted into
your edit buffer.
When pasting, it doesn't matter where you click in the window;
<em class="emphasis">elvis</em> always inserts the text at
the position of the text cursor.</p>

<p>Double-clicking button 1 simulates a <tt class="literal">^]</tt>
keystroke, causing <em class="emphasis">elvis</em>
to perform tag lookup on the clicked-on word.
If <em class="emphasis">elvis</em> happens to be displaying an HTML document,
then tag lookup pursues hypertext links,
so you can double-click on any underlined text
to view the topic that describes that text.
Double-clicking button 3 simulates a <tt class="literal">^T</tt> keystroke,
taking you back to where you did the last tag lookup.</p>
</div>




<a name="vi6-ch-10-sect-6.3" /><div class="sect2">
<h3 class="sect2">10.6.3. The Toolbar</h3>

<p>
<a name="IXT-10-281453" />
The X11 interface supports a user-configurable toolbar.
By default, the toolbar is enabled unless your
<em class="filename">~/.exrc</em> file has a
<tt class="literal">set&#160;notoolbar</tt> command.</p>

<p>
<a name="IXT-10-281454" />
The default toolbar already has some buttons defined.
You use the <tt class="literal">:gui</tt> command to reconfigure
the toolbar.</p>

<p>There are a number of commands. In particular, you can
reconfigure the toolbar to suit your tastes, deleting one
or all of the existing buttons, adding new ones, and controlling
the spacing between buttons or groups of buttons.
Here is a simple example:</p>

<blockquote><pre class="code">:gui Make:make
:gui Make " Rebuild the program
:gui Quit:q
:gui Quit?!modified</pre></blockquote>

<p>
<a name="IXT-10-281455" />
<a name="IXT-10-281456" />
These commands add two new buttons. The first line
adds a button named "Make," which
will execute the <tt class="literal">:make</tt> command when pressed.
(The <tt class="literal">:make</tt> command is described later in this chapter.)
The
second line adds descriptive text for the "Make" button
that shows up in the status line when the button is pressed.
In this case, the <tt class="literal">"</tt> does not start a comment;
rather it is an operator for the <tt class="literal">:gui</tt> command.</p>

<p>
<a name="IXT-10-281457" />
The second button, named "Quit," is created by
the third line. It exits the
program. The fourth line changes its behavior.
If the condition (<tt class="literal">!modified</tt>) is true, the button
will behave normally. But if it's false, the button will
ignore any mouse clicks, and it will also be displayed as being
"flat," instead of having the normal 3-D appearance.
Thus, if the current file is modified, you won't be
able to use the "Quit" button to exit.</p>

<p>You can create pop-up dialogues that appear when a toolbar
button is pressed. The dialogue can set the value(s) of
pre-defined variables (options) that can then be tested from
the <em class="emphasis">ex</em> command associated with the button.
There are 26 pre-defined variables, named
<tt class="literal">a-z</tt>, that are set aside for user
"programs" of this sort to use.
This example associates a dialogue with a new button named "Split":</p>

<blockquote><pre class="code">:gui Split"Create a new window, showing a given file
:gui Split;"File to load:" (file) f = filename
:gui Split:split (f)</pre></blockquote>

<p>
<a name="IXT-10-281458" />
The first command associates descriptive text with the "Split"
button. The second command creates the pop-up dialogue: its prompt
<a name="IXT-10-281459" />
is <em class="emphasis">File to load:</em>
and it will set the <tt class="literal">filename</tt>
option. The <tt class="literal">(file)</tt> indicates that any string may
be entered, but that the <span class="keycap">TAB</span> key may be used for
filename completion. The <tt class="literal">f = filename</tt>
copies the value of <tt class="literal">filename</tt> into <tt class="literal">f</tt>.
Finally, the third command actually executes the <tt class="literal">:split</tt>
command on the value of <tt class="literal">f</tt>, which will be the
new filename supplied by the user.</p>

<p>The facility is quite flexible; see the online help for
the full details.</p>
</div>




<a name="vi6-ch-10-sect-6.4" /><div class="sect2">
<h3 class="sect2">10.6.4. Options</h3>

<p>
<a name="IXT-10-281460" />
A large number of options control the X11 interface.
You typically set these in your <em class="filename">.exrc</em>
file. There are options and abbreviations for setting the
various fonts, enabling and configuring the toolbar, status bar,
scrollbars, and the cursor.
Other options control the cursor's behavior when
you switch windows with <tt class="literal">^W ^W</tt> and whether the
cursor goes back to the original <em class="emphasis">xterm</em> when
<em class="emphasis">elvis</em> exits.</p>

<p>The online documentation describes all of the X11-related
<em class="emphasis">ex</em> options.
Here, we describe some of the more interesting ones:</p>

<dl>
<dt><tt class="literal">autoiconify</tt></dt><dd><p>
<a name="IXT-10-281461" />
Normally, when the <tt class="literal">^W ^W</tt> command switches focus
to an iconified window, that window is de-iconified.
When <tt class="literal">autoiconify</tt> is true, <em class="emphasis">elvis</em></tt> will
iconify the old window, so that the number of open <em class="emphasis">elvis</em></tt>
windows remains constant.</p></dd>


<dt><tt class="literal">blinktime</tt></dt><dd><p>
<a name="IXT-10-281462" />
The value is a number between 1 and 10 that indicates for how many
tenths of a second the cursor should be visible and then invisible.
A value of 0 disables blinking.</p></dd>


<dt><tt class="literal">firstx</tt>, <tt class="literal">firsty</tt>, <tt class="literal">stagger</tt></dt><dd><p>
<a name="IXT-10-281463" />
<tt class="literal">firstx</tt> and <tt class="literal">firsty</tt>
control the position of the first
window that <em class="emphasis">elvis</em></tt> creates.
If not set, the <tt class="literal">-geometry</tt> option or the
window manager controls placement.
If <tt class="literal">stagger</tt> is
set to a non-zero value, any new windows are created that
many pixels down and to the right of the current window.
Setting it to zero lets the window manager to do the placement.</p></dd>


<dt><tt class="literal">outlinemono</tt></dt><dd><p>
<a name="IXT-10-281464" />
When set, <em class="emphasis">elvis</em>
provides a white outline around characters when using a monochrome
X display.
This makes text easier to read.
The value can range from 0 for no outline to 3 for the heaviest;
the default is 2.
This option has no effect on color displays.</p></dd>


<dt><tt class="literal">stopshell</tt></dt><dd><p>
<a name="IXT-10-281465" />
Stores a command which runs an interactive shell,
for the <tt class="literal">:shell</tt> and <tt class="literal">:stop</tt>
<em class="emphasis">ex</em></tt> commands, and the <tt class="literal">^Z</tt> visual
command.
The default value is <tt class="literal">xterm &amp;</tt>, which starts
an interactive terminal emulator in another window.</p></dd>


<dt><tt class="literal">xscrollbar</tt></dt><dd><p>
<a name="IXT-10-281466" />
Values <tt class="literal">left</tt> and <tt class="literal">right</tt> place
the scrollbar on the indicated side of the window, while
<tt class="literal">none</tt> disables the scrollbar.
The default is <tt class="literal">right</tt>.</p></dd>

</dl>

<p>
<a name="IXT-10-281467" />
<em class="emphasis">elvis</em> 2.1 adds the ability to be configured via
X resources.
The resource values can be overridden by command-line flags, or by
explicit <tt class="literal">:set</tt> or <tt class="literal">:color</tt>
commands in the initialization scripts.
<em class="emphasis">elvis</em>'s resources are listed
in <a href="ch10_06.htm#vi6-ch-10-tab-4">Table 10.4</a>.</p>

<a name="vi6-ch-10-tab-4" /><h4 class="objtitle">Table 10.4. elvis X Resources</h4><table border="1" cellpadding="3">

<tr>
<th>Resource Class</th>
<th />
<th>Default</th>
</tr>

<tr>
<th>(Name is lowercase of class)</th>
<th>Type</th>
<th>Value</th>
</tr>




<tr>
<td>Elvis.Toolbar</td>
<td>Boolean</td>
<td>true</td>
</tr>

<tr>
<td>Elvis.Statusbar</td>
<td>Boolean</td>
<td>true</td>
</tr>

<tr>
<td>Elvis.Font</td>
<td>Font</td>
<td>fixed</td>
</tr>

<tr>
<td>Elvis.Geometry</td>
<td>Geometry</td>
<td>80x34</td>
</tr>

<tr>
<td>Elvis.Foreground</td>
<td>Color</td>
<td>black</td>
</tr>

<tr>
<td>Elvis.Background</td>
<td>Color</td>
<td>gray90</td>
</tr>

<tr>
<td>Elvis.MultiClickTimeout</td>
<td>Timeout</td>
<td>3</td>
</tr>

<tr>
<td>Elvis.Control.Font</td>
<td>Font</td>
<td>variable</td>
</tr>

<tr>
<td>Elvis.Cursor.Foreground</td>
<td>Color</td>
<td>red</td>
</tr>

<tr>
<td>Elvis.Cursor.Selected</td>
<td>Color</td>
<td>red</td>
</tr>

<tr>
<td>Elvis.Cursor.BlinkTime</td>
<td>Timeout</td>
<td>3</td>
</tr>

<tr>
<td>Elvis.Tool.Foreground</td>
<td>Color</td>
<td>black</td>
</tr>

<tr>
<td>Elvis.Tool.Background</td>
<td>Color</td>
<td>gray75</td>
</tr>

<tr>
<td>Elvis.Scrollbar.Foreground</td>
<td>Color</td>
<td>gray75</td>
</tr>

<tr>
<td>Elvis.Scrollbar.Background</td>
<td>Color</td>
<td>gray60</td>
</tr>

<tr>
<td>Elvis.Scrollbar.Width</td>
<td>Number</td>
<td>11</td>
</tr>

<tr>
<td>Elvis.Scrollbar.Repeat</td>
<td>Timeout</td>
<td>4</td>
</tr>

<tr>
<td>Elvis.Scrollbar.Position</td>
<td>Edge</td>
<td>right</td>
</tr>


</table><p>

<p>The "Timeout" type gives a time value, in tenths of a second.
The "Edge" type gives a scrollbar position,
one of <tt class="literal">left</tt>, <tt class="literal">right</tt>, or <tt class="literal">none</tt>.</p>

<p>For example, if your X resource database contains the line
<tt class="literal">elvis.font: 10x20</tt>, the default text
font would be <tt class="literal">10x20</tt>.
This value would be used if the
<tt class="literal">normalfont</tt> option was unset.</p>
</div>




<a name="IXT-10-281468" />
<a name="IXT-10-281469" />
<a name="IXT-10-281470" />
<a name="IXT-10-281471" />


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch10_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch10_07.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">10.5. Multiwindow Editing</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">10.7. Extended Regular Expressions</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>