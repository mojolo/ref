<html><head><title>Options When Starting vi   (Learning the vi Editor, Sixth Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Linda Lamb and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-426-6" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the vi Editor, Sixth Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Learning the vi Editor" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch04_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch04_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">4.2. Options When Starting vi  </h2>

<p>
<a name="ch04.options1" />
<a name="ch04.options2" />
<a name="ch04.options3" />
<a name="ch04.options4" />
<a name="IXT-4-280699" />
<a name="IXT-4-280700" />
In this handbook, you have invoked the <em class="emphasis">vi</em> editor with the
command:</p>

<blockquote><pre class="code">$ <tt class="userinput"><b>vi</b></tt> <em class="replaceable"><tt>file</tt></em></pre></blockquote>

<p>There are other options to the <tt class="literal">vi</tt> command that can be
helpful.
You can open a file directly to a specific line number or pattern.
You can also open a file in read-only mode.
Another option recovers all changes to a file that you were
editing when the system crashed.</p>

<a name="vi6-ch-4-sect-2.1" /><div class="sect2">
<h3 class="sect2">4.2.1. Advancing to a Specific Place </h3>

<p>
<a name="IXT-4-280701" />
<a name="IXT-4-280702" />
<a name="IXT-4-280703" />
<a name="IXT-4-280704" />
When you begin editing an existing file, you can call the file in
and then move to the first occurrence of a <em class="emphasis">pattern</em> or to a
specific line number.
You can also specify
your first movement by search or by line
number right on the command line:<a href="#FOOTNOTE-12">[12]</a>
<a name="IXT-4-280706" />
<a name="IXT-4-280707" />
<a name="IXT-4-280708" /></p><blockquote class="footnote">

<a name="FOOTNOTE-12" /><p> [12]According to the POSIX standard, <em class="emphasis">vi</em> should
use <span class="option">-c</span> <em class="replaceable"><tt>command</tt></em>
<a name="IXT-4-280705" />
instead of <tt class="literal">+</tt><em class="replaceable"><tt>command</tt></em>
as shown here.
Typically, for backwards compatibility, both versions are accepted.</p>

</blockquote>

<dl>
<dt><tt class="literal">$</tt>&#160;<tt class="userinput"><b>vi&#xA0;+</b></tt><tt><em class="replaceable">n&#xA0;file</em></tt></dt><dd>Opens <em class="emphasis">file</em></tt> at line number <em class="emphasis">n</em></tt>.
<a name="IXT-4-280709" /></p></dd>


<dt><tt class="literal">$</tt>&#160;<tt class="userinput"><b>vi&#xA0;+&#xA0;</b></tt><tt><em class="replaceable">file</em></tt></dt><dd>Opens <em class="emphasis">file</em></tt> at last line.
<a name="IXT-4-280710" /></p></dd>


<dt><tt class="literal">$</tt>&#160;<tt class="userinput"><b>vi&#xA0;+/</b></tt><tt><em class="replaceable">pattern&#xA0;file</em></tt></dt><dd>Opens <em class="emphasis">file</em></tt> at the first occurrence of <em class="emphasis">pattern</em></tt>.
<a name="IXT-4-280711" />
<a name="IXT-4-280712" />
<a name="IXT-4-280713" />
<a name="IXT-4-280714" /></p></dd>

</dl>

<p>In the file <em class="filename">practice</em></tt>, to open the file and advance directly to the line
containing the word <em class="emphasis">Screen</em></tt>, enter:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">vi&#160;+/Screen&#xA0;practice</tt></td>
<?graphic_args "" "" 1.29 -.35?><td><img src="figs/vi.0401.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the <tt class="literal">vi</tt> command with the option
<tt class="literal">+/</tt><tt><em class="replaceable"><tt>pattern</tt></em></tt>
to go directly to the line containing <em class="emphasis">Screen</em></tt>.</p></td>
</tr>


</table><p><p>
<p>
As you see in the example above, your search pattern will not
necessarily be positioned at the top of the screen.
If you include spaces in the <em class="emphasis">pattern</em></tt>, you must enclose the whole
pattern within single or double quotes:<a href="#FOOTNOTE-13">[13]</a></p><blockquote class="footnote">

<a name="FOOTNOTE-13" /><p> [13]It is the shell that imposes the quoting requirement, not <em class="emphasis">vi</em></tt>.</p>

</blockquote>

<blockquote><pre class="code">+/"you make"</pre></blockquote>

<p>or escape the space with a backslash:</p>

<blockquote><pre class="code">+/you\ make</pre></blockquote>

<p>In addition, if you want to use the general pattern-matching syntax
described in <a href="ch06_01.htm">Chapter 6</a>,
you may need to protect one or more special characters
from interpretation by the shell with either single quotes or backslashes.</p>

<p>Using <tt class="literal">+/</tt><em class="emphasis">pattern</em></tt> is helpful
if you have to leave an editing session in the
middle. You can mark your place by inserting a pattern
such as <tt class="literal">ZZZ</tt> or <tt class="literal">HERE</tt>.  Then when you return to the
file, all you have to remember is <tt class="literal">/ZZZ</tt> or <tt class="literal">/HERE</tt>.</p>

<blockquote><b>NOTE:</b> 

<a name="IXT-4-280715" />
Normally, when you're editing in <em class="emphasis">vi</em></tt>, the <tt class="literal">wrapscan</tt> option
is enabled. If you've customized your environment so that
<tt class="literal">wrapscan</tt> is always disabled (see <a href="ch03_03.htm#vi6-ch-3-sect-3.1">Section 3.3.1</a>),
you might not be able to
use <tt class="literal">+/</tt><em class="emphasis">pattern</em></tt>.  If you try to open a file this way,
<em class="emphasis">vi</em></tt> opens the file at the last line and displays the message
"Address search hit BOTTOM without matching pattern."</p>
</blockquote>
</div>




<a name="vi6-ch-4-sect-2.2" /><div class="sect2">
<h3 class="sect2">4.2.2. Read-only Mode </h3>

<p>
<a name="IXT-4-280716" />
<a name="IXT-4-280717" />
<a name="IXT-4-280718" />
<a name="IXT-4-280719" />
There will be times when you want to look at a file but want to
protect that file from inadvertent keystrokes and changes.
(You might want to call in a lengthy file to practice
<em class="emphasis">vi</em></tt> movements,
or you might want to scroll through a command file or program).
You can enter a file in read-only mode and use all the <em class="emphasis">vi</em></tt>
movement commands, but you won't be able to change the file.</p>

<p>To look at a file in read-only mode, enter either:
<a name="IXT-4-280720" /></p>

<blockquote><pre class="code">$ <tt class="userinput"><b>vi&#160;-R</b></tt> <tt><em class="replaceable"><tt>file</tt></em></tt></pre></blockquote>

<p>or:
<a name="IXT-4-280721" /></p>

<blockquote><pre class="code">$ <tt class="userinput"><b>view</b></tt> <tt><em class="replaceable"><tt>file</tt></em></tt></pre></blockquote>

<p>(The <tt class="literal">view</tt> command, like the <tt class="literal">vi</tt> command,
can use any of the command-line options for advancing to a
specific place in the file.)<a href="#FOOTNOTE-14">[14]</a>
<a name="IXT-4-280722" />
<a name="IXT-4-280723" />
If you do decide to make some edits to the file, you can override read-only
mode by adding an exclamation point to the <tt class="literal">write</tt> command:
<a name="IXT-4-280724" /></p><blockquote class="footnote">

<a name="FOOTNOTE-14" /><p> [14]Typically <tt class="literal">view</tt> is just a link to <tt class="literal">vi</tt>.</p>

</blockquote>

<blockquote><pre class="code">:w!</pre></blockquote>

<p>or:</p>

<blockquote><pre class="code">:wq!</pre></blockquote>

<p>If you have a problem writing out the file, see the problem checklists
summarized in
<a href="appd_01.htm">Appendix D</a>.</p>
</div>




<a name="vi6-ch-4-sect-2.3" /><div class="sect2">
<h3 class="sect2">4.2.3. Recovering a Buffer </h3>

<p>
<a name="IXT-4-280725" />
<a name="IXT-4-280726" />
<a name="IXT-4-280727" />
<a name="IXT-4-280728" />
Occasionally there is a system failure while you are editing a file.
Ordinarily, any edits made after your last write (save) are lost.
<a name="IXT-4-280729" />
However, there is an option, <tt class="literal">-r</tt>, which lets you
recover the edited buffer at the time of a system crash.</p>

<p>When you first log on after the system
is running again, you will receive a mail message stating
that your buffer has been saved. In addition, if you type the command:</p>

<blockquote><pre class="code">$ <tt class="userinput"><b>ex -r</b></tt></pre></blockquote>

<p>or:</p>

<blockquote><pre class="code">$ <tt class="userinput"><b>vi -r</b></tt></pre></blockquote>

<p>you will get a list of any files that the system has saved.</p>

<p>Use the <tt class="literal">-r</tt> option
with a file name to recover the edited buffer.
For example, to recover the edited buffer of the file
<em class="filename">practice</em></tt> after a system crash, enter:</p>

<blockquote><pre class="code">$ <tt class="userinput"><b>vi -r practice</b></tt></pre></blockquote>

<p>It is wise to recover the file immediately, lest you inadvertently
make edits to the
file, and then have to resolve a version skew between the preserved buffer
and the newly edited file.</p>

<p>
<a name="IXT-4-280730" />
<a name="IXT-4-280731" />
<a name="IXT-4-280732" />
You can force the system to preserve your buffer even when there is
not a crash by using the command <tt class="literal">:pre</tt>.
You may find it useful
if you have made edits to a file, then discover that you can't save
your edits because you don't have write permission. (You could also
just write out a copy of the file under another name or into a directory
where you do have write permission. See <a href="ch01_02.htm#vi6-ch-1-sect-2.1">Section 1.2.1</a>.)</p>

<blockquote><b>NOTE:</b> 
Recovery for the various clones may work differently, and can change
from version to version. It is best to check your local documentation.
<a name="IXT-4-280733" />
<em class="emphasis">vile</em></tt> does not support
any kind of recovery. The <em class="emphasis">vile</em></tt> documentation
<a name="IXT-4-280734" />
<a name="IXT-4-280735" />
<a name="IXT-4-280736" />
<a name="IXT-4-280737" />
recommends the use of the <tt class="literal">autowrite</tt>
and <tt class="literal">autosave</tt> options.
How to do this is described in <a href="ch07_01.htm#vi6-ch-7-sect-1">Section 7.1</a>.</p>
</blockquote>
</div>




<a name="IXT-4-280738" />
<a name="IXT-4-280739" />
<a name="IXT-4-280740" />
<a name="IXT-4-280741" />


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch04_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch04_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">4. Beyond the Basics</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">4.3. Making Use of Buffers</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>