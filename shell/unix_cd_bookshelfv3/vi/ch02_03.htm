<html><head><title>Simple Edits  (Learning the vi Editor, Sixth Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Linda Lamb and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-426-6" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the vi Editor, Sixth Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Learning the vi Editor" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch02_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch02_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">2.3. Simple Edits </h2>

<p>When you enter text in your file, it is rarely perfect.
You find typos or want to improve on a phrase; sometimes your program
has a bug.
Once you enter text, you have to be able to change it, delete it,
move it, or copy it.
<a href="ch02_03.htm#vi6-ch-2-fig-2">Figure 2.3</a>
shows the kinds of edits you
might want to make to a file.
The edits are indicated by proofreading marks.</p>

<a name="vi6-ch-2-fig-2" /><div class="figure"><img src="figs/vi_6.fig.0203.gif" alt="Figure 2.3" width="503" /></div><h4 class="objtitle">Figure 2.3. Proofreading edits</h4><p>
<a name="IXT-2-280385" />
<a name="IXT-2-280386" />
<a name="IXT-2-280387" />
<a name="IXT-2-280388" />
<a name="IXT-2-280389" />
<a name="IXT-2-280390" />
<a name="IXT-2-280391" />
<a name="IXT-2-280392" />
<a name="IXT-2-280393" />
<a name="IXT-2-280394" />
<a name="IXT-2-280395" />
In <em class="emphasis">vi</em> you can perform any of these edits with a few basic
keystrokes:  <tt class="literal">i</tt> for insert (which you've
already seen); <tt class="literal">a</tt> for append; <tt class="literal">c</tt> for change; and
<tt class="literal">d</tt> for delete. To move or copy text, you use a pair of commands.
You move text with a
<a name="IXT-2-280396" />
<a name="IXT-2-280397" />
<a name="IXT-2-280398" />
<a name="IXT-2-280399" />
<a name="IXT-2-280400" />
<a name="IXT-2-280401" />
<a name="IXT-2-280402" />
<a name="IXT-2-280403" />
<a name="IXT-2-280404" />
<tt class="literal">d</tt> for delete, then a <tt class="literal">p</tt> for put; you copy text
with a <tt class="literal">y</tt> for "yank," then a <tt class="literal">p</tt> for put.
Each type of edit is described in this section.
<a href="ch02_03.htm#vi6-ch-2-fig-3">Figure 2.4</a>
shows the <em class="emphasis">vi</em> commands you use to make the
edits marked in
<a href="ch02_03.htm#vi6-ch-2-fig-2">Figure 2.3</a>.</p>

<a name="vi6-ch-2-fig-3" /><div class="figure"><img src="figs/vi_6.fig.0204.gif" alt="Figure 2.4" width="503" /></div><h4 class="objtitle">Figure 2.4. Edits with vi commands</h4>
<a name="vi6-ch-2-sect-3.1" /><div class="sect2">
<h3 class="sect2">2.3.1. Inserting New Text </h3>

<p>You have already seen the insert command used to enter
text into a new file.
You also use the insert command while editing
existing text to add missing characters, words, and sentences.
In the file <em class="filename">practice</em>, suppose you have the
sentence:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0202.gif" alt="Figure 2.3.1" width="334" />
<p>with the cursor positioned as shown.
To insert <em class="emphasis">With a screen editor</em> at the beginning of the
sentence, enter the following:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">2k</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0203.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move the cursor up two lines with the <tt class="literal">k</tt> command,
to the line where you want to make the insertion.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">iWith a</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0204.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Press <tt class="literal">i</tt> to enter insert mode and begin inserting text.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">screen editor</tt><span class="keycap">ESC</span></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0205.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Finish inserting text, and press
<span class="keycap">ESC</span>
to end the insert and return to command mode.</p></td>
</tr>


</table><p><p>
On the screen shown in the example above, <em class="emphasis">vi</em> pushes existing text
to the right as the new text is inserted.
<a name="IXT-2-280405" />
<a name="IXT-2-280406" />
<a name="IXT-2-280407" />
<a name="IXT-2-280408" />
That is because we are assuming that you are using <em class="emphasis">vi</em> on an
"intelligent" terminal that can rewrite the screen with each character you type.
An insert on a "dumb" terminal (such as an <em class="emphasis">adm3a</em>) will look
different.
The terminal itself cannot handle the overhead of updating the
screen for each character typed (without a tremendous sacrifice of
speed), so <em class="emphasis">vi</em> doesn't rewrite the screen
until after you press <span class="keycap">ESC</span>.
On a dumb terminal, the same insert would appear:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Result</th>
</tr>




<tr>
<td><tt class="literal">iWith a</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0206.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Press <tt class="literal">i</tt> to enter insert mode and begin inserting text.
The dumb terminal appears to overwrite the existing
text on the line.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">screen editor</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0207.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>The insertion appears to have overwritten existing text.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><span class="keycap">ESC</span></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0208.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>After you have finished inserting text, press
<span class="keycap">ESC</span>
to end the insert and return to command mode.
<em class="emphasis">vi</em> now rewrites the line, so that you see all existing
text.</p></td>
</tr>


</table><p><p>
</div>




<a name="vi6-ch-2-sect-3.2" /><div class="sect2">
<h3 class="sect2">2.3.2. Appending Text</h3>

<p><img src="figs/VI.icon.lca.gif" alt="Figure " width="30" />
<a name="IXT-2-280409" />
<a name="IXT-2-280410" />
<a name="IXT-2-280411" />
<a name="IXT-2-280412" />
You can append text at any place in your file with the append
command <tt class="literal">a</tt>.
<tt class="literal">a</tt> works in almost the same way as <tt class="literal">i</tt>, except that text
is inserted <em class="emphasis">after</em> the cursor rather than <em class="emphasis">before</em> the cursor.
You may
have noticed that when you press <tt class="literal">i</tt> to enter insert mode,
the cursor doesn't move until after you enter some text.
On the other hand, when you press <tt class="literal">a</tt> to enter insert mode, the
cursor moves one space to the right.
When you enter text, it appears <em class="emphasis">after</em> the original cursor
position.</p>
</div>




<a name="vi6-ch-2-sect-3.3" /><div class="sect2">
<h3 class="sect2">2.3.3. Changing Text </h3>

<p>
<a name="ch02.ccommand1" />
<a name="ch02.ccommand2" />
<a name="ch02.ccommand3" />
<a name="ch02.ccommand4" />
<img src="figs/VI.icon.lcc.gif" alt="Figure " width="30" />
You can replace any text in your file with the change command,
<tt class="literal">c</tt>.
In order to tell <tt class="literal">c</tt> how much text to change, you combine
<tt class="literal">c</tt> with a movement command.
In this way, a movement command serves as a <em class="emphasis">text object</em> for the
<tt class="literal">c</tt> command to affect.
For example, <tt class="literal">c</tt> can be used to change text from the cursor:</p>

<dl>
<dt><tt class="literal">cw</tt></dt><dd>to the end of a word.
<a name="IXT-2-280413" /></p></dd>


<dt><tt class="literal">c2b</tt></dt><dd>back two words</p></dd>


<dt><tt class="literal">c$</tt></dt><dd>to the end of line
<a name="IXT-2-280414" /></p></dd>


<dt><tt class="literal">c0</tt></dt><dd>to the beginning of line.</p></dd>

</dl>

<p>After issuing a change command, you can replace the identified text
with any amount of new text, with no characters at all, with one word,
or with hundreds of lines. <tt class="literal">c</tt>, like <tt class="literal">i</tt> and <tt class="literal">a</tt>, leaves you in insert mode
until you press the
<span class="keycap">ESC</span>
key.</p>

<p>
<a name="IXT-2-280415" />
<a name="IXT-2-280416" />
When the change only affects the current line,
<em class="emphasis">vi</em> marks the end of the text that will be
changed with a <tt class="literal">$</tt>,
so that you can see what part of the line is affected.
(See the example for <tt class="literal">cw</tt>, below.)</p>

<a name="vi6-ch-2-sect-3.3.1" /><div class="sect3">
<h3 class="sect3">2.3.3.1. Words</h3>

<p>
<a name="ch02.wordchange1" />
<a name="ch02.wordchange2" />
<a name="ch02.wordchange3" />
<a name="ch02.wordchange4" />
<img src="figs/VI.icon.lcc.gif" alt="Figure " width="30" /><img src="figs/VI.icon.lcw.gif" alt="Figure " width="30" />
To change a word, combine the <tt class="literal">c</tt> (change) command with
<tt class="literal">w</tt> for word.
You can replace a word (<tt class="literal">cw</tt>) with a longer
or shorter word (or any amount of text).
<tt class="literal">cw</tt> can be thought of as "delete the word marked and insert
new text until
<span class="keycap">ESC</span>
is pressed."</p>

<?troff .Nd 10?><p>Suppose you have the following line in your file <em class="filename">practice</em>:</p>

<blockquote><pre class="code">With an editor you can scroll the page,</pre></blockquote>

<p>and want to change <em class="emphasis">an</em> to <em class="emphasis">a screen</em>. You need to change only
one word:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">w</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0209.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move with <tt class="literal">w</tt> to the place you want the edit to begin.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">cw</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0210.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the change word command. The end of the text to be
changed will be marked with a <tt class="literal">$</tt> (dollar sign).</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">a screen</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0211.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Type in the replacement text, and then press
<span class="keycap">ESC</span>
to return to
command mode.</p></td>
</tr>


</table><p><p><tt class="literal">cw</tt> also works on a portion of a word. For example,
to change <em class="emphasis">spelling</em> to <em class="emphasis">spelled</em>,
you can position the cursor on the <em class="emphasis">i</em>, type
<tt class="literal">cw</tt>, then type <em class="emphasis">ed</em>, and finish
with <span class="keycap">ESC</span>.</p>

<blockquote><table border="1" cellpadding="6"><tr><td><h4 class="objtitle">General Form of vi Commands</h4>

<p>In the change commands we've mentioned up to this point,
you may have noticed the following pattern:
<a name="IXT-2-280417" /></p>


<p>(<em class="emphasis">command</em>)(<em class="emphasis">text object</em>)</p>


<p><em class="emphasis">command</em> is the change command <tt class="literal">c</tt>,
and <em class="emphasis">text object</em> is a movement command
(you don't type the parentheses).
But <tt class="literal">c</tt> is not the only command that requires a text object.
The <tt class="literal">d</tt> command (delete) and the <tt class="literal">y</tt> command (yank)
follow this pattern as well.</p>

<p>Remember also that movement commands take numeric arguments,
so numbers can be added to the text objects of
<tt class="literal">c</tt>, <tt class="literal">d</tt>, and <tt class="literal">y</tt>
commands. For example, <tt class="literal">d2w</tt> and <tt class="literal">2dw</tt>
are commands to delete two words. With this in mind, you can see that
most <em class="emphasis">vi</em> commands follow a general pattern:</p>


<p>(<em class="emphasis">command</em>)(<em class="emphasis">number</em>)(<em class="emphasis">text object</em>)</p>


<p>or the equivalent form:</p>


<p>(<em class="emphasis">number</em>)(<em class="emphasis">command</em>)(<em class="emphasis">text object</em>)</p>


<p>Here's how this works.  <em class="emphasis">number</em> and <em class="emphasis">command</em>
are optional. Without them, you simply have a movement command.
If you add a <em class="emphasis">number</em>, you have a multiple movement.
On the other hand, combine
a <em class="emphasis">command</em> (<tt class="literal">c</tt>, <tt class="literal">d</tt>, or <tt class="literal">y</tt>)
with a <em class="emphasis">text object</em> to get an editing command.</p>

<p>When you realize how many combinations are possible in this way,
<em class="emphasis">vi</em> becomes a powerful editor indeed!</p>

</td></tr></table><p><p></blockquote>
<a name="IXT-2-280418" />
<a name="IXT-2-280419" />
<a name="IXT-2-280420" />
<a name="IXT-2-280421" />
</div>


<a name="vi6-ch-2-sect-3.3.2" /><div class="sect3">
<h3 class="sect3">2.3.3.2. Lines</h3>

<p>
<a name="ch02.linechange1" />
<a name="ch02.linechange2" />
<a name="ch02.linechange3" />
<a name="ch02.linechange4" />
<img src="figs/VI.icon.lcc.gif" alt="Figure " width="30" /><img src="figs/VI.icon.lcc.gif" alt="Figure " width="30" />
To replace the entire current line, there is the special change
command, <tt class="literal">cc</tt>.
<tt class="literal">cc</tt> changes an entire line, replacing that line with any
amount of text entered before pressing
<span class="keycap">ESC</span>.
It doesn't matter where the
cursor is located on the line; <tt class="literal">cc</tt>
replaces the entire line of text.</p>

<p>A command like <tt class="literal">cw</tt> works differently from a command like
<tt class="literal">cc</tt>.  In using <tt class="literal">cw</tt>, the old text remains until you type
over it, and any old text that is left over (up to the <tt class="literal">$</tt>)
goes away when you press
<span class="keycap">ESC</span>.
In using <tt class="literal">cc</tt>, though, the old text is wiped out first, leaving you
a blank line on which to insert text.</p>

<p>
<a name="IXT-2-280422" />
The "type over" approach happens with any change command that
affects less than a whole line, whereas the "blank line"
approach happens with any change command that affects one or more
lines.</p>

<p><img src="figs/VI.icon.capc.gif" alt="Figure " width="30" />
<a name="IXT-2-280423" />
<tt class="literal">C</tt> replaces characters from the current cursor position to the
end of the line.
It has the same effect as combining
<tt class="literal">c</tt> with the
special end-of-line indicator <tt class="literal">$</tt> (<tt class="literal">c$</tt>).</p>

<p>The commands <tt class="literal">cc</tt> and <tt class="literal">C</tt> are really shortcuts for other
commands, so they don't follow the general form of <em class="emphasis">vi</em> commands.
You'll see other shortcuts when we discuss the delete and yank commands.</p>

<a name="IXT-2-280424" />
<a name="IXT-2-280425" />
<a name="IXT-2-280426" />
<a name="IXT-2-280427" />
</div>


<a name="vi6-ch-2-sect-3.3.3" /><div class="sect3">
<h3 class="sect3">2.3.3.3. Characters</h3>

<p>
<a name="IXT-2-280428" />
<a name="IXT-2-280429" />
<a name="IXT-2-280430" />
<a name="IXT-2-280431" />
<img src="figs/VI.icon.lcr.gif" alt="Figure " width="30" />
One other replacement edit is given by the <tt class="literal">r</tt> command.
<tt class="literal">r</tt> replaces a single character with another single character.
You do <em class="emphasis">not</em> have to press
<span class="keycap">ESC</span>
 to return to command mode after making the edit.
There is a misspelling in the line below:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0212.gif" alt="Figure 2.3.3.3" width="334" /><p>Only one letter needs to be corrected.
You don't want to use <tt class="literal">cw</tt> in this instance because you would
have to retype the entire word.
Use <tt class="literal">r</tt> to replace a single character at the cursor:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">rW</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0213.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the replace command <tt class="literal">r</tt>, followed by the replacement
character <em class="emphasis">W</em>.</p></td>
</tr>


</table><p><p>
</div>


<a name="vi6-ch-2-sect-3.3.4" /><div class="sect3">
<h3 class="sect3">2.3.3.4. Substituting text</h3>

<p>
<a name="IXT-2-280432" />
<img src="figs/VI.icon.lcs.gif" alt="Figure " width="30" />
Suppose you want to change just a few characters, and not a whole
word. The substitute command (<tt class="literal">s</tt>), by itself,
replaces a single character. With a preceding count, you can replace
that many characters. As with the change command (<tt class="literal">c</tt>),
the last character of the text will be marked with a <tt class="literal">$</tt>
so that you can see how much text will be changed.</p>

<p>
<a name="IXT-2-280433" />
<a name="IXT-2-280434" />
<a name="IXT-2-280435" />
<a name="IXT-2-280436" />
<a name="IXT-2-280437" />
<img src="figs/VI.icon.caps.gif" alt="Figure " width="30" />
The <tt class="literal">S</tt> command, as is usually the case with uppercase
commands, lets you change whole lines. In contrast to the
<tt class="literal">C</tt> command, which changes the rest of the line
from the current cursor position, the <tt class="literal">S</tt> command
deletes the entire line, no matter where the
cursor is. <em class="emphasis">vi</em> puts you in insert mode at the
beginning of the line.
A preceding count replaces that many lines.</p>

<p>Both <tt class="literal">s</tt> and <tt class="literal">S</tt> put you in
insert mode; when you are finished entering new text, press
<span class="keycap">ESC</span>.</p>

<p>
<a name="IXT-2-280438" />
<a name="IXT-2-280439" />
<img src="figs/VI.icon.capr.gif" alt="Figure " width="30" />
The <tt class="literal">R</tt> command, like its lowercase counterpart,
replaces text. The difference is that it simply enters overstrike
mode. The characters you type replace what's on the screen,
character by character, until you type <span class="keycap">ESC</span>.
You can only overstrike a maximum of one line; as you type
<span class="keycap">RETURN</span>, <em class="emphasis">vi</em> will open a new line,
effectively putting you into insert mode.</p>
</div>


<a name="IXT-2-280440" />
<a name="IXT-2-280441" />
<a name="IXT-2-280442" />
<a name="IXT-2-280443" />
</div>




<a name="vi6-ch-2-sect-3.4" /><div class="sect2">
<h3 class="sect2">2.3.4. Changing Case </h3>

<p>
<a name="IXT-2-280444" />
<a name="IXT-2-280445" />
<a name="IXT-2-280446" />
<a name="IXT-2-280447" />
<a name="IXT-2-280448" />
<a name="IXT-2-280449" />
<a name="IXT-2-280450" />
<a name="IXT-2-280451" />
<img src="figs/VI.icon.tilde.gif" alt="Figure " width="30" />
Changing the case of a letter is a special form of replacement. The
tilde (<tt class="literal">~</tt>) command will change a lowercase letter to uppercase, or an
uppercase letter to lowercase. Position the cursor on the letter
whose case you  want to change, and type a <tt class="literal">~</tt>.  The case of the
letter will change, and the cursor will move to the next character.</p>

<p>In older versions of <em class="emphasis">vi</em>, you
cannot specify a numeric prefix or text object for the <tt class="literal">~</tt> to affect.
Modern versions do allow a numeric prefix.</p>

<p>
<a name="IXT-2-280452" />
If you want to change the case of more than one line at a time, you
must filter the text through a UNIX command like <tt class="literal">tr</tt>, as
described in <a href="ch07_01.htm">Chapter 7</a>.</p>
</div>




<a name="vi6-ch-2-sect-3.5" /><div class="sect2">
<h3 class="sect2">2.3.5. Deleting Text</h3>

<p>
<a name="ch02.delete1" />
<a name="ch02.delete2" />
<img src="figs/VI.icon.lcd.gif" alt="Figure " width="30" />
<a name="IXT-2-280453" />
You can also delete any text in your file with the delete command
<tt class="literal">d</tt>.
Like the change command, the delete command requires a
text object (the amount of text to be operated on).
You can delete by word (<tt class="literal">dw</tt>), by line (<tt class="literal">dd</tt> and <tt class="literal">D</tt>),
or by other movement commands that you will learn later.</p>

<p>With all deletions, you move to where you want the edit to take
place, then give the delete command (<tt class="literal">d</tt>) and the text object,
such as <tt class="literal">w</tt> for word.</p>

<a name="vi6-ch-2-sect-3.5.1" /><div class="sect3">
<h3 class="sect3">2.3.5.1. Words</h3>

<p>
<a name="IXT-2-280454" />
<a name="IXT-2-280455" />
<a name="IXT-2-280456" />
<a name="IXT-2-280457" />
<img src="figs/VI.icon.lcd.gif" alt="Figure " width="30" /><img src="figs/VI.icon.lcw.gif" alt="Figure " width="30" />
Suppose you have the following text in the file:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0214.gif" alt="Figure 2.3.5.1" width="334" /><p>with the cursor positioned as shown.
You want to delete one <em class="emphasis">are</em> in the first line.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">2w</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0215.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move the cursor to where you want the edit to begin (<em class="emphasis">are</em>).</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">dw</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0216.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the delete word command (<tt class="literal">dw</tt>) to delete the word
<em class="emphasis">are</em>.</p></td>
</tr>


</table><p><p><tt class="literal">dw</tt> deletes a word beginning where the cursor is
positioned. Notice that the space following the word is
deleted.</p>

<?troff .Nd 10?><p><tt class="literal">dw</tt> can also be used to delete a portion of a word.
In this example:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0217.gif" alt="Figure 2.3.5.1" width="334" /><p>you want to delete the <em class="emphasis">ed</em> from the end of <em class="emphasis">allowed</em>.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">dw</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0218.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the delete word command (<tt class="literal">dw</tt>) to delete the word,
beginning with the position of the cursor.</p></td>
</tr>


</table><p><p><tt class="literal">dw</tt> always deletes the space before the next word on
a line, but we don't want to do that in the previous example.
<a name="IXT-2-280458" />
<a name="IXT-2-280459" />
To retain the space between words, use <tt class="literal">de</tt>, which will delete
only to the end of a word. Typing <tt class="literal">dE</tt> will delete to the
end of a word, including punctuation.</p>

<p>
<a name="IXT-2-280460" />
<a name="IXT-2-280461" />
<a name="IXT-2-280462" />
You can also delete backward (<tt class="literal">db</tt>) or to the end or
beginning of a line (<tt class="literal">d$</tt> or <tt class="literal">d0</tt>).</p>
</div>


<a name="vi6-ch-2-sect-3.5.2" /><div class="sect3">
<h3 class="sect3">2.3.5.2. Lines</h3>

<p>
<a name="IXT-2-280463" />
<a name="IXT-2-280464" />
<a name="IXT-2-280465" />
<a name="IXT-2-280466" />
<img src="figs/VI.icon.lcd.gif" alt="Figure " width="30" /><img src="figs/VI.icon.lcd.gif" alt="Figure " width="30" />
The <tt class="literal">dd</tt> command deletes the entire line that the cursor is on.
<tt class="literal">dd</tt> will not delete part of a line.
Like its complement <tt class="literal">cc</tt>, <tt class="literal">dd</tt> is a special command.






Using the same text as in the previous example, with the
cursor positioned on the first line as shown below:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0219.gif" alt="Figure 2.3.5.2" width="334" /><p>you can delete the first two lines:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">2dd</tt></td>
<td><img src="figs/vi.0220.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the command to delete two lines (<tt class="literal">2dd</tt>).
Note that even though the cursor was not positioned on the beginning of
the line, the entire line is deleted.</p></td>
</tr>


</table><p><p>
<a name="IXT-2-280467" />
If you are using a "dumb" terminal<a href="#FOOTNOTE-7">[7]</a> (or a very slow one),
line deletions look different.
The dumb terminal will not redraw the screen until you scroll past the
bottom of the screen.
On a dumb terminal the deletion looks like this:</p><blockquote class="footnote">

<a name="FOOTNOTE-7" /><p> [7]Dumb terminals are rather rare these days. Most of the time, you will
run <em class="emphasis">vi</em> inside a terminal emulator on a bitmapped screen.</p>

</blockquote>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">2dd</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0221.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the command to delete two lines (<tt class="literal">2dd</tt>).
An @ symbol "holds the place" of the deleted line, until
<em class="emphasis">vi</em> redraws the entire screen.</p></td>
</tr>


</table><p><p><img src="figs/VI.icon.capd.gif" alt="Figure " width="30" />
<a name="IXT-2-280468" />
The <tt class="literal">D</tt> command deletes from the cursor position
to the end of the line. (<tt class="literal">D</tt> is a shortcut for
<tt class="literal">d$</tt>.) For example, with the cursor positioned as shown:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0222.gif" alt="Figure 2.3.5.2" width="334" /><p>you can delete the portion of the line to the right of the cursor.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">D</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0223.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the command to delete the portion of the line to the
right of the cursor (<tt class="literal">D</tt>).</p></td>
</tr>


</table><p><p>
</div>


<a name="vi6-ch-2-sect-3.5.3" /><div class="sect3">
<h3 class="sect3">2.3.5.3. Characters</h3>

<p>
<a name="IXT-2-280469" />
<a name="IXT-2-280470" />
<a name="IXT-2-280471" />
<a name="IXT-2-280472" />
<img src="figs/VI.icon.lcx.gif" alt="Figure " width="30" />
Often you want to delete only one or two characters.
Just as <tt class="literal">r</tt> is a special change
command to replace a single character, <tt class="literal">x</tt> is a special delete
command to delete a single character.
<tt class="literal">x</tt> deletes only the character the cursor is on.
In the line below:</p>

<blockquote><pre class="code"><u class="emphasis-underline">z</u>You can move text by deleting text and then</pre></blockquote>

<p>		you can delete the letter <em class="emphasis">z</em> by pressing <tt class="literal">x</tt>.<a href="#FOOTNOTE-8">[8]</a>
		A capital <tt class="literal">X</tt> deletes the character before the cursor.
		<a name="IXT-2-280473" />
		Prefix either of these commands with a number to delete that number of
		characters.
		For example, <tt class="literal">5x</tt> will delete the five characters
		under and to the right of the cursor.</p><blockquote class="footnote">

<a name="FOOTNOTE-8" /><p> [8]		The mnemonic for <tt class="literal">x</tt> is that it is supposedly like
		"x-ing out" mistakes with a typewriter.
		Of course, who uses a typewriter any more?</p>

</blockquote>
</div>


<a name="vi6-ch-2-sect-3.5.4" /><div class="sect3">
<h3 class="sect3">2.3.5.4. Problems with deletions</h3>

<a name="ch02.troubledelete" />
<a name="IXT-2-280474" />
<ul>
<li><p>
<em class="emphasis">You've deleted the wrong text and you want to get it back.</em>
<a name="IXT-2-280475" />
<a name="IXT-2-280476" />
<a name="IXT-2-280477" /></p>

<p>
There are several ways to recover deleted text.
If you've just deleted something and you realize you want it back,
simply type <tt class="literal">u</tt> to undo the last command (for example, a <tt class="literal">dd</tt>).
<a name="IXT-2-280478" />
<a name="IXT-2-280479" />
This works only if you haven't given any further commands, since
<tt class="literal">u</tt> only undoes the most recent command.
On the other hand,
a <tt class="literal">U</tt> will restore the line to its pristine state; the way it
was before <em class="emphasis">any</em> changes were applied to it.</p>

<p>
<a name="IXT-2-280480" />
<a name="IXT-2-280481" />
<a name="IXT-2-280482" />
You can still recover a recent deletion, however, by using the <tt class="literal">p</tt>
command, since <em class="emphasis">vi</em> saves the last nine deletions in nine numbered deletion
buffers.
If you know, for example, that the third deletion back is the one you want to
restore, type:</p>



<blockquote><pre class="code">  "3p</pre></blockquote>



<p>
to "put" the contents of buffer number 3 on the line below the
cursor.</p>

<p>
This works only for a deleted <em class="emphasis">line</em>.
Words, or a portion of a line, are not saved in a buffer.
<a name="IXT-2-280483" />
<a name="IXT-2-280484" />
If you want to restore a deleted word or line fragment, and <tt class="literal">u</tt>
won't work, use the <tt class="literal">p</tt> command by itself.
This restores whatever you've last deleted.
The next few subsections will talk more about the commands <tt class="literal">u</tt>
and <tt class="literal">p</tt>.</p></li>
</ul>
</div>


<a name="IXT-2-280485" />
<a name="IXT-2-280486" />
</div>




<a name="vi6-ch-2-sect-3.6" /><div class="sect2">
<h3 class="sect2">2.3.6. Moving Text </h3>

<p>		<a name="IXT-2-280487" />
		<a name="IXT-2-280488" />
		<a name="IXT-2-280489" />
		In <em class="emphasis">vi</em>, you move text by deleting it and then placing that deleted
		text elsewhere in the file, like a "cut and paste."
		Each time you delete a text block, that deletion is temporarily saved in a
		special buffer.
		Move to another position in your file and use
		the put command (<tt class="literal">p</tt>) to place that text in the new position.
		You can move any block of text, although moving is more useful
		with lines than with words.</p>

<p>		<a name="IXT-2-280490" />
		<img src="figs/VI.icon.lcp.gif" alt="Figure " width="30" />
		The put command (<tt class="literal">p</tt>)
		puts the text that is in the buffer <em class="emphasis">after</em> the
		cursor position. The uppercase version of the command,
		<a name="IXT-2-280491" />
		<tt class="literal">P</tt>, puts the text <em class="emphasis">before</em>
		the cursor. If you delete one or more lines,
		<tt class="literal">p</tt> puts the deleted text on a new line(s) below the cursor.
		If you delete less than an entire line, <tt class="literal">p</tt> puts the deleted text on the current line, after the cursor.</p>

<p>		Suppose in your file <em class="filename">practice</em> you have the text:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0224.gif" alt="Figure 2.3.6" width="334" /><p>		and want to move the second line, <em class="emphasis">like a "cut and paste",</em>
		below the third line.
		Using delete, you can make this edit.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">dd</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0225.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>With the cursor on the second line, delete that line.
The text is placed in a buffer (reserved memory).</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">p</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0226.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Give the put command, <tt class="literal">p</tt>, to restore the deleted line at the
next line below the cursor.
To finish reordering this
sentence, you would also have to change the capitalization and
punctuation (with <tt class="literal">r</tt>) to match the new structure.</p></td>
</tr>


</table><p><p><blockquote><b>NOTE:</b> 
<p>Once you delete text, you must restore it
before the next change command or delete command.
<a name="IXT-2-280492" />
<a name="IXT-2-280493" />
<a name="IXT-2-280494" />
<a name="IXT-2-280495" />
<a name="IXT-2-280496" />
<a name="IXT-2-280497" />
<a name="IXT-2-280498" />
<a name="IXT-2-280499" />
<a name="IXT-2-280500" />
If you make another edit that affects the buffer, your
deleted text will be lost.
You can repeat the put over and over,
so long as you don't make a new edit.
In <a href="ch04_01.htm">Chapter 4</a>, you will learn how to save text you delete in a named buffer so you can retrieve it later.</p>
</blockquote>

<a name="vi6-ch-2-sect-3.6.1" /><div class="sect3">
<h3 class="sect3">2.3.6.1. Transposing two letters</h3>

<p>
<a name="IXT-2-280501" />
<a name="IXT-2-280502" />
<a name="IXT-2-280503" />
<a name="IXT-2-280504" />
You can use <tt class="literal">xp</tt> (delete character and put after cursor) to
transpose two letters.
For example, in the word <em class="emphasis">mvoe</em>, the letters <em class="emphasis">vo</em> are
transposed (reversed).
To correct a transposition, place the cursor on <em class="emphasis">v</em> and press
<tt class="literal">x</tt>, then <tt class="literal">p</tt>.
By coincidence, the word <em class="emphasis">transpose</em> helps you remember the
sequence <tt class="literal">xp</tt>; <tt class="literal">x</tt> stands for <em class="emphasis">trans</em>,
and <tt class="literal">p</tt> stands for <em class="emphasis">pose</em>.</p>

<p>
<a name="IXT-2-280505" />
<a name="IXT-2-280506" />
There is no command to transpose words. The section
"More Examples of Mapping Keys" in <a href="ch07_01.htm">Chapter 7</a>
discusses a short sequence of commands that transposes two words.</p>
</div>
</div>




<a name="vi6-ch-2-sect-3.7" /><div class="sect2">
<h3 class="sect2">2.3.7. Copying Text </h3>

<p>
<a name="ch02.copytext1" />
<a name="ch02.copytext2" />
<a name="ch02.copytext3" />
<img src="figs/VI.icon.lcy.gif" alt="Figure " width="30" />
Often you can save editing time (and keystrokes) by copying a
part of your file to use in other places.
<a name="IXT-2-280507" />
With the two commands <tt class="literal">y</tt> (for yank) and <tt class="literal">p</tt> (for put),
you can copy any amount of text and put that copied text in another
place in the file.
A yank command copies the selected text into a special buffer,
where it is held until another yank (or deletion) occurs.
You can then place this copy elsewhere in the file with the put command.</p>

<p>As with change and delete, the yank command can be combined
with any movement command (<tt class="literal">yw</tt>, <tt class="literal">y$</tt>, <tt class="literal">4yy</tt>).
Yank is most frequently used with a line (or more) of text,
because to yank and put a word usually takes longer than
simply to insert the word.</p>

<p>
<a name="IXT-2-280508" />
<a name="IXT-2-280509" />
<a name="IXT-2-280510" />
The shortcut <tt class="literal">yy</tt> operates on an entire line,
just as <tt class="literal">dd</tt> and <tt class="literal">cc</tt> do. But the shortcut <tt class="literal">Y</tt>,
for some reason, does not operate the way <tt class="literal">D</tt> and <tt class="literal">C</tt> do.
Instead of yanking from the current position to the end of the line,
<tt class="literal">Y</tt> yanks the whole line.  <tt class="literal">Y</tt> does the same thing
as <tt class="literal">yy</tt>.</p>

<p>Suppose you have in your file <em class="filename">practice</em> the text:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0227.gif" alt="Figure 2.3.7" width="334" /><p>You want to make three complete sentences, beginning each with
<em class="emphasis">With a screen editor you can</em>.
Instead of moving
through the file, making this edit over and over,
you can use a yank and put to copy the text to be added.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">yy</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0228.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Yank the line of text that you want to copy into the buffer.
The cursor can be anywhere on the line you want to yank (or on
the first line of a series of lines).</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">2j</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0229.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move the cursor to where you want to put the yanked text.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">P</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0230.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Put the yanked text above the cursor line with <tt class="literal">P</tt>.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">jp</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0231.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move the cursor down a line and put the yanked text below
the cursor line with <tt class="literal">p</tt>.</p></td>
</tr>


</table><p><p>
<a name="IXT-2-280511" />
<a name="IXT-2-280512" />
<a name="IXT-2-280513" />
<a name="IXT-2-280514" />
<a name="IXT-2-280515" />
<a name="IXT-2-280516" />
<a name="IXT-2-280517" />
<a name="IXT-2-280518" />
<a name="IXT-2-280519" />
<a name="IXT-2-280520" />
Yanking uses the same buffer as deleting.
Each new deletion or yank replaces the previous contents of the yank
buffer. As we'll
see in <a href="ch04_01.htm">Chapter 4</a>, up to nine previous yanks or
deletions can be recalled with put commands. You can also yank or delete
directly into up to 26 named buffers, which allows you to
juggle multiple text blocks at once.</p>

<a name="IXT-2-280521" />
<a name="IXT-2-280522" />
<a name="IXT-2-280523" />
</div>




<a name="vi6-ch-2-sect-3.8" /><div class="sect2">
<h3 class="sect2">2.3.8. Repeating or Undoing Your Last Command </h3>

<p>
<a name="IXT-2-280524" />
<a name="IXT-2-280525" />
Each edit command that you give is stored in a temporary buffer until
you give the next command.
For example,
if you insert <em class="emphasis">the</em> after a word in
your file, the command used to insert the text, along with the text
that you entered, is temporarily saved.</p>

<a name="vi6-ch-2-sect-3.8.1" /><div class="sect3">
<h3 class="sect3">2.3.8.1. Repeat</h3>

<p>
<a name="ch02.repeating1" />
<img src="figs/VI.icon.period.gif" alt="Figure " width="30" />
Any time you make the same editing command over and over,
you can save time by duplicating it with
<a name="IXT-2-280526" />
<a name="IXT-2-280527" />
<a name="IXT-2-280528" />
the repeat command, the period (.).
Position
the cursor where you want to
repeat the editing command, and type
a period.</p>

<?troff .Nd 10?><p>Suppose you have the following lines in your file:</p>

<?graphic_args "" "" .815?><img src="figs/vi.0232.gif" alt="Figure 2.3.8.1" width="334" /><p>You can delete one line, and then, to delete another line, simply type
a period.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">dd</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0233.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Delete a line with the command <tt class="literal">dd</tt>.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">.</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0234.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Repeat the deletion.</p></td>
</tr>


</table><p><p>Older versions of <em class="emphasis">vi</em> had problems repeating commands.
For example, such versions may
have difficulty repeating
a long insertion when <tt class="literal">wrapmargin</tt> is set.
<a name="IXT-2-280529" />
<a name="IXT-2-280530" />
<a name="IXT-2-280531" />
<a name="IXT-2-280532" />
<a name="IXT-2-280533" />
<a name="IXT-2-280534" />
If you have such a version, this bug
will probably bite you sooner or later.
There's not a lot you can do about it after the fact,
but it helps to be forewarned.
(Modern versions do not seem to have this problem.)
There are two ways you can guard against a
potential problem when repeating long insertions.
You can write your file (<tt class="literal">:w</tt>) before repeating the
insertion (returning to this copy if the insertion doesn't work
correctly).
You can also turn off <tt class="literal">wrapmargin</tt> like this:</p>

<blockquote><pre class="code">:set wm=0</pre></blockquote>


<p>In <a href="ch07_03.htm#vi6-ch-7-sect-3.5">Section 7.3.5</a>,
we'll show you an easy way to
ause the wrapmargin solution.
<a name="IXT-2-280535" />
<a name="IXT-2-280536" />
In some versions of <em class="emphasis">vi</em>, the command
<span class="keycap">CTRL-@</span>
repeats the most recent insertion.
<span class="keycap">CTRL-@</span>
is typed in <em class="emphasis">insert</em> mode and returns you to command mode.</p>

<a name="IXT-2-280537" />
</div>


<a name="vi6-ch-2-sect-3.8.2" /><div class="sect3">
<h3 class="sect3">2.3.8.2. Undo</h3>

<p>
<a name="ch02.undoing1" />
<a name="ch02.undoing2" />
<img src="figs/VI.icon.lcu.gif" alt="Figure " width="30" />
As mentioned earlier, you can undo your last command if you make an error.
Simply press <tt class="literal">u</tt>.
The cursor need not be
on the line where the original edit was made.</p>

<?troff .Nd 10?><p>To continue the example above, showing deletion of lines in the
file <em class="filename">practice</em>:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">u</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0235.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?><tt class="literal">u</tt> undoes the last command and restores the deleted line.</p></td>
</tr>


</table><p><p>
<a name="IXT-2-280538" />
<tt class="literal">U</tt>, the uppercase version of <tt class="literal">u</tt>, undoes all
edits on a single line, <em class="emphasis">as long as the cursor remains on that line</em>.
Once you move off a line, you can no longer use <tt class="literal">U</tt>.</p>

<p>Note that you can undo your last undo with <tt class="literal">u</tt>, toggling between
two versions of text.  <tt class="literal">u</tt> will also undo <tt class="literal">U</tt>, and <tt class="literal">U</tt> will undo any changes to a line, including those made with <tt class="literal">u</tt>.
(A tip: the fact that <tt class="literal">u</tt> can undo itself leads to a nifty way
to get around in a file.
If you ever want to get back to the site of
your last edit, simply undo it. You will pop back to the appropriate line.
When you undo the undo, you'll stay on that line.)</p>

<a name="IXT-2-280539" />
<a name="IXT-2-280540" />
</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch02_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch02_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">2.2. Moving the Cursor</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">2.4. More Ways to Insert Text </td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>
