<html><head><title>Movement by Searches  (Learning the vi Editor, Sixth Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Linda Lamb and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-426-6" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the vi Editor, Sixth Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Learning the vi Editor" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch03_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">3.3. Movement by Searches </h2>

<p>
<a name="ch03.searching1" />
<a name="ch03.searching2" />
<a name="ch03.searching3" />
<a name="ch03.searching4" />
<a name="IXT-3-280635" />
<img src="figs/VI.icon.slash.gif" alt="Figure " width="30" />
One of the most useful ways to move around in a large file quickly is by
searching for text, or more properly, a <em class="emphasis">pattern</em> of characters.
Sometimes a search can be performed to find a misspelled word or
to find each occurrence of a variable in a program.</p>

<p>
<a name="IXT-3-280636" />
<a name="IXT-3-280637" />
The search command is the special character <tt class="literal">/</tt> (slash).
When you enter a slash, it appears on the bottom line of the
screen; you then type in the <em class="emphasis">pattern</em> that you
want to find: <tt class="literal">/</tt><em class="replaceable"><tt>pattern</tt></em>.</p>

<p>
<a name="IXT-3-280638" />
A pattern can be a whole word or any other sequence of characters
(called a "character string").
For example, if you search for the characters
<em class="emphasis">red</em>, you will match <em class="emphasis">red</em> as a whole word, but you'll
also match occur<em class="emphasis">red</em>.  
If you include a space before or after <em class="emphasis">pattern</em>, the
spaces will be treated as part of the word.
As with all bottom-line commands, press
<span class="keycap">RETURN</span> to finish. <em class="emphasis">vi</em>, like all other UNIX editors, has a special
pattern-matching language that allows you to look for variable text
patterns; for example, any word beginning with a capital letter,
or the word <em class="emphasis">The</em> at the beginning of a line.</p>

<p>We'll talk about this more powerful pattern-matching syntax in 
<a href="ch06_01.htm">Chapter 6</a>. For right now, think of
<em class="emphasis">pattern</em> simply as a word or phrase.</p>

<p>
<a name="IXT-3-280639" />
<a name="IXT-3-280640" />
<a name="IXT-3-280641" />
<em class="emphasis">vi</em> begins the search at
the cursor and searches forward, wrapping around to the start of
the file if necessary.
The cursor will move to the first
occurrence of the pattern. If there is no match, the message
<a name="IXT-3-280642" />
"Pattern not found" will be
shown on the status line.<a href="#FOOTNOTE-10">[10]</a></p><blockquote class="footnote">

<a name="FOOTNOTE-10" /><p> [10]The exact messages will vary with different <em class="emphasis">vi</em>
clones, but their meanings will be the same. In general, we won't
bother noting everywhere that the text of a message may be different;
in all cases the information conveyed will be the same.</p>

</blockquote>

<p>Using the file <em class="filename">practice</em>, here's how to move the cursor by searches:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">/edits</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0303.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Search for the pattern <em class="emphasis">edits</em>.  Press
<span class="keycap">RETURN</span>
to enter.
The cursor moves directly to that pattern.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">/scr</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0304.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Search for the pattern <em class="emphasis">scr</em>.
Press <span class="keycap">RETURN</span> to enter.
Note that there is no space after <em class="emphasis">scr</em>.</p></td>
</tr>


</table><p><p>
<p>The search wraps around to the front of the file.
Note that you can give any combination of characters;  a search
does not have to be for a complete word.</p>

<p>
<a name="IXT-3-280643" />
<a name="IXT-3-280644" />
<a name="IXT-3-280645" />
To search backward, type a <tt class="literal">?</tt> instead of a <tt class="literal">/</tt>:</p>

<blockquote><pre class="code">?<em class="replaceable"><tt>pattern</tt></em></pre></blockquote>

<?troff .Nd 10?><p>In both cases, the search wraps around to the beginning or end of the file, if
necessary.</p>

<a name="vi6-ch-3-sect-3.1" /><div class="sect2">
<h3 class="sect2">3.3.1. Repeating Searches </h3>

<p> 
<a name="IXT-3-280646" />
<a name="IXT-3-280647" />
<a name="IXT-3-280648" />
<img src="figs/VI.icon.lcn.gif" alt="Figure " width="30" />
The last pattern that you searched for stays available
throughout your editing session. After a search, instead of
repeating your original keystrokes,
you can use a command
to search again for the last pattern.</p>

<table border="1" cellpadding="3">

<tr>
<td><tt class="literal">n</tt></td>
<td>Repeat search in same direction.</td>
</tr>

<tr>
<td><tt class="literal">N</tt></td>
<td>Repeat search in opposite direction.</td>
</tr>

<tr>
<td><p><tt class="literal">/</tt>
<span class="keycap">RETURN</span></p></td>
<td>Repeat search forward.</td>
</tr>

<tr>
<td><p><tt class="literal">?</tt><span class="keycap">RETURN</span></p></td>
<td>Repeat search backward.</td>
</tr>


</table><p><p>
<p>
Since the last pattern stays available,
you can search for a pattern, do some work, and then search again for the
same pattern without retyping it by using <tt class="literal">n</tt>, <tt class="literal">N</tt>, <tt class="literal">/</tt> or <tt class="literal">?</tt>.
The direction of your search (<tt class="literal">/</tt> is forward,
<tt class="literal">?</tt> is backward) is displayed
at the bottom left of the screen.<a href="#FOOTNOTE-11">[11]</a></p><blockquote class="footnote">

<a name="FOOTNOTE-11" /><p> [11]<em class="emphasis">nvi</em> 1.79 does not show the direction for the
<tt class="literal">n</tt> and <tt class="literal">N</tt> commands.
<em class="emphasis">vim</em> 5.x puts the search text into the command line too.</p>

</blockquote>

<p>To continue with the example above, since the pattern
<em class="emphasis">scr</em> is still available for search, you can:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">n</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0305.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move to the next instance of the pattern <em class="emphasis">scr</em> (from <em class="emphasis">scr</em>een to
<em class="emphasis">scr</em>oll) with the <tt class="literal">n</tt> (next) command.</p></td>
</tr>

<?troff .sp .5v?>
<?troff .ND 10?><tr>
<td><tt class="literal">?you</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0306.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Search backward with <tt class="literal">?</tt> from the cursor to the first
occurrence of <em class="emphasis">you</em>.
You need to press <span class="keycap">RETURN</span> after typing the pattern.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">N</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0307.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Repeat previous search for <em class="emphasis">you</em> but in the opposite direction
(forward).</p></td>
</tr>


</table><p><p>
<p>
<a name="IXT-3-280649" />
<a name="IXT-3-280650" />
<a name="IXT-3-280651" />
<a name="IXT-3-280652" />
Sometimes you want to find a word only if it is further ahead;
you don't want the search to wrap around earlier in the file.
<em class="emphasis">vi</em> has an option, <tt class="literal">wrapscan</tt>,
that controls whether searches wrap.
You can disable wrapping like this:</p>

<blockquote><pre class="code">:set nowrapscan</pre></blockquote>

<p>
<a name="IXT-3-280653" />
When <tt class="literal">nowrapscan</tt> is set and a forward search fails, the status line
displays the message:
<a name="IXT-3-280654" /></p>

<blockquote><pre class="code">Address search hit BOTTOM without matching pattern</pre></blockquote>

<p>When <tt class="literal">nowrapscan</tt> is set and a backward search fails, the
message displays "TOP" instead of "BOTTOM".</p>

<p>This section has given only the barest introduction to searching for
patterns. <a href="ch06_01.htm">Chapter 6</a> will teach you more about
pattern matching and its use in making global changes to a file.</p>

<a name="vi6-ch-3-sect-3.1.1" /><div class="sect3">
<h3 class="sect3">3.3.1.1. Changing through searching</h3>

<p>
<a name="IXT-3-280655" />
<a name="IXT-3-280656" />
<a name="IXT-3-280657" />
<a name="IXT-3-280658" />
<a name="IXT-3-280659" />
<a name="IXT-3-280660" />
<a name="IXT-3-280661" />
You can combine the <tt class="literal">/</tt> and <tt class="literal">?</tt> search operators with
the commands that change text, such as <tt class="literal">c</tt> and <tt class="literal">d</tt>.
Continuing with the previous example:</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">d?move</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0308.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Delete from before the cursor up to and through the word <em class="emphasis">move</em>.</p></td>
</tr>


</table><p>Note how the deletion occurs on a character basis, whole lines
are not deleted.</p>
</div>
</div>




<a name="vi6-ch-3-sect-3.2" /><div class="sect2">
<h3 class="sect2">3.3.2. Current Line Searches </h3>

<p>
<a name="IXT-3-280662" />
<a name="IXT-3-280663" />
<a name="IXT-3-280664" />
<a name="IXT-3-280665" />
<a name="IXT-3-280666" />
<a name="IXT-3-280667" />
<img src="figs/VI.icon.lcf.gif" alt="Figure " width="30" />
There are also miniature versions of the search commands that
operate within the current line.
The command <tt class="literal">f</tt><em class="replaceable"><tt>x</tt></em> moves the cursor to the next instance of the
character <em class="emphasis">x</em> (where <em class="emphasis">x</em> stands for any character).
The command <tt class="literal">t</tt><em class="replaceable"><tt>x</em> moves the cursor to the character <em class="emphasis">before</tt></em> the
next instance of <em class="emphasis">x</em>.
Semicolons can then be used repeatedly to "find" your way along.</p>

<p>The in-line search commands are summarized below.
None of these commands will move the cursor to the next line.</p>

<table border="1" cellpadding="3">

<tr>
<td><tt class="literal">f</tt><em class="replaceable"><tt>x</tt></em></td>
<td><p>Find (move cursor to) next occurrence of
<em class="emphasis">x</em> in the line, where <em class="emphasis">x</em> stands for any character.</p></td>
</tr>

<tr>
<td><tt class="literal">F</tt><em class="replaceable"><tt>x</tt></em></td>
<td><p>Find (move cursor to) previous occurrence of <em class="emphasis">x</em> in the line.
<a name="IXT-3-280668" /></p></td>
</tr>

<tr>
<td><tt class="literal">t</tt><em class="replaceable"><tt>x</tt></em></td>
<td><p>Find (move cursor to) character <em class="emphasis">before</em> next occurrence of
<em class="emphasis">x</em> in the line.</p></td>
</tr>

<tr>
<td><tt class="literal">T</tt><em class="replaceable"><tt>x</tt></em></td>
<td><p>Find (move cursor to) character <em class="emphasis">after</em> previous occurrence of
<em class="emphasis">x</em> in the line.
<a name="IXT-3-280669" /></p></td>
</tr>

<tr>
<td><tt class="literal">;</tt></td>
<td><p>Repeat previous find command in same direction.
<a name="IXT-3-280670" />
<a name="IXT-3-280671" />
<a name="IXT-3-280672" /></p></td>
</tr>

<tr>
<td><tt class="literal">,</tt></td>
<td><p>Repeat previous find command in opposite direction.
<a name="IXT-3-280673" />
<a name="IXT-3-280674" /></p></td>
</tr>


</table><p><p>
<p>
With any of these commands, a numeric prefix
<em class="emphasis">n</em> will locate the <em class="emphasis">n</em>th
occurrence. Suppose you are editing in <em class="filename">practice</em>,
on this line:

<?graphic_args "" "" .815?>
<img src="figs/vi.0309.gif" alt="Figure " width="334" /></p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">fo</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0310.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Find the first occurrence of <em class="emphasis">o</em> in your current line with
<tt class="literal">f</tt>.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">;</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0311.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Move to the next occurrence of <em class="emphasis">o</em> with the <tt class="literal">;</tt> command
(find next <em class="emphasis">o</em>).</p></td>
</tr>


</table><p>
<a name="IXT-3-280675" />
<a name="IXT-3-280676" />
<a name="IXT-3-280677" />
<tt class="literal">df</tt><em class="replaceable"><tt>x</em> deletes up to and including the named character <em class="emphasis">x</tt></em>.
This command is useful in deleting or yanking partial lines.
You might need to use <tt class="literal">df</tt><em class="replaceable"><tt>x</tt></em> instead of <tt class="literal">dw</tt> if there were
symbols or punctuation within the line that made counting words
difficult.
The <tt class="literal">t</tt> command works just like <tt class="literal">f</tt>, except that it
positions the cursor before the character searched for. For
example, the command <tt class="literal">ct.</tt> could be used to
change text up to the end of a sentence, leaving the period.</p>
</div>




<a name="IXT-3-280678" />
<a name="IXT-3-280679" />
<a name="IXT-3-280680" />
<a name="IXT-3-280681" />


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch03_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">3.2. Movement by Text Blocks </td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">3.4. Movement by Line Number </td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>