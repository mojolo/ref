<html><head><title>Editing Multiple Files  (Learning the vi Editor, Sixth Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Linda Lamb and Arnold Robbins" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1-56592-426-6" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Learning the vi Editor, Sixth Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Learning the vi Editor" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_04.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch06_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">5.5. Editing Multiple Files </h2>

<p>
<a name="ch05.multiple" />
<a name="IXT-5-280920" />
<em class="emphasis">ex</em> commands enable you to switch between multiple files.
The advantage to editing multiple files is speed.
If you are sharing the system with
other users, it takes time to exit and reenter <em class="emphasis">vi</em> for each
file you want to edit.
Staying in the
same editing session and traveling between files is not only faster
for access, but you also save abbreviations and command sequences
that you have defined (see <a href="ch07_01.htm">Chapter 7</a>),
and you keep yank buffers so that you can copy
text from one file to another.</p>

<a name="vi6-ch-5-sect-5.1" /><div class="sect2">
<h3 class="sect2">5.5.1. Invoking vi on Multiple Files</h3>

<p>
<a name="IXT-5-280921" />
<a name="IXT-5-280922" />
<a name="IXT-5-280923" />
<a name="IXT-5-280924" />
When you first invoke <em class="emphasis">vi</em>, you can name more than one file
to edit, and then use <em class="emphasis">ex</em> commands to
travel between the files. For example:</p>

<blockquote><pre class="code">$ <tt class="userinput"><b>vi file1 file2</b></tt></pre></blockquote>

<p>edits <em class="filename">file1</em> first.
After you have finished editing the first file,
the <em class="emphasis">ex</em> command <tt class="literal">:w</tt> writes (saves) <em class="filename">file1</em>
and <tt class="literal">:n</tt> calls in the next file
(<em class="filename">file2</em>).
<a name="IXT-5-280925" />
<a name="IXT-5-280926" /></p>

<p>Suppose you want to edit two files, <em class="filename">practice</em>
and <em class="filename">note</em>.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">vi practice note</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0504.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Open the two files <em class="filename">practice</em> and <em class="filename">note</em>.
The first-named file, <em class="filename">practice</em>, appears on your screen.
Perform any edits.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">:w</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0505.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Save the edited file <em class="filename">practice</em> with the <em class="emphasis">ex</em> command <tt class="literal">w</tt>.
Press <span class="keycap">RETURN</span>.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">:n</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0506.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Call in the next file, <em class="filename">note</em>, with the <em class="emphasis">ex</em> command <tt class="literal">n</tt>.
Press <span class="keycap">RETURN</span>. Perform any edits.</p></td>
</tr>

<?troff .sp .5v?>
<?troff .ND 20?><tr>
<td><tt class="literal">:x</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0507.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Save the second file, <em class="filename">note</em>, and quit the editing session.</p></td>
</tr>


</table><p><p>
</div>




<a name="vi6-ch-5-sect-5.2" /><div class="sect2">
<h3 class="sect2">5.5.2. Using the Argument List</h3>

<p>
<a name="IXT-5-280927" />
<em class="emphasis">ex</em> actually lets you do more than just
move to the next file in the argument list with <tt class="literal">:n</tt>.
The <tt class="literal">:args</tt> command (abbreviated <tt class="literal">:ar</tt>)
lists the files named on the command line, with the current file enclosed in
brackets.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">vi practice note</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0508.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Open the two files <em class="filename">practice</em> and <em class="filename">note</em>.
The first-named file, <em class="filename">practice</em>, appears on your screen.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">:args</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0509.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?><em class="emphasis">vi</em> displays the argument list in the status line,
with brackets around the current filename.</p></td>
</tr>


</table><p><p>
<a name="IXT-5-280928" />
<a name="IXT-5-280929" />
The <tt class="literal">:rewind</tt> (<tt class="literal">:rew</tt>) command
resets the current file to be the first file named on the command
line. <em class="emphasis">elvis</em> and <em class="emphasis">vim</em> provide
a corresponding <tt class="literal">:last</tt> command to move to the last
file on the command line.</p>
</div>




<a name="vi6-ch-5-sect-5.3" /><div class="sect2">
<h3 class="sect2">5.5.3. Calling in New Files </h3>

<p>
<a name="IXT-5-280930" />
<a name="IXT-5-280931" />
You don't have to call in multiple files at the beginning of your
editing session.
You can switch to another file at any time with the
<em class="emphasis">ex</em> command <tt class="literal">:e</tt>.
<a name="IXT-5-280932" />
If you want to edit another file within <em class="emphasis">vi</em>, you first
need to save your current file
(<tt class="literal">:w</tt>), then give the command:</p>

<blockquote><pre class="code">:<tt class="userinput"><b>e</b></tt> <em class="replaceable"><tt>filename</tt></em></pre></blockquote>

<p>Suppose you are editing the file <em class="filename">practice</em> and want to edit the file
<em class="filename">letter</em>, then return to <em class="filename">practice</em>.</p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">:w</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0510.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Save <em class="emphasis">practice</em> with <tt class="literal">w</tt>
and press <span class="keycap">RETURN</span>.
<em class="emphasis">practice</em> is saved and remains on the screen.
You can now switch to another file, because your edits are saved.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">:e letter</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0511.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Call in the file <em class="filename">letter</em> with
<tt class="literal">e</tt> and press <span class="keycap">RETURN</span>.
Perform any edits.</p></td>
</tr>


</table><p><p><em class="emphasis">vi</em> "remembers" two filenames at a time as the current and
alternate filenames.
<a name="IXT-5-280933" />
<a name="IXT-5-280934" />
<a name="IXT-5-280935" />
<a name="IXT-5-280936" />
<a name="IXT-5-280937" />
<a name="IXT-5-280938" />
<a name="IXT-5-280939" />
These can be referred to by the symbols <tt class="literal">%</tt> (current filename)
and <tt class="literal">#</tt> (alternate filename).
<tt class="literal">#</tt> is particularly useful with
<tt class="literal">:e</tt>, since it allows you to
switch easily back and forth between two files.
In the example given just above, you could return to
the first file, <em class="filename">practice</em>, by typing the command
<tt class="literal">:e #</tt>.
You could also read the file <em class="filename">practice</em> into the current file
by typing <tt class="literal">:r #</tt>.</p>

<p>If you have not first saved the current file, <em class="emphasis">vi</em> will not allow
you to switch files with <tt class="literal">:e</tt> or <tt class="literal">:n</tt> unless you tell it imperatively to
do so by adding an exclamation point after the command.</p>

<p>For example, if after making some edits to <em class="filename">letter</em>,
you wanted to discard the edits and return to <em class="filename">practice</em>,
you could type <tt class="literal">:e! #</tt>.
<a name="IXT-5-280940" /></p>

<p>The following command is also useful.
It discards your edits and returns to the last saved
version of the current file:</p>

<blockquote><pre class="code">:e!</pre></blockquote>

<p>In contrast to the <tt class="literal">#</tt> symbol,
<tt class="literal">%</tt> is useful mainly when writing out the
contents of the current buffer to a new file.
For example, a few pages earlier,
in the section "Renaming the Buffer,"
we showed how to save a second
version of the file <em class="filename">practice</em> with the command:</p>

<blockquote><pre class="code">:w practice.new</pre></blockquote>

<p>Since <tt class="literal">%</tt> stands for the current filename, that line
could also have been typed:</p>

<blockquote><pre class="code">:w %.new</pre></blockquote>
</div>




<?troff .wcon_off?><a name="vi6-ch-5-sect-5.4" /><div class="sect2">
<h3 class="sect2">5.5.4. Switching Files from vi</h3>


<p>
<a name="IXT-5-280941" />
<a name="IXT-5-280942" />
<a name="IXT-5-280943" />
<a name="IXT-5-280944" />
<img src="figs/VI.icon.ctrl.gif" alt="Figure " width="48" /><img src="figs/VI.icon.hat.gif" alt="Figure " width="30" />
Since switching back to the previous file is something that
tends to happen a lot, you don't have to move to the <em class="emphasis">ex</em>
command line to do it. The <em class="emphasis">vi</em> command <tt class="literal">^^</tt>
(the "control" key with the caret key) will do this for you.
Using this command is the same as typing <tt class="literal">:e #</tt>.
As with the <tt class="literal">:e</tt> command, if the current buffer
has not been saved, <em class="emphasis">vi</em> will not let you switch
back to the previous file.</p>
</div>




<a name="vi6-ch-5-sect-5.5" /><div class="sect2">
<h3 class="sect2">5.5.5. Edits Between Files </h3>

<p>
<a name="IXT-5-280945" />
<a name="IXT-5-280946" />
<a name="IXT-5-280947" />
<a name="IXT-5-280948" />
<a name="IXT-5-280949" />
<a name="IXT-5-280950" />
<a name="IXT-5-280951" />
When you give a yank buffer a one-letter name,
you have a convenient way to move text from one file to
another.
Named buffers are not cleared when a new file is loaded into
the <em class="emphasis">vi</em> buffer with the <tt class="literal">:e</tt> command.
Thus, by yanking or deleting text from one file (into multiple named buffers if
necessary), calling in a new file with <tt class="literal">:e</tt>, and putting the
named buffer(s) into the new file, you can transfer material between files.</p>

<p>The following example illustrates how to transfer text from one file to
another.
<a name="IXT-5-280952" />
<a name="IXT-5-280953" />
<a name="IXT-5-280954" /></p>

<table border="1" cellpadding="3">

<tr>
<th>Keystrokes</th>
<th>Results</th>
</tr>




<tr>
<td><tt class="literal">"f4yy</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0512.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Yank four lines into buffer <tt class="literal">f</tt>.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">:w</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0513.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Save the file.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">:e letter</tt></td>
<?graphic_args "" "" 1.19 -.35?>
<td><img src="figs/vi.0514.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Enter the file <em class="filename">letter</em> with <tt class="literal">:e</tt>.
Move the cursor to where the
copied text will be placed.</p></td>
</tr>

<?troff .sp .5v?><tr>
<td><tt class="literal">"fp</tt></td>
<?graphic_args "" "" 1.19 -.35?><td><img src="figs/vi.0515.gif" alt="Figure " width="334" /><p>
<?troff .sp -1v?>Place yanked text from named buffer <tt class="literal">f</tt> below the cursor.</p></td>
</tr>


</table><p><p>
<a name="IXT-5-280955" />
<a name="IXT-5-280956" />
Another way to move text from one file to another is to use the
<em class="emphasis">ex</em> commands <tt class="literal">:ya</tt> (yank) and <tt class="literal">:pu</tt> (put).
These commands work the same way as the equivalent <em class="emphasis">vi</em> commands
<tt class="literal">y</tt> and <tt class="literal">p</tt>, but they are used with <em class="emphasis">ex</em>'s line-addressing capability and named buffers.</p>

<p>For example:</p>

<blockquote><pre class="code">:160,224ya  a</pre></blockquote>

<p>would yank (copy) lines 160 through 224 into buffer <tt class="literal">a</tt>.
Next you would move with <tt class="literal">:e</tt> to the file where you want
to put these lines.
Place the cursor on the line where you want to put the yanked lines.
Then type:</p>

<blockquote><pre class="code">:pu a</pre></blockquote>

<p>to put the contents of buffer <tt class="literal">a</tt> after the current line.</p>
</div>




<a name="IXT-5-280957" />


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_04.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch06_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">5.4. Copying a File into Another File </td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">6. Global Replacement</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="1,0,88,96" href="../index.htm"><area shape="rect" coords="90,0,165,96" href="../upt/index.htm"><area shape="rect" coords="168,1,253,107" href="../mac/index.htm"><area shape="rect" coords="255,0,335,97" href="../korn/index.htm"><area shape="rect" coords="337,0,415,109" href="../unixnut/index.htm"><area shape="rect" coords="417,0,512,122" href="../sedawk/index.htm"><area shape="rect" coords="514,0,605,105" href="../lunix/index.htm"><area shape="rect" coords="611,2,694,121" href="../vi/index.htm">
</map>

</body></html>
