<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html><!--
 Page saved with SingleFile 
 url: http://ext4magic.sourceforge.net/tips_en.html 
 saved date: Thu Jan 23 2020 01:15:11 GMT+0000 (Coordinated Universal Time)
--><meta charset=utf-8><style class="darkreader darkreader--user-agent" media=screen>[data-darkreader-inline-bgcolor]{background-color:var(--darkreader-inline-bgcolor)!important}[data-darkreader-inline-border-bottom]{border-bottom-color:var(--darkreader-inline-border-bottom)!important}[data-darkreader-inline-border-left]{border-left-color:var(--darkreader-inline-border-left)!important}[data-darkreader-inline-border-right]{border-right-color:var(--darkreader-inline-border-right)!important}[data-darkreader-inline-border-top]{border-top-color:var(--darkreader-inline-border-top)!important}html{background-color:#2f2f2e!important}html,body{background-color:#2f2f2e}html,body{border-color:#837f79;color:#ffffff}a{color:#6ec8ff}table{border-color:#74716b}::placeholder{color:#fffbe4}::selection{background-color:#2983ed;color:#ffffff}::-moz-selection{background-color:#2983ed;color:#ffffff}::-webkit-scrollbar{background-color:#343433;color:#fffff5}::-webkit-scrollbar-thumb{background-color:#474745}::-webkit-scrollbar-corner{background-color:#2f2f2e}*{scrollbar-color:#474745 #343433}</style>
<title></title>
<meta name=GENERATOR content="LibreOffice 3.5  (Linux)">
<meta name=CREATED content=20140327;22552000>
<meta name=CHANGED content=20140327;23011200>
<style><!--@page{margin:2cm}P{margin-bottom:0.21cm}H1{margin-bottom:0.21cm}H1.western{font-family:"Liberation Serif",serif}TD P{margin-bottom:0cm}TH P{margin-bottom:0cm}H2{margin-bottom:0.21cm}H3{margin-bottom:0.21cm}A:link{so-language:zxx}--></style>
<style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style><link type=image/x-icon rel="shortcut icon" href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></head>
<body dir=LTR lang=de-DE>
<h1 class=western><a name=firstHeading style=display:none!important></a>Ext4magic-Tips
and Tricks</h1>
<div id=bodyContent dir=LTR>
 <p><br><br>
 </p>
 <div id=contentSub dir=LTR>
 <p><br><br>
 </p>
 </div>
 <div id=jump-to-nav dir=LTR>
 <p><br><br>
 </p>
 </div>
 <div id=mw-content-text dir=LTR>
 <table style=--darkreader-inline-bgcolor:#5a1311 data-darkreader-inline-bgcolor width=100% cellspacing=2 cellpadding=2 bgcolor=#ffe1e1>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-bgcolor:#ef1f1b;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left bgcolor=#ff0000>
 <p><font size=2><b>Attention:</b> </font>
 </p>
 </td>
 </tr>
 <tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p>This is a computer translation of the original webpage. It is
 provided for general information only and should not be regarded
 as complete nor accurate 
 </p>
 </td>
 </tr>
 </table>
 <p><br><br>
 </p>
 <p><br><br>
 </p>
 <center>
 <table style=--darkreader-inline-bgcolor:#2f2f2e data-darkreader-inline-bgcolor width=100% cellspacing=0 cellpadding=5 bgcolor=#ffffff>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p><b><a href=http://ext4magic.sourceforge.net/ext4magic_en.html>Ext4magic</a>:</b>
 <a href=http://ext4magic.sourceforge.net/inode_en.html>Inode</a>
 - <a href=http://ext4magic.sourceforge.net/directory_en.html>Directory</a>
 - <a href=http://ext4magic.sourceforge.net/journal_en.html>Journal</a>
 - <a href=http://ext4magic.sourceforge.net/install_en.html>Install</a>
 - <a href=http://ext4magic.sourceforge.net/time-options_en.html>Time_Options</a>
 - <a href=http://ext4magic.sourceforge.net/histogram_en.html>Histogram</a>
 - <a href=http://ext4magic.sourceforge.net/howto_en.html>Scenarios</a>
 - <strong>Tips&amp;Tricks</strong> - <a href=http://ext4magic.sourceforge.net/manpage_en.html>Manpage</a>
 - <a href=http://ext4magic.sourceforge.net/expert-mode_en.html>Expert-Mode</a>
 
 </p>
 </td>
 </tr>
 </table>
 </center>
 <p><br><br>
 </p><a name=toc></a>
 <table width=471 cellspacing=0 cellpadding=2>
 <colgroup><col width=467>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left width=467>
 <div id=toctitle dir=LTR>
 <h2 class=western>Contents</h2>
 </div>
 <ul>
 <li><p><a href=#ext4magic_and_read-write_mounted_file_systems>1
 ext4magic and read-write mounted file systems</a> 
 </p>
 <ul>
 <li><p><a href=#Explanation_of_the_problem>1.1
 Explanation of the problem</a> 
 </p>
 <li><p><a href=#ext4magic_with_a_copy_of_the_journal>1.2
 ext4magic with a copy of the journal</a> 
 </p>
 </ul>
 <li><p><a href=#Use_a_image_of_a_whole_disk>2
 Use a image of a whole disk</a> 
 </p>
 <li><p><a href=#Encrypted_filesystems>3
 Encrypted filesystems</a> 
 </p>
 <li><p><a href=#Time_options.2C_extended_applications_in_conjunction_with_list_functions>4
 Time options, extended applications in conjunction with list
 functions</a> 
 </p>
 <li><p><a href=#Files_examine_and_correct>5
 Files examine and correct</a> 
 </p>
 </ul>
 </td>
 </tr>
 </table>
 <h2 class=western lang=en><a name=ext4magic_and_read-write_mounted_file_systems></a>
 ext4magic and read-write mounted file systems</h2>
 <p lang=en>A file system should before the use with ext4magic
 first umounted or mount it read-only. In some cases this will not
 be possible, and also the loss of only one file will not always
 justify this expenditure really. ext4magic has an evasion of this
 problem, which is classified however at present still as
 experimental for unique smaller actions. 
 </p>
 <table style=--darkreader-inline-bgcolor:#5a1311 data-darkreader-inline-bgcolor width=100% cellspacing=2 cellpadding=2 bgcolor=#ffe1e1>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-bgcolor:#ef1f1b;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left bgcolor=#ff0000>
 <p><font size=2><b>Attention:</b> </font>
 </p>
 </td>
 </tr>
 <tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p>The direct use of the journal one a read-write mounted file
 system produces ext4magic errors and wrong results 
 </p>
 </td>
 </tr>
 </table>
 <p><br><br>
 </p>
 <p><br><br>
 </p>
 <h3 class=western lang=en><a name=Explanation_of_the_problem></a>
 Explanation of the problem</h3>
 <p lang=en>During the reading of the journal the cache of the
 file system is used, that means Linux holds contents or substantial
 parts of the journal file in main memory after the first read, and
 the next reading use only the main memory and no more the disk.
 That is also for extmagic a great many accesses to the blocks takes
 place often several times necessarily there and this is importantly
 faster to read than the blocks again and again. 
 </p>
 <p lang=en>Linux writes unbuffered and directly into the journal
 on the disk. ext4magic read the journal buffert from cache, and
 reads so wrong blocks at the journal position of the first read.
 That means, the first read and access by ext4magic on the journal
 and pertinent list or recover is started on thereby, runs still
 normally, as long as it is not too time-consuming. On a read write
 mounted file system the kernel continues to write to the journal, a
 next run of ext4magic and all afterwards read now wrong blocks at
 this journal position, and this becomes worse with each attempt.
 Even if a copy of the journal with the official tools is made now,
 this copy will likewise contain these errors. This error disappears
 only again, if the file system is completely umounted and new
 mounted again, (remount is not enough) only then the blocks are
 again correct readable at this position in the journal. 
 </p>
 <p lang=en><br>After a certain time, dependent on the memory
 equipment and the memory use of the computer, the journal out of
 the Cache of the file system will displace, which cannot however in
 such a way exactly certainly or predicts becomes. 
 </p>
 <p lang=en><br>With ext4magic and the first attempt the desired
 result to really reach, without looking at the journal and inode
 data before, is not very probable. If the file system were not
 mounted completely read only or to induce the file system now not
 to write to journal, is utopian. 
 </p>
 <p><br><br>
 </p>
 <h3 class=western lang=en><a name=ext4magic_with_a_copy_of_the_journal></a>
 ext4magic with a copy of the journal</h3>
 <p lang=en>It must created a copy of this journal, and later only
 this journal copy journal instead of the original journal to be
 used. The journal is a special file in the file system which no
 listing entry possesses and which only over the inode number
 themselves to be addressed can. The internal journal of a ext3/4 of
 file system always uses the Inode number 8 for the journal by
 default. With debugfs a copy of the journal can is provided. But
 importantly: also only the first copy is correct, later further
 copies the journal have the same errors. Also the selection of the
 journal over debugfs causes thus the cachen journal in the memory.
 With ext4magic do not thus only try, but to everything only with
 debugfs a copy of the journal provide, in the first attempt. 
 </p>
 <pre class=western style=margin-bottom:.5cm lang=en># debugfs -R "dump &lt;8&gt; /PATH/journal.copy" /dev/device </pre><p>
 “<span lang=en>/PATH/journal.copy” stands here symbolically
 for the file name of the journal copy. This should be put on
 urgently on another file system. “/dev/device” the block DEVICE
 or the partition is on the file system which can be examined is. </span>
 </p>
 <p lang=en>With this snapshot of the journal ext4magic can work
 exactly the same as with the internal journal, it must only at
 start as option be indicated, then this is used and not the
 internal of the file system 
 </p>
 <pre class=western style=margin-bottom:.5cm lang=en># ext4magic /dev/device - j /PATH/journal.copy .........</pre><p lang=en>
 Of course if it is possible, , now write not more as absolutly
 emergency in the file system. Each write can overwrite some of the
 blocks of files that you will win again. Only an overwritten data
 block, depending the used comandline parameter, the file is not
 restored, or is defective in parts or completely after restoring. 
 </p>
 <p lang=en><b>Warning:</b> This procedure is tested, it works,
 but please be very careful with this feature. Remember, for
 ext4magic the file system is frozen at the time at which the
 journal copy created. Any subsequent changes will not recognize by
 ext4magic. This works only correct for a limited time if you
 continue to write into the file system. 
 </p>
 <p><br><br>
 </p>
 <h2 class=western lang=en><a name=Use_a_image_of_a_whole_disk></a>
 Use a image of a whole disk</h2>
 <p lang=en>Images of a file system partitions can be used
 directly by ext4magic. Differently with images of whole disk. Here
 those are to file system on the partitions of this image and can be
 used only over loop DEVICEs. The instruction to connect to such a
 partition with a loop DEVICE is losetup. Since the partitions
 inevitably at the beginning of the image file does not stand, must
 be worked here as an offset-value in byte exactly the beginning of
 the partition within the image indicates. The offset-value can be
 calculated by the partition table of the image. For the simpler
 handling here a small script, which reads the data from the
 partition table and can computation the values. 
 </p>
 <pre class=western lang=en>#!/bin/bash
<span lang=en># help-loop-image</span>

<span lang=en># Script to calculate the correct offsets for partitions</span>
<span lang=en># of a whole disk image.</span>
<span lang=en># Autor: robi6@users.sf.net  (Version 1.0 vom 25.04.2011)</span>
<span lang=en>PATH="/sbin:$PATH"</span>
<span lang=en>if [ $# -lt 1 ]</span>
<span lang=en>then</span>
        <span lang=en>echo "usage: ${0##*/} &lt;image&gt;"</span>
        <span lang=en>exit 1</span>
<span lang=en>fi</span>

<span lang=en>IMAGE=$1</span>
<span lang=en>if [&nbsp;! -f "$IMAGE" ]</span>
<span lang=en>then</span>
        <span lang=en>echo "ERROR: $IMAGE is no file"</span>
        <span lang=en>exit 2</span>
<span lang=en>fi</span>

<span lang=en>LANG=C fdisk -lu "$IMAGE"  2&gt;&amp;1 | tr -d '*' | egrep "${IMAGE}[p]*[0-9]" | while read part start end blocks id rest</span>
<span lang=en>do</span>
        <span lang=en>echo</span>
        <span lang=en>echo "# $read $part $start $end $blocks $id $rest"</span>
        <span lang=en>case $id in</span>
        <span lang=en>f) echo "Extended partition ignored"</span>
           <span lang=en>continue</span>
          &nbsp;<span lang=en>;;</span>
        <span lang=en>82) echo "Swap ignored"</span>
           <span lang=en>continue</span>
          &nbsp;<span lang=en>;;</span>
        <span lang=en>*)</span>
         &nbsp;<span lang=en>;;</span>
        <span lang=en>esac</span>

        <span lang=en>let offset=$start*512</span>
        <span lang=en>echo "losetup -f \"$IMAGE\" -o $offset"</span>
<span lang=en>done</span>
<span lang=en>exit 0</span></pre><p lang=en>
 Save this script as "<b>help-loop-image</b>" and set the
 executable flags. The Script is called then simply with the image 
 </p>
 <pre class=western style=margin-bottom:.5cm lang=en>./help-loop-image IMAGE_FILE</pre><p lang=en>
 This Script will indicate the possible data partitions 1-9 of the
 image and in each case to details losetup instruction with the
 calculated offset-value under it spend and creates a list of
 losetup commands how you can use for mount the partitions Pick the
 one of the partion you want to recover and check with 
 </p>
 <pre class=western style=margin-bottom:.5cm lang=en>losetup -a</pre><p lang=en>
 which loop device was used to mount the partition. ext4magic now
 can use this loopdevice like a normal partition. Example: 
 </p>
 <pre class=western style=margin-bottom:.5cm lang=en>ext4magic /dev/loop0 -S</pre><p lang=en>
 After conclusion of the work with ext4magic this loop DEVICE should
 be released again 
 </p>
 <pre class=western style=margin-bottom:.5cm lang=en>losetup -d /dev/loop0</pre><p>
 <br><br>
 </p>
 <h2 class=western lang=en><a name=Encrypted_filesystems></a>Encrypted
 filesystems</h2>
 <p lang=en>There are two different methods <b>Block Device
 Encryption</b> and <b>Stacked Filesystem Encryption</b> 
 </p>
 <p lang=en>The following refers to <b>Block Device Encryption</b>
 </p>
 <p lang=en>With ext4magic inadvertently deleted files can be
 recovert again also of encrypted ext3/ext4 file systems. We need
 the virtual block device on that the file system decoded mapped is.
 The device should not be mounted at this time. In most cases
 something manual work is necessary for since the configuration and
 the automatisms under normal conditions running off should prevent
 that the file system is decoded attainable in the unmounted
 condition. How is to be proceeded thereby, is to be reread
 dependently on the used encrypt technology and in the appropriate
 documentations. If this should not be possible, then the crypted
 file system is too at least readonly to mount. Previously the file
 system must be umountet completely, a remount to readonly is not
 sufficient. 
 </p>
 <p lang=en><br>As example here the proceeding with a container
 crypted with LUKS. The container file is in this example the file
 <b>/home/test/crypt.iso</b> those at present is not configures and
 not mounted. 
 </p>
 <pre class=western lang=en>ROBI@LINUX:~ # file crypt.iso
<span lang=en>crypt.iso: LUKS encrypted file, ver 1 [aes, cbc-essiv:sha256, sha1] UUID: 2ca7be95-439d-499e-849e-cbba5de</span>
<span lang=en>ROBI@LINUX:~ # losetup -a</span>
<span lang=en>ROBI@LINUX:~ # losetup /dev/loop0 crypt.iso</span>
<span lang=en>ROBI@LINUX:~ # losetup -a</span>
<span lang=en>/dev/loop0: [0806]:1011860 (/home/test/crypt.iso)</span>
<span lang=en>ROBI@LINUX:~ # file -s /dev/loop0</span>
<span lang=en>/dev/loop0: LUKS encrypted file, ver 1 [aes, cbc-essiv:sha256, sha1] UUID: 2ca7be95-439d-499e-849e-cbba5de</span></pre><p lang=en>
 In this first section the container is connected with a free loop
 DEVICE, here also <b>/dev/loop0</b> 
 </p>
 <p lang=en>Afterwards the LUKS volume is then opened and thus the
 virtual file system layer as a device below <b>/dev/mapper/</b>
 visible.<br>In this example&nbsp;: <b>/dev/mapper/cr_crypt.iso</b> 
 </p>
 <pre class=western lang=en>ROBI@LINUX:~ # cryptsetup luksOpen /dev/loop0 cr_crypt.iso
<span lang=en>Enter LUKS passphrase for /dev/loop0:</span>
<span lang=en>key slot 0 unlocked.</span>
<span lang=en>Command successful.</span>
<span lang=en>ROBI@LINUX:~ # file -s /dev/mapper/cr_crypt.iso</span>
<span lang=en>/dev/mapper/cr_crypt.iso: Linux rev 1.0 ext4 filesystem data (extents) (huge files)</span></pre><p lang=en>
 The instruction <b>file - s</b> shows now, this is the ext4 file
 system and this device can be accessed now with ext4magic.<br>in
 the example recover the deleted files from directory <b>picture/</b>
 </p>
 <pre class=western lang=en>ROBI@LINUX:~ # ext4magic /dev/mapper/cr_crypt.iso -r -f picture
<span lang=en>"RECOVERDIR"  accept for recoverdir</span>
<span lang=en>Filesystem in use: /dev/mapper/cr_crypt.iso</span>

<span lang=en>Using internal Journal at Inode 8</span>
<span lang=en>Inode found "picture"   1817</span>
<span lang=en>Inode 1817 is allocated</span>
<span lang=en>--------        RECOVERDIR/picture/cimg1442.jpg</span>
<span lang=en>--------        RECOVERDIR/picture/cimg1434.jpg</span>
<span lang=en>--------        RECOVERDIR/picture/test0004.tif</span>
<span lang=en>--------        RECOVERDIR/picture/cimg1435.jpg</span>
<span lang=en>--------        RECOVERDIR/picture/cimg1459.jpg</span>
<span lang=en>--------        RECOVERDIR/picture/cimg1445.jpg</span>
<span lang=en>-------- .........</span>
<span lang=en>......     </span></pre><p lang=en>
 Not forgot, after the work with ext4magic to clear up this. In this
 case the LUKS volume must be closed again and be dissolved the
 connection with the loop device again. 
 </p>
 <pre class=western lang=en>ROBI@LINUX:~ # cryptsetup luksClose /dev/mapper/cr_crypt.iso
<span lang=en>ROBI@LINUX:~ # losetup -d /dev/loop0</span></pre><p>
 <br><br>
 </p>
 <h2 class=western lang=en><a name=Time_options.2C_extended_applications_in_conjunction_with_list_functions></a>
 Time options, extended applications in conjunction with list
 functions</h2>
 <p lang=en>The following is for progressing and contains an
 example like one with the help of the options from ext4magic also
 problems to solve can, which appear so easily not solvable on the
 first view. 
 </p>
 <dl>
 <dt lang=en>following starting situation and problem definition 
 <dd style=margin-bottom:.5cm lang=en>
 during a certain period many files with separate delete commands
 were deleted. One of these instructions was wrong and the wrong
 files deleted. We will recover not all deleted files, only the
 files which are deleted with the incorrect instruction. The names
 of these files is not well-known us, but over the histogram can
 separate the time of the incorrect erasing process. 
 </dl>
 <p lang=en>
 The histogram function shows the following expenditure of DELETE
 Time: 
 </p>
 <pre class=western lang=en>ROBI@LINUX:/tmp/test1 # ext4magic testfile.iso.3  -a 1286031225 -b 1286031288 -H
<span lang=en>Filesystem in use: testfile.iso.3                                               </span>
<span lang=en>......</span>

<span lang=en>|-----------d_time  Histogram-----------------  after  --------------------  Sat Oct  2 16:53:45 2010</span>
<span lang=en>1286031231&nbsp;:        3 |**                                                |   Sat Oct  2 16:53:51 2010</span>
<span lang=en>1286031237&nbsp;:        0 |                                                  |   Sat Oct  2 16:53:57 2010</span>
<span lang=en>1286031243&nbsp;:        0 |                                                  |   Sat Oct  2 16:54:03 2010</span>
<span lang=en>1286031249&nbsp;:       49 |*********************                             |   Sat Oct  2 16:54:09 2010</span>
<span lang=en>1286031255&nbsp;:        0 |                                                  |   Sat Oct  2 16:54:15 2010</span>
<span lang=en>1286031261&nbsp;:        6 |***                                               |   Sat Oct  2 16:54:21 2010</span>
<span lang=en>1286031267&nbsp;:      117 |**************************************************|   Sat Oct  2 16:54:27 2010</span>
<span lang=en>1286031273&nbsp;:       53 |***********************                           |   Sat Oct  2 16:54:33 2010</span>
<span lang=en>1286031279&nbsp;:        0 |                                                  |   Sat Oct  2 16:54:39 2010</span>
<span lang=en>1286031285&nbsp;:        0 |                                                  |   Sat Oct  2 16:54:45 2010</span>
<span lang=en>ext4magic&nbsp;: EXIT_SUCCESS</span></pre><p lang=en>
 4 erasing processes are to be recognized. The deletion of the 6
 files is from interest in the time interval of 16:54: 15 to 16:54:
 21. With this erasing process the files were falsely deleted, which
 we would like now again recovern. 
 </p>
 <p lang=en>The time options cannot be used here in ext4magic
 directly, in order to cancel purposefully only certain erasing
 process from this series. (Comparisons also). Only one time window
 can be determined, by which can be tried, the there current
 conditions too recovern. Only the first erasing process (49 files)
 can be excluded, but the two erasing processes thereafter took
 place (117 + 53), cannot with the time options not be excluded in
 such a way, since the files likewise still existed at this time and
 are deleted now. Only with the time options directly here thus only
 the last erasing processes could become together complete all
 recover, which would then contain also the looked for files. 
 </p>
 <p lang=en>The problem can be circumvented as follows. The
 cunning ruse are, create lists of recoverable files on different
 time windows 
 </p>
 <ol>
 <li><p style=margin-bottom:0cm lang=en>The first list is to
 exclude only the first erasing process and contains thus the files
 2 to 4 of the erasing process. thus also the looked for files. It
 becomes thereby the option “- l” in connection with the option
 “- x” used. Thus a list is provided, the ext4magic with the
 option “- i input_list” to directly process can. (see also) 
 </p>
 <li><p style=margin-bottom:0cm lang=en>The second list,
 exactly the same with different time, these contains now all files
 deleted after the appropriate time, the searched files are no more
 contain there. 
 </p>
 <li><p lang=en>A difference list can be generated by these two
 lists, and if everything ran correctly, it contains exactly the
 file names of the files we are looking for 
 </p>
 </ol>
 <pre class=western> 
<span lang=en>ROBI@LINUX:/tmp/test1 # ext4magic testfile.iso.3  -a 1286031255 -b 1286031279 -lx &gt; log_vor</span>
<span lang=en>ROBI@LINUX:/tmp/test1 # ext4magic testfile.iso.3  -a 1286031261 -b 1286031279 -lx &gt; log_nach</span>
<span lang=en>ROBI@LINUX:/tmp/test1 # diff log_vor log_nach</span>
<span lang=en>4c4</span>
<span lang=en>&lt; Activ Time after &nbsp;: Sat Oct  2 16:54:15 2010</span>
<span lang=en>---</span>
<span lang=en>&gt; Activ Time after &nbsp;: Sat Oct  2 16:54:21 2010</span>
<span lang=en>28,32d27</span>
<span lang=en>&lt;   100%        "tar/ext4magic-0.1.4.tar"</span>
<span lang=en>&lt;   100%        "tar/backup.tgz"</span>
<span lang=en>&lt;   100%        "tar/ext4magic-0.1.3.tar"</span>
<span lang=en>&lt;   100%        "tar/ext4magic-0.1.2.tar"</span>
<span lang=en>&lt;   100%        "tar/backup1.tgz"</span>
<span lang=en>ROBI@LINUX:/tmp/test1 # diff log_vor log_nach &gt; log_diff</span></pre><p lang=en>
 In this file are also still further lines, and which at the start
 of line still another special character and a percentage stands, is
 for the option “<b>- i”</b> not of interest,only evaluates per
 line, which is cleanly enclosed between the double inverted commas.
 With a time window, in which have existed these files, and the list
 can recover the files by using ext4magic 
 </p>
 <pre class=western lang=en>ROBI@LINUX:/tmp/test1 # ext4magic testfile.iso.3  -a 1286031255 -b 1286031279 -r -i log_diff
<span lang=en>"log_diff"  accept for inputfile</span>
<span lang=en>"RECOVERDIR"  accept for recoverdir</span>
<span lang=en>Filesystem in use: testfile.iso.3</span>

<span lang=en>Using internal Journal at Inode 8</span>
<span lang=en>Activ Time after &nbsp;: Sat Oct  2 16:54:15 2010</span>
<span lang=en>Activ Time before&nbsp;: Sat Oct  2 16:54:39 2010</span>
<span lang=en>--------        RECOVERDIR/tar/ext4magic-0.1.4.tar</span>
<span lang=en>--------        RECOVERDIR/tar/backup.tgz</span>
<span lang=en>--------        RECOVERDIR/tar/ext4magic-0.1.3.tar</span>
<span lang=en>--------        RECOVERDIR/tar/ext4magic-0.1.2.tar</span>
<span lang=en>--------        RECOVERDIR/tar/backup1.tgz</span>
<span lang=en>ext4magic&nbsp;: EXIT_SUCCESS</span></pre><p lang=en>
 To attentive readers will now be noticeable, it is only 5 files, it
 should be 6. The mystery solution, the 6. Inode was the directory
 (tar/), which was deleted also and was repaired automatically also.
 </p>
 <p><br><br>
 </p>
 <h2 class=western lang=en><a name=Files_examine_and_correct></a>
 Files examine and correct</h2>
 <p lang=en>The results of the Magic function, (particularly on
 ext3 with the old method of version 0.2.4) will result in not in
 every case always useful files. With some file types it is not to
 be cut ext4magic always possible the files to correct length. It is
 possible some files are too long or too short around or few zeros.
 Susceptibly to it at present e.g. are gzip files and Windows Office
 documents. A too long file will usually open a warning with will
 produce, will otherwise however normally function. Differently
 however to short files. They often cannot be opened, annoying with
 compressed formats, if more than one file is contained. 
 </p>
 <p lang=en>Some file types can be examined very well and fast
 over Plugins of the graphic file managers, as far as one has a
 Desktop system before itself. In addition e.g. count many document
 formats, pdf, HTML, PICTURES, and many the common Mulitmediatypen.
 The most common picture formats leave themselves fast and simply
 also “xv” examine. Special display formats often still leave
 themselves "display" examine, sometimes goes however
 without gimp nothing With text files it is often quite lengthy to
 sort and sight it. more or less carry out however good services. 
 </p>
 <p lang=en>In the following small collection some commands to
 examine some file types . In small FOR loops blocked thus fast
 times an enormous listing is examined for functioning files. Also
 little background knowledge, e.g. the open Office of documents are
 zip compressed, and one comes here fast to the goal. The content
 must be checked, and the files must be sorted to find out the
 important files and give them correct names 
 </p>
 <p style=margin-bottom:0cm align=CENTER><b>some commands to
 check the files</b> 
 </p>
 <table cellspacing=2 cellpadding=2>
 <tbody><tr>
 <th style="border-color:#808080 currentcolor #808080 gray;border-style:double none double double;border-width:1px medium 1px 1px;padding:.05cm 0cm .05cm .05cm;--darkreader-inline-border-top:#74716b;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>type 
 </p>
 </th>
 <th style="border:1px double gray;padding:.05cm;--darkreader-inline-border-top:#74716b;--darkreader-inline-border-right:#74716b;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p>command 
 </p>
 </th>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>gzip 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>gzip -t FILE.gz 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>bzip2 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>bzip2 -t FILE.bzip2 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>zip 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>zip -T FILE.zip 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>xz 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>xz -t FILE.xz 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>7z 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>7z t FILE.7z 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>RAR 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>rar t FILE.rar 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>tar 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>tar -tf FILE.tar &gt;/dev/null 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>cpio 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>cpio -it &lt; FILE.cpio &gt;/dev/null 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>arj 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>unarj t FILE.arj 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>Open Office Documents 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>zip -T FILE.o[dt]? 
 </p>
 </td>
 </tr>
 <tr>
 <td style="border-color:currentcolor currentcolor #808080 gray;border-style:none none double double;border-width:medium medium 1px 1px;padding:0cm 0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p align=CENTER>jpeg 
 </p>
 </td>
 <td style="border-color:currentcolor #808080 gray;border-style:none double double;border-width:medium 1px 1px;padding:0cm .05cm .05cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-bottom:#74716b;--darkreader-inline-border-left:#74716b;--darkreader-inline-border-right:#74716b" data-darkreader-inline-border-top data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-border-right>
 <p>djpeg -gr -scale 1/8 -bmp FILE.jpeg &gt; /dev/null 
 </p>
 </td>
 </tr>
 </table>
 <p><span lang=en>Is particularly fatiguing, examine from audio
 and video files. Small scripts can help here to find out whether
 the file works. possible tools <a href=http://www.mplayerhq.hu/design7/documentation.html>MPlayer,
 MEncoder</a> and <a href=http://sox.sourceforge.net/Docs/Documentation>sox</a>
 The following checks whether a video can played </span>
 </p>
 <pre class=western lang=en>for i in *
 <span lang=en>do </span>
 <span lang=en>echo "$i" </span>
 <span lang=en>mplayer -benchmark -nosound -vo null "$i" 2&gt;/dev/null | grep BENCHMARK </span>
<span lang=en>done</span></pre><p lang=en>
 Audio files, the following may help 
 </p>
 <pre class=western lang=en>for i in *
  <span lang=en>do </span>
  <span lang=en>echo -e "\n$i"</span>
  <span lang=en>sox "$i" -n stat </span>
<span lang=en>done</span></pre><p>
 <br><br>
 </p>
 <p><br><br>
 </p>
 <center>
 <table style=--darkreader-inline-bgcolor:#2f2f2e data-darkreader-inline-bgcolor width=100% cellspacing=0 cellpadding=5 bgcolor=#ffffff>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p><b><a href=http://ext4magic.sourceforge.net/ext4magic_en.html>Ext4magic</a>:</b>
 <a href=http://ext4magic.sourceforge.net/inode_en.html>Inode</a>
 - <a href=http://ext4magic.sourceforge.net/directory_en.html>Directory</a>
 - <a href=http://ext4magic.sourceforge.net/journal_en.html>Journal</a>
 - <a href=http://ext4magic.sourceforge.net/install_en.html>Install</a>
 - <a href=http://ext4magic.sourceforge.net/time-options_en.html>Time_Options</a>
 - <a href=http://ext4magic.sourceforge.net/histogram_en.html>Histogram</a>
 - <a href=http://ext4magic.sourceforge.net/howto_en.html>Scenarios</a>
 - <strong>Tips&amp;Tricks</strong> - <a href=http://ext4magic.sourceforge.net/manpage_en.html>Manpage</a>
 - <a href=http://ext4magic.sourceforge.net/expert-mode_en.html>Expert-Mode</a>
 
 </p>
 </td>
 </tr>
 </table>
 </center>
 <p><br><br>
 </p>
 </div>
</div>
