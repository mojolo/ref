<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html><!--
 Page saved with SingleFile 
 url: http://ext4magic.sourceforge.net/time-options_en.html 
 saved date: Thu Jan 23 2020 01:13:58 GMT+0000 (Coordinated Universal Time)
--><meta charset=utf-8><style class="darkreader darkreader--user-agent" media=screen>[data-darkreader-inline-bgcolor]{background-color:var(--darkreader-inline-bgcolor)!important}[data-darkreader-inline-border-bottom]{border-bottom-color:var(--darkreader-inline-border-bottom)!important}[data-darkreader-inline-border-left]{border-left-color:var(--darkreader-inline-border-left)!important}[data-darkreader-inline-border-right]{border-right-color:var(--darkreader-inline-border-right)!important}[data-darkreader-inline-border-top]{border-top-color:var(--darkreader-inline-border-top)!important}html{background-color:#2f2f2e!important}html,body{background-color:#2f2f2e}html,body{border-color:#837f79;color:#ffffff}a{color:#6ec8ff}table{border-color:#74716b}::placeholder{color:#fffbe4}::selection{background-color:#2983ed;color:#ffffff}::-moz-selection{background-color:#2983ed;color:#ffffff}::-webkit-scrollbar{background-color:#343433;color:#fffff5}::-webkit-scrollbar-thumb{background-color:#474745}::-webkit-scrollbar-corner{background-color:#2f2f2e}*{scrollbar-color:#474745 #343433}</style>
<title></title>
<meta name=GENERATOR content="LibreOffice 3.5  (Linux)">
<meta name=CREATED content=20140327;22463300>
<meta name=CHANGED content=20140327;22490000>
<style><!--@page{margin:2cm}P{margin-bottom:0.21cm}H1{margin-bottom:0.21cm}H1.western{font-family:"Liberation Serif",serif}TD P{margin-bottom:0cm}H2{margin-bottom:0.21cm}H3{margin-bottom:0.21cm}A:link{so-language:zxx}--></style>
<style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style><link type=image/x-icon rel="shortcut icon" href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></head>
<body dir=LTR lang=de-DE>
<h1 class=western><a name=firstHeading style=display:none!important></a>Ext4magic-Time
Options</h1>
<div id=bodyContent dir=LTR>
 <p><br><br>
 </p>
 <div id=contentSub dir=LTR>
 <p><br><br>
 </p>
 </div>
 <div id=jump-to-nav dir=LTR>
 <p><br><br>
 </p>
 </div>
 <div id=mw-content-text dir=LTR>
 <table style=--darkreader-inline-bgcolor:#5a1311 data-darkreader-inline-bgcolor width=100% cellspacing=2 cellpadding=2 bgcolor=#ffe1e1>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-bgcolor:#ef1f1b;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left bgcolor=#ff0000>
 <p><font size=2><b>Attention:</b> </font>
 </p>
 </td>
 </tr>
 <tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p>This is a computer translation of the original webpage. It is
 provided for general information only and should not be regarded
 as complete nor accurate 
 </p>
 </td>
 </tr>
 </table>
 <p><br><br>
 </p>
 <p><br><br>
 </p>
 <center>
 <table style=--darkreader-inline-bgcolor:#2f2f2e data-darkreader-inline-bgcolor width=100% cellspacing=0 cellpadding=5 bgcolor=#ffffff>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p><b><a href=http://ext4magic.sourceforge.net/ext4magic_en.html>Ext4magic</a>:</b>
 <a href=http://ext4magic.sourceforge.net/inode_en.html>Inode</a>
 - <a href=http://ext4magic.sourceforge.net/directory_en.html>Directory</a>
 - <a href=http://ext4magic.sourceforge.net/journal_en.html>Journal</a>
 - <a href=http://ext4magic.sourceforge.net/install_en.html>Install</a>
 - <strong>Time_Options</strong> - <a href=http://ext4magic.sourceforge.net/histogram_en.html>Histogram</a>
 - <a href=http://ext4magic.sourceforge.net/howto_en.html>Scenarios</a>
 - <a href=http://ext4magic.sourceforge.net/tips_en.html>Tips&amp;Tricks</a>
 - <a href=http://ext4magic.sourceforge.net/manpage_en.html>Manpage</a>
 - <a href=http://ext4magic.sourceforge.net/expert-mode_en.html>Expert-Mode</a>
 
 </p>
 </td>
 </tr>
 </table>
 </center>
 <p><br><br>
 </p>
 <h2 class=western lang=en><a name=The_function_of_the_time_markers></a>
 The function of the time markers</h2>
 <p lang=en>By the use of the journal data the file system in
 ext4magic has a virtual dimension more, the time. Files and
 directories do not exist from beginning and not eternally
 invariably. They can be again created and deleted, them can the
 names and the size or other characteristics change. Files and
 directories can receive a name, which was before already used by
 another file. All these changes leave traces, which ext4magic can
 find and handle in the journal. The timestamps are needed to find
 out whether the specific file at a certain time existed or not. The
 call of the command with the time stamps, specified for ext4magic
 the “time layer” of the file system should be worked on. 
 </p>
 <p lang=en><b>Search expiration: Search for a inode for a given
 Inode number</b> 
 </p>
 <ul>
 <li><p style=margin-bottom:0cm lang=en>first all inode copys
 of a inode number collected and time sorted after into a list 
 </p>
 <li><p style=margin-bottom:0cm lang=en>if no copy is
 contained in the journal, the original inode from the file system
 is taken up to the list 
 </p>
 <li><p style=margin-bottom:0cm lang=en>this inode collection
 is backwards scanned in the time 
 </p>
 <li><p style=margin-bottom:0cm lang=en>all inode of <b>c_time</b>
 more largely than “<b>BEFORE”</b>, are not used 
 </p>
 <li><p style=margin-bottom:0cm lang=en>the search in the list
 is terminated as soon as a inode with one <b>d_time</b> smaller
 than “<b>AFTER”</b> is found 
 </p>
 <li><p style=margin-bottom:0cm lang=en>the first found inode
 of them <b>d_time</b> is not set, is used 
 </p>
 <li><p lang=en>None inode copy corresponds to the requirements,
 no file can be recovert for this inode number with these time
 options. 
 </p>
 </ul>
 <p lang=en>To found a deleted file, it must has existed in the
 time between “<b>AFTER”</b> and “<b>BEFORE”</b>, will be
 found several undeleted inode copies, then the copy be used those
 has the youngest time stamp, also near the “<b>BEFORE”</b>
 time. 
 </p>
 <p lang=en>Directory inode applies the same, also the suitable
 data blocks with are listing in the journal searched . If the inode
 copy was produced, without which the data blocks of the directory
 has changed, then for a copy of this data block at a later time
 searched. Also data blocks found temporally behind “<b>BEFORE”</b>
 are use so. If not found a copy of this block in the journal, then
 the original block of the file system used. 
 </p>
 <p lang=en>Thus two possibilities the “<b>BEFORE”</b> time
 result to set, Either it is set on a time after the erasing
 process, or it is set directly exactly as possible before the begin
 of the deletion or the overwriting of files. 
 </p>
 <p><br><br>
 </p>
 <p><br><br>
 </p>
 <h3 class=western lang=en><a name=Detailiertes_Recover_example.2C_special_use_timestamps></a>
 Detailiertes Recover example, special use timestamps</h3>
 <p lang=en><b>Error situation:</b> 
 </p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>In a directory
 thrumbnails should be generated, but by a wrong instruction in the
 script the new thumbnails has overwritten the original pictures
 with the same names. Result the original pictures disappeared, but
 now thrumbnails with the same names in the directory. 
 </dl>
 <p lang=en>
 <br><b>Preparation</b> 
 </p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>umount the file system
 and create a image (“<b>testfile.iso</b>”) of the file system.
 (recommended and optional) 
 </dl>
 <p lang=en>
 <br><b>Investigation of the file system</b> 
 </p>
 <dl>
 <dd lang=en>The directory name is known, directory “<b>user1/</b>”
 <dd style=margin-bottom:.5cm lang=en>
 of this directory is created a list of all inode copies of the
 journal 
 </dl>
 <pre class=western style=margin-bottom:.5cm lang=en>ext4magic testfile.iso -f "user1"  -T</pre>
 <dl>
 <dd lang=en>
 this list is to be investigated between the transactions <b>3341</b>
 and <b>3347</b> 
 <dd style=margin-bottom:.5cm lang=en>
 the difference are recognized by the file size. 
 </dl>
 <pre class=western lang=en>ROBI@LINUX:/home/rob/test # ext4magic testfile.iso -f "user1"  -T | grep -A15 transaction
<span lang=en>.....</span>
<span lang=en>Dump Inode 60929 from journal transaction 3341</span>
<span lang=en>Inode: 60929   Type: directory    Mode:  0755   Flags: 0x0</span>
<span lang=en>Generation: 301560004    Version: 0x00000000</span>
<span lang=en>User:     0   Group:     0   Size: 1024</span>
<span lang=en>File ACL: 0    Directory ACL: 0</span>
<span lang=en>Links: 2   Blockcount: 2</span>
<span lang=en>Fragment:  Address: 0    Number: 0    Size: 0</span>
<span lang=en>ctime: 1275076684 -- Fri May 28 21:58:04 2010</span>
<span lang=en>atime: 1275076686 -- Fri May 28 21:58:06 2010</span>
<span lang=en>mtime: 1275076684 -- Fri May 28 21:58:04 2010</span>
    <span lang=en>60929  d  755 (2)      0      0           1024 28-May-2010 21:58 .</span>
        <span lang=en>2  d  755 (2)      0      0           1024 28-May-2010 21:56 ..</span>
    <span lang=en>60930  _  755 (1)      0      0        1868983 28-May-2010 21:58 cimg1433.jpg</span>
    <span lang=en>60931  _  755 (1)      0      0        1865355 28-May-2010 21:58 cimg1434.jpg</span>
    <span lang=en>60932  _  755 (1)      0      0        2022342 28-May-2010 21:58 cimg1435.jpg</span>
    <span lang=en>60933  _  755 (1)      0      0        1871073 28-May-2010 21:58 cimg1436.jpg</span>
<span lang=en>--</span>
<span lang=en>Dump Inode 60929 from journal transaction 3347</span>
<span lang=en>Inode: 60929   Type: directory    Mode:  0755   Flags: 0x0</span>
<span lang=en>Generation: 301560004    Version: 0x00000000</span>
<span lang=en>User:     0   Group:     0   Size: 1024</span>
<span lang=en>File ACL: 0    Directory ACL: 0</span>
<span lang=en>Links: 2   Blockcount: 2</span>
<span lang=en>Fragment:  Address: 0    Number: 0    Size: 0</span>
<span lang=en>ctime: 1275076887 -- Fri May 28 22:01:27 2010</span>
<span lang=en>atime: 1275076686 -- Fri May 28 21:58:06 2010</span>
<span lang=en>mtime: 1275076887 -- Fri May 28 22:01:27 2010</span>
    <span lang=en>60929  d  755 (2)      0      0           1024 28-May-2010 22:01 .</span>
        <span lang=en>2  d  755 (2)      0      0           1024 28-May-2010 21:56 ..</span>
    <span lang=en>60957  _  644 (1)      0      0          51823 28-May-2010 22:01 cimg1433.jpg</span>
    <span lang=en>60930  _  644 (1)      0      0          42837 28-May-2010 22:01 cimg1434.jpg</span>
    <span lang=en>60931  _  644 (1)      0      0          47361 28-May-2010 22:01 cimg1435.jpg</span>
    <span lang=en>60932  _  644 (1)      0      0          43670 28-May-2010 22:01 cimg1436.jpg</span>
<span lang=en>--</span>
<span lang=en>....</span></pre>
 <dl>
 <dd lang=en>
 transaction <b>3341</b> shows all pictures are represented still
 with the original file size. After that, the files are smaller.<dd style=margin-bottom:.5cm>
 “<span lang=en><b>grep”</b></span><span lang=en> shows
 here only some of the files, but to recognize, the smaller files
 use the same Inode numbers again </span>
 </dl>
 <p>
 <br><br>
 </p>
 <p lang=en><b>find out the correct timestamps</b></p>
 <dl>
 <dd lang=en>The adversity is not older than a few hours, before
 that there were no files deleted in this directory 
 <dd lang=en>
 so it can be used the default "AFTER" time (-24h).<dd style=margin-bottom:.5cm lang=en>
 The “BEFORE” time is crucial. It must smaller than <b>1275076887</b>
 (<b>ctime</b> from transaction <b>3347</b>, which is files here
 already all overwritten) and bigger than <b>1275076684</b> (<b>ctime</b>
 from transaction <b>3341</b>), there the original files are still
 present. 
 </dl>
 <p>
 <br><br>
 </p>
 <p lang=en><b>test of the timestaps</b> 
 </p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>With the list option
 “<b>-l</b>” can be tried to determine which files are to
 repair. As “BEFORE” used the <b>ctime</b> from transaction
 <b>3341</b> + 1 second. 
 </dl>
 <pre class=western lang=en>ROBI@LINUX:/home/rob/test # ext4magic testfile.iso -f "user1"  -b 1275076685 -l
<span lang=en>Filesystem in use: testfile.iso</span>
<span lang=en>Using internal Journal at Inode 8</span>
<span lang=en>Activ Time after &nbsp;: Thu May 27 23:02:29 2010</span>
<span lang=en>Activ Time before&nbsp;: Fri May 28 21:58:05 2010</span>
<span lang=en>Inode found "user1"   60929</span>
<span lang=en>Inode 60929 is allocated</span>
   <span lang=en>92%   user1/cimg1433.jpg</span>
   <span lang=en>88%   user1/cimg1434.jpg</span>
   <span lang=en>94%   user1/cimg1435.jpg</span>
  <span lang=en>100%   user1/cimg1436.jpg</span>
  <span lang=en>100%   user1/cimg1437.jpg</span>
  <span lang=en>100%   user1/cimg1438.jpg</span>
  <span lang=en>100%   user1/cimg1439.jpg</span>
  <span lang=en>100%   user1/cimg1441.jpg</span>
  <span lang=en>100%   user1/cimg1442.jpg</span>
  <span lang=en>100%   user1/cimg1443.jpg</span>
  <span lang=en>100%   user1/cimg1444.jpg</span>
  <span lang=en>100%   user1/cimg1445.jpg</span>
  <span lang=en>100%   user1/cimg1446.jpg</span>
  <span lang=en>100%   user1/cimg1456.jpg</span>
  <span lang=en>100%   user1/cimg1457.jpg</span>
<span lang=en>....</span></pre><p lang=en>
 to see, the first 3 pictures has some overwritten data blocks, all
 other are okay and recoverable. 
 </p>
 <p><br><br>
 </p>
 <p lang=en><b>The Recover</b></p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>Replacing only the list
 option <b>(-l)</b> by a recover option <b>(-r)</b> 
 </dl>
 <pre class=western lang=en>ROBI@LINUX:/home/rob/test # ext4magic testfile.iso -f "user1"  -b 1275076685 -r
<span lang=en>"RECOVERDIR"  accept for recoverdir</span>
<span lang=en>Filesystem in use: testfile.iso</span>

<span lang=en>Using internal Journal at Inode 8</span>
<span lang=en>Activ Time after &nbsp;: Thu May 27 23:08:23 2010</span>
<span lang=en>Activ Time before&nbsp;: Fri May 28 21:58:05 2010</span>
<span lang=en>Inode found "user1"   60929</span>
<span lang=en>Inode 60929 is allocated</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1436.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1437.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1438.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1439.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1441.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1442.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1443.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1444.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1445.jpg</span>
<span lang=en>--------        RECOVERDIR/user1/cimg1446.jpg</span>
<span lang=en>......</span></pre><p lang=en>
 <br><b>first check,</b> 
 </p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>list the recoverten
 files. 3 files were partially destroyed and could not be restored.
 </dl>
 <pre class=western lang=en>ROBI@LINUX:/home/rob/test # ls -l RECOVERDIR/user1/cimg*
<span lang=en>-rwxr-xr-x 1 root root 1871073 May 28 21:58 RECOVERDIR/user1/cimg1436.jpg</span>
<span lang=en>-rwxr-xr-x 1 root root 2039840 May 28 21:58 RECOVERDIR/user1/cimg1437.jpg</span>
<span lang=en>-rwxr-xr-x 1 root root 2061072 May 28 21:58 RECOVERDIR/user1/cimg1438.jpg</span>
<span lang=en>-rwxr-xr-x 1 root root 1844663 May 28 21:58 RECOVERDIR/user1/cimg1439.jpg</span>
<span lang=en>-rw-r--r-- 1 root root  715779 May 28 21:58 RECOVERDIR/user1/cimg1441.jpg</span>
<span lang=en>-rw-r--r-- 1 root root 2165891 May 28 21:58 RECOVERDIR/user1/cimg1442.jpg</span>
<span lang=en>-rw-r--r-- 1 root root  747751 May 28 21:58 RECOVERDIR/user1/cimg1443.jpg</span>
<span lang=en>-rw-r--r-- 1 root root  728500 May 28 21:58 RECOVERDIR/user1/cimg1444.jpg</span>
<span lang=en>-rw-r--r-- 1 root root  810420 May 28 21:58 RECOVERDIR/user1/cimg1445.jpg</span>
<span lang=en>-rw-r--r-- 1 root root  953308 May 28 21:58 RECOVERDIR/user1/cimg1446.jpg</span>
<span lang=en>......</span></pre><p>
 <br><br>
 </p>
 <center>
 <table style=--darkreader-inline-bgcolor:#2f2f2e data-darkreader-inline-bgcolor width=100% cellspacing=0 cellpadding=5 bgcolor=#ffffff>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p><b><a href=http://ext4magic.sourceforge.net/ext4magic_en.html>Ext4magic</a>:</b>
 <a href=http://ext4magic.sourceforge.net/inode_en.html>Inode</a>
 - <a href=http://ext4magic.sourceforge.net/directory_en.html>Directory</a>
 - <a href=http://ext4magic.sourceforge.net/journal_en.html>Journal</a>
 - <a href=http://ext4magic.sourceforge.net/install_en.html>Install</a>
 - <strong>Time_Options</strong> - <a href=http://ext4magic.sourceforge.net/histogram_en.html>Histogram</a>
 - <a href=http://ext4magic.sourceforge.net/howto_en.html>Scenarios</a>
 - <a href=http://ext4magic.sourceforge.net/tips_en.html>Tips&amp;Tricks</a>
 - <a href=http://ext4magic.sourceforge.net/manpage_en.html>Manpage</a>
 - <a href=http://ext4magic.sourceforge.net/expert-mode_en.html>Expert-Mode</a>
 
 </p>
 </td>
 </tr>
 </table>
 </center>
 
 </div>
</div>
