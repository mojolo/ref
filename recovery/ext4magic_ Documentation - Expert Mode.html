<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html><!--
 Page saved with SingleFile 
 url: http://ext4magic.sourceforge.net/expert-mode_en.html 
 saved date: Thu Jan 23 2020 01:17:32 GMT+0000 (Coordinated Universal Time)
--><meta charset=utf-8><style class="darkreader darkreader--user-agent" media=screen>[data-darkreader-inline-bgcolor]{background-color:var(--darkreader-inline-bgcolor)!important}[data-darkreader-inline-border-bottom]{border-bottom-color:var(--darkreader-inline-border-bottom)!important}[data-darkreader-inline-border-left]{border-left-color:var(--darkreader-inline-border-left)!important}[data-darkreader-inline-border-right]{border-right-color:var(--darkreader-inline-border-right)!important}[data-darkreader-inline-border-top]{border-top-color:var(--darkreader-inline-border-top)!important}html{background-color:#2f2f2e!important}html,body{background-color:#2f2f2e}html,body{border-color:#837f79;color:#ffffff}a{color:#6ec8ff}table{border-color:#74716b}::placeholder{color:#fffbe4}::selection{background-color:#2983ed;color:#ffffff}::-moz-selection{background-color:#2983ed;color:#ffffff}::-webkit-scrollbar{background-color:#343433;color:#fffff5}::-webkit-scrollbar-thumb{background-color:#474745}::-webkit-scrollbar-corner{background-color:#2f2f2e}*{scrollbar-color:#474745 #343433}</style>
<title></title>
<meta name=GENERATOR content="LibreOffice 3.5  (Linux)">
<meta name=CREATED content=20140327;23041500>
<meta name=CHANGED content=20140415;3330400>
<style><!--@page{margin:2cm}TD P{margin-bottom:0cm}H1{margin-bottom:0.21cm}H1.western{font-family:"Liberation Serif",serif}P{margin-bottom:0.21cm}H2{margin-bottom:0.21cm}H3{margin-bottom:0.21cm}A:link{so-language:zxx}--></style>
<style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style><link type=image/x-icon rel="shortcut icon" href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></head>
<body dir=LTR lang=de-DE>
<h1 class=western><a name=firstHeading style=display:none!important></a>Ext4magic-Expert-Mode</h1>
<div id=bodyContent dir=LTR>
 <p><br><br>
 </p>
 <div id=contentSub dir=LTR>
 <p><br><br>
 </p>
 </div>
 <div id=mw-content-text dir=LTR>
 <center>
 <table style=--darkreader-inline-bgcolor:#2f2f2e data-darkreader-inline-bgcolor width=100% cellspacing=0 cellpadding=5 bgcolor=#ffffff>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p><b><a href=http://ext4magic.sourceforge.net/ext4magic_en.html>Ext4magic</a>:</b> <a href=http://ext4magic.sourceforge.net/inode_en.html>Inode</a>
 - <a href=http://ext4magic.sourceforge.net/directory_en.html>Directory</a> - <a href=http://ext4magic.sourceforge.net/journal_en.html>Journal</a>
 - <a href=http://ext4magic.sourceforge.net/install_en.html>Install</a> - <a href=http://ext4magic.sourceforge.net/time-options_en.html>Time_Options</a>
 - <a href=http://ext4magic.sourceforge.net/histogram_en.html>Histogram</a> - <a href=http://ext4magic.sourceforge.net/howto_en.html>Scenarios</a>
 - <a href=http://ext4magic.sourceforge.net/tips_en.html>Tips&amp;Tricks</a> - <a href=http://ext4magic.sourceforge.net/manpage_en.html>Manpage</a>
 - <strong>Expert-Mode</strong> 
 </p>
 </td>
 </tr>
 </table>
 </center>
 <p><br><br>
 </p>
 <p lang=en><br>Expert-mode is a set of options of ext4magic which
 enable special functions and usually will be used in special
 situations. In particular it will be possible to restore data from
 a corrupted file system. 
 </p>
 <p lang=en>The options of the expert mode are not enabled by
 default. The availability of these features are enabled at compile.
 The following commands enable the Expert-mode of ext4magic. 
 </p>
 <pre class=western lang=en>make clean
<span lang=en>./configure --enable-expert-mode</span>
<span lang=en>make</span>
<span lang=en>sudo make install</span></pre><p>
 <br><br>
 </p>
 <h2 class=western lang=en><a name=Options_and_arguments_of_Expert_mode></a>
 Options and arguments of Expert_mode</h2>
 <p lang=en>Following options are available if expert mode is
 enable during compile time: 
 </p>
 <dl>
 <dd lang=en>"<b>-s blocksize</b> " the block size for
 the file system 
 <dd style=margin-bottom:.5cm lang=en>
 "<b>-n blocknumber</b>" the blocknumber of the copy of
 the super block 
 </dl>
 <p lang=en>
 Both options have to be specified together in the order <b>"-s
 blocksize -n blocknumber"</b><br>to use a backup of the file
 system super block with ext4magic. These options will be needed if
 the file system superblock is corrupted. 
 </p>
 <p><br><br>
 </p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>"<b>-c</b>"
 additional this option can to "<b>-s blocksize -n
 blocknumber</b>" be chosen. 
 </dl>
 <p lang=en>
 ext4magic will not automatically search for the journal in the
 inode number 8. This is requiered, if the first inode blocks are
 broken and also inode number 8. (The journal with the inode number
 8 and the root directory with the inode number 2 are in the first
 inode block of the file system.) 
 </p>
 <p><br><br>
 </p>
 <dl>
 <dd style=margin-bottom:.5cm lang=en>"<b>-D</b>"
 this option is optimized too recover the files from a partially
 destroyed file system. 
 </dl>
 <p lang=en>
 Files of still existing inode blocks are recovered. As long the
 journal is consistent, any existing copies of lost or broken inodes
 will be used instead of the broken inodes of the file system. When
 using also the option "<b>-c</b>" a damaged journal is
 recognized, and tried to restore if possible, all undamaged files
 without the journal. This option is particularly suited, if the
 file system is partial overwritten at the beginning or the end.
 Repair with e2fsck is often possible, but risky for large damage,
 ext4magic here often has better chances of success. 
 </p>
 <p lang=en>In sum, these 4 options are needed, to open file
 systems with a defective super block and restore the files from
 such a defective file system. The requirement, the orginal file
 system size is still present. Was accidentally created a new file
 system on the old, and thus the file system meta data are
 completely overwritten, this option can not help because, then only
 a empty file system will be found. Damaged partition tables or
 similar, then ext4magic can not help. Also this will not work after
 <b>fsck</b> has tries to repair the file system. In this case use
 file craving tools, such as <b>photorec</b> to try restore some
 files. 
 </p>
 <p><br><br>
 </p>
 <p lang=en><br>In the comparison the full command line for a
 repair with <b>fsck</b> and the recover with <b>extmagic</b> 
 </p>
 <ul>
 <li><p lang=en><b>repair an ext3 file systems with broken
 superblock</b> 
 </p>
 </ul>
 <pre class=western style=margin-bottom:.5cm lang=en>fsck.ext3 -B 4096 -b 32768 -y -f /dev/sda1</pre><p>
 <br><br>
 </p>
 <ul>
 <li><p lang=en><b>ext4magic file system restore, write to
 /tmp/recover</b> 
 </p>
 </ul>
 <pre class=western style=margin-bottom:.5cm lang=en>ext4magic /dev/sda1 -s 4096 -n 32768 -c -D -d /tmp/recover</pre><p>
 <br><br>
 </p>
 <h3 class=western lang=en><a name=Help_script></a>Help script</h3>
 <p lang=en>There is a script which can help you find out the
 exact command line for ext4magic for such a defective file system.
 Run the script with the file system as a parameter. The script will
 print some possible command lines. Use one of these to try a
 recover. 
 </p>
 <pre class=western lang=en><font style=font-size:8pt size=1>#!/bin/bash</font>

<font style=font-size:8pt size=1><span lang=en># ext4magic  Help Script (dump2fs &gt;= 1.41.9)</span></font>
<font style=font-size:8pt size=1><span lang=en>#</span></font>
<font style=font-size:8pt size=1><span lang=en># to determine the correct command line for ext4magic</span></font>
<font style=font-size:8pt size=1><span lang=en># for try to restore of a partially damaged filesystem</span></font>
<font style=font-size:8pt size=1><span lang=en># if the beginning of the file system is corrupt.</span></font>
<font style=font-size:8pt size=1><span lang=en>#</span></font>
<font style=font-size:8pt size=1><span lang=en># Autor robi6@users.sf.net (Version 1.1 vom 03.06.2011)</span></font>

<font style=font-size:8pt size=1><span lang=en>if [ -b "$1" -o -f "$1" ]</span></font>
<font style=font-size:8pt size=1><span lang=en>then</span></font>
   <font style=font-size:8pt size=1><span lang=en>typeset -i BLK BLK_SZ GROUP</span></font>

   <font style=font-size:8pt size=1><span lang=en>for BLK_SZ in 1024 2048 4096</span></font>
      <font style=font-size:8pt size=1><span lang=en>do</span></font>
      <font style=font-size:8pt size=1><span lang=en>for GROUP in 1 3 5 7 9 25 27 49 81 125 243 343 729 2187 2401 3125</span></font>
         <font style=font-size:8pt size=1><span lang=en>do</span></font>
         <font style=font-size:8pt size=1><span lang=en>BLK="$BLK_SZ"*8*"$GROUP"</span></font>
         <font style=font-size:8pt size=1><span lang=en>if [ $BLK_SZ -eq 1024 ]</span></font>
           <font style=font-size:8pt size=1><span lang=en>then BLK="$BLK"+1</span></font>
         <font style=font-size:8pt size=1><span lang=en>fi</span></font>
         <font style=font-size:8pt size=1><span lang=en>dumpe2fs -h -o blocksize="$BLK_SZ" -o superblock="$BLK" "$1" 2&gt;/dev/null|grep UUID &amp;&gt;/dev/null &amp;&amp; echo "ext4magic \"$1\" -s $BLK_SZ -n $BLK -c -D"</span></font>
      <font style=font-size:8pt size=1><span lang=en>done</span></font>
   <font style=font-size:8pt size=1><span lang=en>done</span></font>
<font style=font-size:8pt size=1><span lang=en>else</span></font>
   <font style=font-size:8pt size=1><span lang=en>echo "usage: $0  &lt;device&gt;"</span></font>
<font style=font-size:8pt size=1><span lang=en>fi</span></font>
<font style=font-size:8pt size=1><span lang=en>#--------------- END ----------------</span></font></pre><p>
 <br><br>
 </p>
 <center>
 <table style=--darkreader-inline-bgcolor:#2f2f2e data-darkreader-inline-bgcolor width=100% cellspacing=0 cellpadding=5 bgcolor=#ffffff>
 <tbody><tr>
 <td style="border:medium none;padding:0cm;--darkreader-inline-border-top:currentcolor;--darkreader-inline-border-right:currentcolor;--darkreader-inline-border-bottom:currentcolor;--darkreader-inline-border-left:currentcolor" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>
 <p><b><a href=http://ext4magic.sourceforge.net/ext4magic_en.html>Ext4magic</a>:</b> <a href=http://ext4magic.sourceforge.net/inode_en.html>Inode</a>
 - <a href=http://ext4magic.sourceforge.net/directory_en.html>Directory</a> - <a href=http://ext4magic.sourceforge.net/journal_en.html>Journal</a>
 - <a href=http://ext4magic.sourceforge.net/install_en.html>Install</a> - <a href=http://ext4magic.sourceforge.net/time-options_en.html>Time_Options</a>
 - <a href=http://ext4magic.sourceforge.net/histogram_en.html>Histogram</a> - <a href=http://ext4magic.sourceforge.net/howto_en.html>Scenarios</a>
 - <a href=http://ext4magic.sourceforge.net/tips_en.html>Tips&amp;Tricks</a> - <a href=http://ext4magic.sourceforge.net/manpage_en.html>Manpage</a>
 - <strong>Expert-Mode</strong> 
 </p>
 </td>
 </tr>
 </table>
 </center>
 
 </div>
</div>
